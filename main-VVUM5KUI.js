var ab=Object.create;var Qi=Object.defineProperty,lb=Object.defineProperties,cb=Object.getOwnPropertyDescriptor,ub=Object.getOwnPropertyDescriptors,db=Object.getOwnPropertyNames,up=Object.getOwnPropertySymbols,fb=Object.getPrototypeOf,fp=Object.prototype.hasOwnProperty,hb=Object.prototype.propertyIsEnumerable;var dp=(n,e,t)=>e in n?Qi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||={})fp.call(e,t)&&dp(n,t,e[t]);if(up)for(var t of up(e))hb.call(e,t)&&dp(n,t,e[t]);return n},Z=(n,e)=>lb(n,ub(e));var pb=(n,e)=>()=>(n&&(e=n(n=0)),e);var Un=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),gb=(n,e)=>{for(var t in e)Qi(n,t,{get:e[t],enumerable:!0})},hp=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of db(e))!fp.call(n,i)&&i!==t&&Qi(n,i,{get:()=>e[i],enumerable:!(r=cb(e,i))||r.enumerable});return n};var mb=(n,e,t)=>(t=n!=null?ab(fb(n)):{},hp(e||!n||!n.__esModule?Qi(t,"default",{value:n,enumerable:!0}):t,n)),Hr=n=>hp(Qi({},"__esModule",{value:!0}),n);var p=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var Wn={};gb(Wn,{__addDisposableResource:()=>tg,__assign:()=>Zs,__asyncDelegator:()=>Kp,__asyncGenerator:()=>Xs,__asyncValues:()=>ea,__await:()=>Vt,__awaiter:()=>P,__classPrivateFieldGet:()=>Qp,__classPrivateFieldIn:()=>eg,__classPrivateFieldSet:()=>Xp,__createBinding:()=>Qs,__decorate:()=>Fp,__disposeResources:()=>ng,__esDecorate:()=>Vp,__exportStar:()=>$p,__extends:()=>Pp,__generator:()=>Hp,__importDefault:()=>Jp,__importStar:()=>Zp,__makeTemplateObject:()=>Yp,__metadata:()=>Bp,__param:()=>Lp,__propKey:()=>Up,__read:()=>au,__rest:()=>en,__rewriteRelativeImportExtension:()=>rg,__runInitializers:()=>jp,__setFunctionName:()=>Gp,__spread:()=>zp,__spreadArray:()=>qp,__spreadArrays:()=>Wp,__values:()=>Js,default:()=>kb});function Pp(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ou(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function en(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Fp(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function Lp(n,e){return function(t,r){e(t,r,n)}}function Vp(n,e,t,r,i,o){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&n?r.static?n:n.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,f=t.length-1;f>=0;f--){var b={};for(var S in r)b[S]=S==="access"?{}:r[S];for(var S in r.access)b.access[S]=r.access[S];b.addInitializer=function(w){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(w||null))};var E=(0,t[f])(a==="accessor"?{get:u.get,set:u.set}:u[l],b);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(d=s(E.get))&&(u.get=d),(d=s(E.set))&&(u.set=d),(d=s(E.init))&&i.unshift(d)}else(d=s(E))&&(a==="field"?i.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0}function jp(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function Up(n){return typeof n=="symbol"?n:"".concat(n)}function Gp(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Bp(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function P(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function Hp(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function $p(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Qs(e,n,t)}function Js(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function au(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o}function zp(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(au(arguments[e]));return n}function Wp(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function qp(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function Vt(n){return this instanceof Vt?(this.v=n,this):new Vt(n)}function Xs(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(b){return Promise.resolve(b).then(f,d)}}function a(f,b){r[f]&&(i[f]=function(S){return new Promise(function(E,w){o.push([f,S,E,w])>1||l(f,S)})},b&&(i[f]=b(i[f])))}function l(f,b){try{c(r[f](b))}catch(S){h(o[0][3],S)}}function c(f){f.value instanceof Vt?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,b){f(b),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Kp(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(s){return(t=!t)?{value:Vt(n[i](s)),done:!1}:o?o(s):s}:o}}function ea(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Js=="function"?Js(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}function Yp(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function Zp(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=su(n),r=0;r<t.length;r++)t[r]!=="default"&&Qs(e,n,t[r]);return Mb(e,n),e}function Jp(n){return n&&n.__esModule?n:{default:n}}function Qp(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Xp(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function eg(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function tg(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}function ng(n){function e(o){n.error=n.hasError?new Nb(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(o).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function rg(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,o,s){return r?e?".jsx":".js":i&&(!o||!s)?t:i+o+"."+s.toLowerCase()+"js"}):n}var ou,Zs,Qs,Mb,su,Nb,kb,ve=pb(()=>{ou=function(n,e){return ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},ou(n,e)};Zs=function(){return Zs=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Zs.apply(this,arguments)};Qs=Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};Mb=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},su=function(n){return su=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},su(n)};Nb=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};kb={__extends:Pp,__assign:Zs,__rest:en,__decorate:Fp,__param:Lp,__esDecorate:Vp,__runInitializers:jp,__propKey:Up,__setFunctionName:Gp,__metadata:Bp,__awaiter:P,__generator:Hp,__createBinding:Qs,__exportStar:$p,__values:Js,__read:au,__spread:zp,__spreadArrays:Wp,__spreadArray:qp,__await:Vt,__asyncGenerator:Xs,__asyncDelegator:Kp,__asyncValues:ea,__makeTemplateObject:Yp,__importStar:Zp,__importDefault:Jp,__classPrivateFieldGet:Qp,__classPrivateFieldSet:Xp,__classPrivateFieldIn:eg,__addDisposableResource:tg,__disposeResources:ng,__rewriteRelativeImportExtension:rg}});var fh=Un(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});var uh=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};dh.default=uh});var gh=Un(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});var OI=(ve(),Hr(Wn)),PI=OI.__importDefault(fh()),hh=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>p(this,null,function*(){var s,a,l,c;let u=null,d=null,h=null,f=o.status,b=o.statusText;if(o.ok){if(this.method!=="HEAD"){let L=yield o.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?d=L:d=JSON.parse(L))}let E=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),w=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");E&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,b="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let E=yield o.text();try{u=JSON.parse(E),Array.isArray(u)&&o.status===404&&(d=[],u=null,f=200,b="OK")}catch{o.status===404&&E===""?(f=204,b="No Content"):u={message:E}}if(u&&this.isMaybeSingle&&(!((c=u?.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,b="OK"),u&&this.shouldThrowOnError)throw new PI.default(u)}return{error:u,data:d,count:h,status:f,statusText:b}}));return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l,c,u,d;let h="",f=o?.cause;if(f){let b=(s=f?.message)!==null&&s!==void 0?s:"",S=(a=f?.code)!==null&&a!==void 0?a:"";h=`${(l=o?.name)!==null&&l!==void 0?l:"FetchError"}: ${o?.message}`,h+=`

Caused by: ${(c=f?.name)!==null&&c!==void 0?c:"Error"}: ${b}`,S&&(h+=` (${S})`),f?.stack&&(h+=`
${f.stack}`)}else h=(u=o?.stack)!==null&&u!==void 0?u:"";return{error:{message:`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};ph.default=hh});var yh=Un(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});var FI=(ve(),Hr(Wn)),LI=FI.__importDefault(gh()),mh=class extends LI.default{select(e){let t=!1,r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};vh.default=mh});var Ol=Un(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});var VI=(ve(),Hr(Wn)),jI=VI.__importDefault(yh()),UI=new RegExp("[,()]"),_h=class extends jI.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(i=>typeof i=="string"&&UI.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};bh.default=_h});var Ch=Un(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});var GI=(ve(),Hr(Wn)),ls=GI.__importDefault(Ol()),Eh=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,t){let{head:r=!1,count:i}=t??{},o=r?"HEAD":"GET",s=!1,a=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new ls.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;let o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let s=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ls.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var s;let a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){let c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ls.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(e,{count:t}={}){var r;let i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new ls.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;let r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ls.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};wh.default=Eh});var r_=Un(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});var n_=(ve(),Hr(Wn)),BI=n_.__importDefault(Ch()),HI=n_.__importDefault(Ol()),Dh=class n{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){let t=new URL(`${this.url}/${e}`);return new BI.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,l=new URL(`${this.url}/rpc/${e}`),c;r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(a="POST",c=t);let u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new HI.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Sh.default=Dh});var u_=Un(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.PostgrestError=et.PostgrestBuilder=et.PostgrestTransformBuilder=et.PostgrestFilterBuilder=et.PostgrestQueryBuilder=et.PostgrestClient=void 0;var Di=(ve(),Hr(Wn)),i_=Di.__importDefault(r_());et.PostgrestClient=i_.default;var o_=Di.__importDefault(Ch());et.PostgrestQueryBuilder=o_.default;var s_=Di.__importDefault(Ol());et.PostgrestFilterBuilder=s_.default;var a_=Di.__importDefault(yh());et.PostgrestTransformBuilder=a_.default;var l_=Di.__importDefault(gh());et.PostgrestBuilder=l_.default;var c_=Di.__importDefault(fh());et.PostgrestError=c_.default;et.default={PostgrestClient:i_.default,PostgrestQueryBuilder:o_.default,PostgrestFilterBuilder:s_.default,PostgrestTransformBuilder:a_.default,PostgrestBuilder:l_.default,PostgrestError:c_.default}});var $c;function Os(){return $c}function Ft(n){let e=$c;return $c=n,e}var pp=Symbol("NotFound");function $r(n){return n===pp||n?.name==="\u0275NotFound"}var $e=null,Ps=!1,zc=1,vb=null,Fe=Symbol("SIGNAL");function z(n){let e=$e;return $e=n,e}function js(){return $e}var Gn={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zr(n){if(Ps)throw new Error("");if($e===null)return;$e.consumerOnSignalRead(n);let e=$e.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=$e.recomputing;if(r&&(t=e!==void 0?e.nextProducer:$e.producers,t!==void 0&&t.producer===n)){$e.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===$e&&(!r||_b(i,$e)))return;let o=Kr($e),s={producer:n,consumer:$e,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};$e.producersTail=s,e!==void 0?e.nextProducer=s:$e.producers=s,o&&yp(n,s)}function gp(){zc++}function Us(n){if(!(Kr(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===zc)){if(!n.producerMustRecompute(n)&&!qr(n)){Vs(n);return}n.producerRecomputeValue(n),Vs(n)}}function Wc(n){if(n.consumers===void 0)return;let e=Ps;Ps=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||yb(r)}}finally{Ps=e}}function qc(){return $e?.consumerAllowSignalWrites!==!1}function yb(n){n.dirty=!0,Wc(n),n.consumerMarkedDirty?.(n)}function Vs(n){n.dirty=!1,n.lastCleanEpoch=zc}function Bn(n){return n&&mp(n),z(n)}function mp(n){n.producersTail=void 0,n.recomputing=!0}function Wr(n,e){z(e),n&&vp(n)}function vp(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Kr(n))do t=Kc(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function qr(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Us(t),r!==t.version))return!0}return!1}function Hn(n){if(Kr(n)){let e=n.producers;for(;e!==void 0;)e=Kc(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function yp(n,e){let t=n.consumersTail,r=Kr(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)yp(i.producer,i)}function Kc(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Kr(e)){let o=e.producers;for(;o!==void 0;)o=Kc(o)}return t}function Kr(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Gs(n){vb?.(n)}function _b(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Bs(n,e){return Object.is(n,e)}function eo(n,e){let t=Object.create(bb);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Us(t),zr(t),t.value===Xi)throw t.error;return t.value};return r[Fe]=t,Gs(t),r}var Fs=Symbol("UNSET"),Ls=Symbol("COMPUTING"),Xi=Symbol("ERRORED"),bb=Z(U({},Gn),{value:Fs,dirty:!0,error:null,equal:Bs,kind:"computed",producerMustRecompute(n){return n.value===Fs||n.value===Ls},producerRecomputeValue(n){if(n.value===Ls)throw new Error("");let e=n.value;n.value=Ls;let t=Bn(n),r,i=!1;try{r=n.computation(),z(null),i=e!==Fs&&e!==Xi&&r!==Xi&&n.equal(e,r)}catch(o){r=Xi,n.error=o}finally{Wr(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Eb(){throw new Error}var _p=Eb;function bp(n){_p(n)}function Yc(n){_p=n}var wb=null;function Zc(n,e){let t=Object.create(Hs);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Ep(t);return r[Fe]=t,Gs(t),[r,s=>Yr(t,s),s=>Jc(t,s)]}function Ep(n){return zr(n),n.value}function Yr(n,e){qc()||bp(n),n.equal(n.value,e)||(n.value=e,Cb(n))}function Jc(n,e){qc()||bp(n),Yr(n,e(n.value))}var Hs=Z(U({},Gn),{equal:Bs,value:void 0,kind:"signal"});function Cb(n){n.version++,gp(),Wc(n),wb?.(n)}function re(n){return typeof n=="function"}function $s(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var zs=$s(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function to(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof zs?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{wp(o)}catch(s){e=e??[],s instanceof zs?e=[...e,...s.errors]:e.push(s)}}if(e)throw new zs(e)}}add(e){var t;if(e&&e!==this)if(this.closed)wp(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&to(t,e)}remove(e){let{_finalizers:t}=this;t&&to(t,e),e instanceof n&&e._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var Qc=Ze.EMPTY;function Ws(n){return n instanceof Ze||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function wp(n){re(n)?n():n.unsubscribe()}var Tt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Zr={setTimeout(n,e,...t){let{delegate:r}=Zr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Zr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qs(n){Zr.setTimeout(()=>{let{onUnhandledError:e}=Tt;if(e)e(n);else throw n})}function Xc(){}var Cp=eu("C",void 0,void 0);function Dp(n){return eu("E",void 0,n)}function Sp(n){return eu("N",n,void 0)}function eu(n,e,t){return{kind:n,value:e,error:t}}var $n=null;function Jr(n){if(Tt.useDeprecatedSynchronousErrorHandling){let e=!$n;if(e&&($n={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=$n;if($n=null,t)throw r}}else n()}function Ip(n){Tt.useDeprecatedSynchronousErrorHandling&&$n&&($n.errorThrown=!0,$n.error=n)}var zn=class extends Ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ws(e)&&e.add(this)):this.destination=Ib}static create(e,t,r){return new Qr(e,t,r)}next(e){this.isStopped?nu(Sp(e),this):this._next(e)}error(e){this.isStopped?nu(Dp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?nu(Cp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Db=Function.prototype.bind;function tu(n,e){return Db.call(n,e)}var ru=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ks(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ks(r)}else Ks(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ks(t)}}},Qr=class extends zn{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Tt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&tu(e.next,o),error:e.error&&tu(e.error,o),complete:e.complete&&tu(e.complete,o)}):i=e}this.destination=new ru(i)}};function Ks(n){Tt.useDeprecatedSynchronousErrorHandling?Ip(n):qs(n)}function Sb(n){throw n}function nu(n,e){let{onStoppedNotification:t}=Tt;t&&Zr.setTimeout(()=>t(n,e))}var Ib={closed:!0,next:Xc,error:Sb,complete:Xc};var Xr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tp(n){return n}function xp(n){return n.length===0?Tp:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var _e=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=xb(t)?t:new Qr(t,r,i);return Jr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ap(r),new r((i,o)=>{let s=new Qr({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Xr](){return this}pipe(...t){return xp(t)(this)}toPromise(t){return t=Ap(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Ap(n){var e;return(e=n??Tt.Promise)!==null&&e!==void 0?e:Promise}function Tb(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function xb(n){return n&&n instanceof zn||Tb(n)&&Ws(n)}function Ab(n){return re(n?.lift)}function tt(n){return e=>{if(Ab(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function nt(n,e,t,r,i){return new iu(n,e,t,r,i)}var iu=class extends zn{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Mp=$s(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Lt=(()=>{class n extends _e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ys(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Mp}next(t){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qc:(this.currentObservers=null,o.push(t),new Ze(()=>{this.currentObservers=null,to(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new _e;return t.source=this,t}}return n.create=(e,t)=>new Ys(e,t),n})(),Ys=class extends Lt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Qc}};var no=class extends Lt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function Np(n){return n&&re(n.schedule)}function kp(n){return n[n.length-1]}function Rp(n){return re(kp(n))?n.pop():void 0}function Op(n){return Np(kp(n))?n.pop():void 0}ve();var ta=n=>n&&typeof n.length=="number"&&typeof n!="function";function na(n){return re(n?.then)}function ra(n){return re(n[Xr])}function ia(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function oa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Rb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sa=Rb();function aa(n){return re(n?.[sa])}ve();function la(n){return Xs(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Vt(t.read());if(i)return yield Vt(void 0);yield yield Vt(r)}}finally{t.releaseLock()}})}function ca(n){return re(n?.getReader)}function rt(n){if(n instanceof _e)return n;if(n!=null){if(ra(n))return Ob(n);if(ta(n))return Pb(n);if(na(n))return Fb(n);if(ia(n))return ig(n);if(aa(n))return Lb(n);if(ca(n))return Vb(n)}throw oa(n)}function Ob(n){return new _e(e=>{let t=n[Xr]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Pb(n){return new _e(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Fb(n){return new _e(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qs)})}function Lb(n){return new _e(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ig(n){return new _e(e=>{jb(n,e).catch(t=>e.error(t))})}function Vb(n){return ig(la(n))}function jb(n,e){var t,r,i,o;return P(this,void 0,void 0,function*(){try{for(t=ea(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ua(n,e=0){return tt((t,r)=>{t.subscribe(nt(r,i=>pt(r,n,()=>r.next(i),e),()=>pt(r,n,()=>r.complete(),e),i=>pt(r,n,()=>r.error(i),e)))})}function da(n,e=0){return tt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function og(n,e){return rt(n).pipe(da(e),ua(e))}function sg(n,e){return rt(n).pipe(da(e),ua(e))}function ag(n,e){return new _e(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lg(n,e){return new _e(t=>{let r;return pt(t,e,()=>{r=n[sa](),pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function fa(n,e){if(!n)throw new Error("Iterable cannot be null");return new _e(t=>{pt(t,e,()=>{let r=n[Symbol.asyncIterator]();pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function cg(n,e){return fa(la(n),e)}function ug(n,e){if(n!=null){if(ra(n))return og(n,e);if(ta(n))return ag(n,e);if(na(n))return sg(n,e);if(ia(n))return fa(n,e);if(aa(n))return lg(n,e);if(ca(n))return cg(n,e)}throw oa(n)}function ro(n,e){return e?ug(n,e):rt(n)}function ha(...n){let e=Op(n);return ro(n,e)}function it(n,e){return tt((t,r)=>{let i=0;t.subscribe(nt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Ub}=Array;function Gb(n,e){return Ub(e)?n(...e):n(e)}function dg(n){return it(e=>Gb(n,e))}var{isArray:Bb}=Array,{getPrototypeOf:Hb,prototype:$b,keys:zb}=Object;function fg(n){if(n.length===1){let e=n[0];if(Bb(e))return{args:e,keys:null};if(Wb(e)){let t=zb(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Wb(n){return n&&typeof n=="object"&&Hb(n)===$b}function hg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function pg(n,e,t,r,i,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=S=>c<r?b(S):l.push(S),b=S=>{o&&e.next(S),c++;let E=!1;rt(t(S,u++)).subscribe(nt(e,w=>{i?.(w),o?f(w):e.next(w)},()=>{E=!0},void 0,()=>{if(E)try{for(c--;l.length&&c<r;){let w=l.shift();s?pt(e,s,()=>b(w)):b(w)}h()}catch(w){e.error(w)}}))};return n.subscribe(nt(e,f,()=>{d=!0,h()})),()=>{a?.()}}function pa(n,e,t=1/0){return re(e)?pa((r,i)=>it((o,s)=>e(r,o,i,s))(rt(n(r,i))),t):(typeof e=="number"&&(t=e),tt((r,i)=>pg(r,i,n,t)))}function lu(...n){let e=Rp(n),{args:t,keys:r}=fg(n),i=new _e(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;rt(t[u]).subscribe(nt(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?hg(r,a):a),o.complete())}))}});return e?i.pipe(dg(e)):i}function cu(n,e){return tt((t,r)=>{let i=0;t.subscribe(nt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function uu(n,e){return re(e)?pa(n,e,1):pa(n,1)}function du(n){return tt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function fu(n,e){return tt((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(nt(r,l=>{i?.unsubscribe();let c=0,u=o++;rt(n(l,u)).subscribe(i=nt(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function gg(n){let e=z(null);try{return n()}finally{z(e)}}var mg=Z(U({},Gn),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function vg(n){if(n.dirty=!1,n.version>0&&!qr(n))return;n.version++;let e=Bn(n);try{n.cleanup(),n.fn()}finally{Wr(n,e)}}var ya="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",G=class extends Error{code;constructor(e,t){super(Jn(e,t)),this.code=e}};function qb(n){return`NG0${Math.abs(n)}`}function Jn(n,e){return`${qb(n)}${e?": "+e:""}`}function le(n){for(let e in n)if(n[e]===le)return e;throw Error("")}function bg(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function pn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(pn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Cu(n,e){return n?e?`${n} ${e}`:n:e||""}var Kb=le({__forward_ref__:le});function At(n){return n.__forward_ref__=At,n.toString=function(){return pn(this())},n}function Ue(n){return Du(n)?n():n}function Du(n){return typeof n=="function"&&n.hasOwnProperty(Kb)&&n.__forward_ref__===At}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ut(n){return{providers:n.providers||[],imports:n.imports||[]}}function _a(n){return Yb(n,ba)}function Yb(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Zb(n){let e=n?.[ba]??null;return e||null}function pu(n){return n&&n.hasOwnProperty(ma)?n[ma]:null}var ba=le({\u0275prov:le}),ma=le({\u0275inj:le}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Su(n){return n&&!!n.\u0275providers}var Iu=le({\u0275cmp:le}),Tu=le({\u0275dir:le}),xu=le({\u0275pipe:le});var oo=le({\u0275fac:le}),Qn=le({__NG_ELEMENT_ID__:le}),yg=le({__NG_ENV_ID__:le});function Xn(n){return typeof n=="string"?n:n==null?"":String(n)}function Eg(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Xn(n)}var wg=le({ngErrorCode:le}),Jb=le({ngErrorMessage:le}),Qb=le({ngTokenPath:le});function Au(n,e){return Cg("",-200,e)}function Ea(n,e){throw new G(-201,!1)}function Cg(n,e,t){let r=new G(e,n);return r[wg]=e,r[Jb]=n,t&&(r[Qb]=t),r}function Xb(n){return n[wg]}var gu;function Dg(){return gu}function Je(n){let e=gu;return gu=n,e}function Mu(n,e,t){let r=_a(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ea(n,"Injector")}var eE={},qn=eE,tE="__NG_DI_FLAG__",mu=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Kn(t)||0;try{return this.injector.get(e,r&8?null:qn,r)}catch(i){if($r(i))return i;throw i}}};function nE(n,e=0){let t=Os();if(t===void 0)throw new G(-203,!1);if(t===null)return Mu(n,void 0,e);{let r=rE(e),i=t.retrieve(n,r);if($r(i)){if(r.optional)return null;throw i}return i}}function ee(n,e=0){return(Dg()||nE)(Ue(n),e)}function R(n,e){return ee(n,Kn(e))}function Kn(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function rE(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function vu(n){let e=[];for(let t=0;t<n.length;t++){let r=Ue(n[t]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=iE(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(ee(i,o))}else e.push(ee(r))}return e}function iE(n){return n[tE]}function gn(n,e){let t=n.hasOwnProperty(oo);return t?n[oo]:null}function Sg(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Ig(n){return n.flat(Number.POSITIVE_INFINITY)}function wa(n,e){n.forEach(t=>Array.isArray(t)?wa(t,e):e(t))}function Nu(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function lo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Tg(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function xg(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Ag(n,e,t){let r=ti(n,e);return r>=0?n[r|1]=t:(r=~r,xg(n,r,e,t)),r}function Ca(n,e){let t=ti(n,e);if(t>=0)return n[t|1]}function ti(n,e){return oE(n,e,1)}function oE(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var vn={},ot=[],er=new q(""),ku=new q("",-1),Ru=new q(""),so=class{get(e,t=qn){if(t===qn){let i=Cg("",-201);throw i.name="\u0275NotFound",i}return t}};function tr(n){return n[Iu]||null}function Ou(n){return n[Tu]||null}function Mg(n){return n[xu]||null}function co(n){return{\u0275providers:n}}function Ng(...n){return{\u0275providers:Pu(!0,n),\u0275fromNgModule:!0}}function Pu(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return wa(e,s=>{let a=s;va(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&kg(i,o),t}function kg(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Fu(i,o=>{e(o,r)})}}function va(n,e,t,r){if(n=Ue(n),!n)return!1;let i=null,o=pu(n),s=!o&&tr(n);if(!o&&!s){let l=n.ngModule;if(o=pu(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)va(c,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{wa(o.imports,u=>{va(u,e,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&kg(c,e)}if(!a){let c=gn(i)||(()=>new i);e({provide:i,useFactory:c,deps:ot},i),e({provide:Ru,useValue:i,multi:!0},i),e({provide:er,useValue:()=>ee(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;Fu(l,u=>{e(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function Fu(n,e){for(let t of n)Su(t)&&(t=t.\u0275providers),Array.isArray(t)?Fu(t,e):e(t)}var sE=le({provide:String,useValue:le});function Rg(n){return n!==null&&typeof n=="object"&&sE in n}function aE(n){return!!(n&&n.useExisting)}function lE(n){return!!(n&&n.useFactory)}function Yn(n){return typeof n=="function"}function Og(n){return!!n.useClass}var uo=new q(""),ga={},_g={},hu;function fo(){return hu===void 0&&(hu=new so),hu}var st=class{},Zn=class extends st{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,_u(e,s=>this.processProvider(s)),this.records.set(ku,ei(void 0,this)),i.has("environment")&&this.records.set(st,ei(void 0,this));let o=this.records.get(uo);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ru,ot,{self:!0}))}retrieve(e,t){let r=Kn(t)||0;try{return this.get(e,qn,r)}catch(i){if($r(i))return i;throw i}}destroy(){io(this),this._destroyed=!0;let e=z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(e)}}onDestroy(e){return io(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){io(this);let t=Ft(this),r=Je(void 0),i;try{return e()}finally{Ft(t),Je(r)}}get(e,t=qn,r){if(io(this),e.hasOwnProperty(yg))return e[yg](this);let i=Kn(r),o,s=Ft(this),a=Je(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let u=hE(e)&&_a(e);u&&this.injectableDefInScope(u)?c=ei(yu(e),ga):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let l=i&2?fo():this.parent;return t=i&8&&t===qn?null:t,l.get(e,t)}catch(l){let c=Xb(l);throw c===-200||c===-201?new G(c,null):l}finally{Je(a),Ft(s)}}resolveInjectorInitializers(){let e=z(null),t=Ft(this),r=Je(void 0),i;try{let o=this.get(er,ot,{self:!0});for(let s of o)s()}finally{Ft(t),Je(r),z(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(pn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ue(e);let t=Yn(e)?e:Ue(e&&e.provide),r=uE(e);if(!Yn(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ei(void 0,ga,!0),i.factory=()=>vu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=z(null);try{if(t.value===_g)throw Au(pn(e));return t.value===ga&&(t.value=_g,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&fE(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ue(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yu(n){let e=_a(n),t=e!==null?e.factory:gn(n);if(t!==null)return t;if(n instanceof q)throw new G(204,!1);if(n instanceof Function)return cE(n);throw new G(204,!1)}function cE(n){if(n.length>0)throw new G(204,!1);let t=Zb(n);return t!==null?()=>t.factory(n):()=>new n}function uE(n){if(Rg(n))return ei(void 0,n.useValue);{let e=Lu(n);return ei(e,ga)}}function Lu(n,e,t){let r;if(Yn(n)){let i=Ue(n);return gn(i)||yu(i)}else if(Rg(n))r=()=>Ue(n.useValue);else if(lE(n))r=()=>n.useFactory(...vu(n.deps||[]));else if(aE(n))r=(i,o)=>ee(Ue(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ue(n&&(n.useClass||n.provide));if(dE(n))r=()=>new i(...vu(n.deps));else return gn(i)||yu(i)}return r}function io(n){if(n.destroyed)throw new G(205,!1)}function ei(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function dE(n){return!!n.deps}function fE(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function hE(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function _u(n,e){for(let t of n)Array.isArray(t)?_u(t,e):t&&Su(t)?_u(t.\u0275providers,e):e(t)}function ni(n,e){let t;n instanceof Zn?(io(n),t=n):t=new mu(n);let r,i=Ft(t),o=Je(void 0);try{return e()}finally{Ft(i),Je(o)}}function Pg(){return Dg()!==void 0||Os()!=null}var Mt=0,B=1,K=2,Me=3,mt=4,Qe=5,nr=6,ri=7,we=8,yn=9,Gt=10,ue=11,ii=12,Vu=13,rr=14,ze=15,_n=16,ir=17,Bt=18,ho=19,ju=20,tn=21,Da=22,nn=23,ft=24,Sa=25,or=26,ye=27,Fg=1,Uu=6,bn=7,po=8,sr=9,Te=10;function Ht(n){return Array.isArray(n)&&typeof n[Fg]=="object"}function Nt(n){return Array.isArray(n)&&n[Fg]===!0}function Gu(n){return(n.flags&4)!==0}function En(n){return n.componentOffset>-1}function oi(n){return(n.flags&1)===1}function $t(n){return!!n.template}function si(n){return(n[K]&512)!==0}function ar(n){return(n[K]&256)===256}var Bu="svg",Lg="math";function vt(n){for(;Array.isArray(n);)n=n[Mt];return n}function Hu(n,e){return vt(e[n])}function kt(n,e){return vt(e[n.index])}function go(n,e){return n.data[e]}function $u(n,e){return n[e]}function zu(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function yt(n,e){let t=e[n];return Ht(t)?t:t[Mt]}function Vg(n){return(n[K]&4)===4}function Ia(n){return(n[K]&128)===128}function jg(n){return Nt(n[Me])}function _t(n,e){return e==null?null:n[e]}function Wu(n){n[ir]=0}function qu(n){n[K]&1024||(n[K]|=1024,Ia(n)&&lr(n))}function Ug(n,e){for(;n>0;)e=e[rr],n--;return e}function mo(n){return!!(n[K]&9216||n[ft]?.dirty)}function Ta(n){n[Gt].changeDetectionScheduler?.notify(8),n[K]&64&&(n[K]|=1024),mo(n)&&lr(n)}function lr(n){n[Gt].changeDetectionScheduler?.notify(0);let e=mn(n);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!Ia(e)));)e=mn(e)}function Ku(n,e){if(ar(n))throw new G(911,!1);n[tn]===null&&(n[tn]=[]),n[tn].push(e)}function Gg(n,e){if(n[tn]===null)return;let t=n[tn].indexOf(e);t!==-1&&n[tn].splice(t,1)}function mn(n){let e=n[Me];return Nt(e)?e[Me]:e}function Yu(n){return n[ri]??=[]}function Zu(n){return n.cleanup??=[]}function Bg(n,e,t,r){let i=Yu(e);i.push(t),n.firstCreatePass&&Zu(n).push(r,i.length-1)}var X={lFrame:em(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var bu=!1;function Hg(){return X.lFrame.elementDepthCount}function $g(){X.lFrame.elementDepthCount++}function Ju(){X.lFrame.elementDepthCount--}function xa(){return X.bindingsEnabled}function Qu(){return X.skipHydrationRootTNode!==null}function Xu(n){return X.skipHydrationRootTNode===n}function ed(){X.skipHydrationRootTNode=null}function W(){return X.lFrame.lView}function be(){return X.lFrame.tView}function C(n){return X.lFrame.contextLView=n,n[we]}function D(n){return X.lFrame.contextLView=null,n}function Le(){let n=td();for(;n!==null&&n.type===64;)n=n.parent;return n}function td(){return X.lFrame.currentTNode}function zg(){let n=X.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ai(n,e){let t=X.lFrame;t.currentTNode=n,t.isParent=e}function nd(){return X.lFrame.isParent}function rd(){X.lFrame.isParent=!1}function Wg(){return X.lFrame.contextLView}function id(){return bu}function li(n){let e=bu;return bu=n,e}function od(){let n=X.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function qg(){return X.lFrame.bindingIndex}function Kg(n){return X.lFrame.bindingIndex=n}function wn(){return X.lFrame.bindingIndex++}function sd(n){let e=X.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Yg(){return X.lFrame.inI18n}function Zg(n,e){let t=X.lFrame;t.bindingIndex=t.bindingRootIndex=n,Aa(e)}function Jg(){return X.lFrame.currentDirectiveIndex}function Aa(n){X.lFrame.currentDirectiveIndex=n}function Qg(n){let e=X.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Ma(){return X.lFrame.currentQueryIndex}function vo(n){X.lFrame.currentQueryIndex=n}function pE(n){let e=n[B];return e.type===2?e.declTNode:e.type===1?n[Qe]:null}function ad(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=pE(o),i===null||(o=o[rr],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=X.lFrame=Xg();return r.currentTNode=e,r.lView=n,!0}function Na(n){let e=Xg(),t=n[B];X.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Xg(){let n=X.lFrame,e=n===null?null:n.child;return e===null?em(n):e}function em(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function tm(){let n=X.lFrame;return X.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ld=tm;function ka(){let n=tm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function nm(n){return(X.lFrame.contextLView=Ug(n,X.lFrame.contextLView))[we]}function rn(){return X.lFrame.selectedIndex}function Cn(n){X.lFrame.selectedIndex=n}function yo(){let n=X.lFrame;return go(n.tView,n.selectedIndex)}function J(){X.lFrame.currentNamespace=Bu}function De(){gE()}function gE(){X.lFrame.currentNamespace=null}function rm(){return X.lFrame.currentNamespace}var im=!0;function Ra(){return im}function _o(n){im=n}function Eu(n,e=null,t=null,r){let i=om(n,e,t,r);return i.resolveInjectorInitializers(),i}function om(n,e=null,t=null,r,i=new Set){let o=[t||ot,Ng(n)];return r=r||(typeof n=="object"?void 0:pn(n)),new Zn(o,e||fo(),r||null,i)}var jt=class n{static THROW_IF_NOT_FOUND=qn;static NULL=new so;static create(e,t){if(Array.isArray(e))return Eu({name:""},t,e,"");{let r=e.name??"";return Eu({name:r},e.parent,e.providers,r)}}static \u0275prov=Q({token:n,providedIn:"any",factory:()=>ee(ku)});static __NG_ELEMENT_ID__=-1},Xe=new q(""),on=(()=>{class n{static __NG_ELEMENT_ID__=mE;static __NG_ENV_ID__=t=>t}return n})(),ao=class extends on{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ar(this._lView)}onDestroy(e){let t=this._lView;return Ku(t,e),()=>Gg(t,e)}};function mE(){return new ao(W())}var gt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},zt=new q("",{providedIn:"root",factory:()=>{let n=R(st),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(gt),e.handleError(t))}}}),sm={provide:er,useValue:()=>void R(gt),multi:!0};function cd(n){return typeof n=="function"&&n[Fe]!==void 0}function A(n,e){let[t,r,i]=Zc(n,e?.equal),o=t,s=o[Fe];return o.set=r,o.update=i,o.asReadonly=ud.bind(o),o}function ud(){let n=this[Fe];if(n.readonlyFn===void 0){let e=()=>this();e[Fe]=n,n.readonlyFn=e}return n.readonlyFn}function dd(n){return cd(n)&&typeof n.set=="function"}var bo=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=vE}return n})();function vE(){return new bo(W(),Le())}var xt=class{},Eo=new q("",{providedIn:"root",factory:()=>!1});var fd=new q(""),Oa=new q(""),Dn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new no(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new _e(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),wo=(()=>{class n{internalPendingTasks=R(Dn);scheduler=R(xt);errorHandler=R(zt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();function cr(...n){}var Co=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new wu})}return n})(),wu=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Po(n){return{toString:n}.toString()}function SE(n){return typeof n=="function"}var Ga=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Fm(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var In=(()=>{let n=()=>Lm;return n.ngInherit=!0,n})();function Lm(n){return n.type.prototype.ngOnChanges&&(n.setInput=TE),IE}function IE(){let n=jm(this),e=n?.current;if(e){let t=n.previous;if(t===vn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function TE(n,e,t,r,i){let o=this.declaredInputs[r],s=jm(n)||xE(n,{previous:vn,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Ga(c&&c.currentValue,t,l===vn),Fm(n,e,i,t)}var Vm="__ngSimpleChanges__";function jm(n){return n[Vm]||null}function xE(n,e){return n[Vm]=e}var am=[];var de=function(n,e=null,t){for(let r=0;r<am.length;r++){let i=am[r];i(n,e,t)}};function AE(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Lm(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Um(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Fa(n,e,t){Gm(n,e,3,t)}function La(n,e,t,r){(n[K]&3)===t&&Gm(n,e,t,r)}function hd(n,e){let t=n[K];(t&3)===e&&(t&=16383,t+=1,n[K]=t)}function Gm(n,e,t,r){let i=r!==void 0?n[ir]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[ir]+=65536),(a<o||o==-1)&&(ME(n,t,e,l),n[ir]=(n[ir]&4294901760)+l+2),l++}function lm(n,e){de(4,n,e);let t=z(null);try{e.call(n)}finally{z(t),de(5,n,e)}}function ME(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[K]>>14<n[ir]>>16&&(n[K]&3)===e&&(n[K]+=16384,lm(a,o)):lm(a,o)}var ui=-1,dr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function NE(n){return(n.flags&8)!==0}function kE(n){return(n.flags&16)!==0}function RE(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];PE(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function OE(n){return n===3||n===4||n===6}function PE(n){return n.charCodeAt(0)===64}function di(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cm(n,t,i,null,e[++r]):cm(n,t,i,null,null))}}return n}function cm(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Bm(n){return n!==ui}function Ba(n){return n&32767}function FE(n){return n>>16}function Ha(n,e){let t=FE(n),r=e;for(;t>0;)r=r[rr],t--;return r}var Cd=!0;function $a(n){let e=Cd;return Cd=n,e}var LE=256,Hm=LE-1,$m=5,VE=0,Wt={};function jE(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Qn)&&(r=t[Qn]),r==null&&(r=t[Qn]=VE++);let i=r&Hm,o=1<<i;e.data[n+(i>>$m)]|=o}function za(n,e){let t=zm(n,e);if(t!==-1)return t;let r=e[B];r.firstCreatePass&&(n.injectorIndex=e.length,pd(r.data,n),pd(e,null),pd(r.blueprint,null));let i=ef(n,e),o=n.injectorIndex;if(Bm(i)){let s=Ba(i),a=Ha(i,e),l=a[B].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function pd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zm(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ef(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Zm(i),r===null)return ui;if(t++,i=i[rr],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ui}function Dd(n,e,t){jE(n,e,t)}function Wm(n,e,t){if(t&8||n!==void 0)return n;Ea(e,"NodeInjector")}function qm(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[yn],o=Je(void 0);try{return i?i.get(e,r,t&8):Mu(e,r,t&8)}finally{Je(o)}}return Wm(r,e,t)}function Km(n,e,t,r=0,i){if(n!==null){if(e[K]&2048&&!(r&2)){let s=HE(n,e,t,r,Wt);if(s!==Wt)return s}let o=Ym(n,e,t,r,Wt);if(o!==Wt)return o}return qm(e,t,r,i)}function Ym(n,e,t,r,i){let o=GE(t);if(typeof o=="function"){if(!ad(e,n,r))return r&1?Wm(i,t,r):qm(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ea(t);else return s}finally{ld()}}else if(typeof o=="number"){let s=null,a=zm(n,e),l=ui,c=r&1?e[ze][Qe]:null;for((a===-1||r&4)&&(l=a===-1?ef(n,e):e[a+8],l===ui||!dm(r,!1)?a=-1:(s=e[B],a=Ba(l),e=Ha(l,e)));a!==-1;){let u=e[B];if(um(o,a,u.data)){let d=UE(a,e,t,s,r,c);if(d!==Wt)return d}l=e[a+8],l!==ui&&dm(r,e[B].data[a+8]===c)&&um(o,a,e)?(s=u,a=Ba(l),e=Ha(l,e)):a=-1}}return i}function UE(n,e,t,r,i,o){let s=e[B],a=s.data[n+8],l=r==null?En(a)&&Cd:r!=s&&(a.type&3)!==0,c=i&1&&o===a,u=Va(a,s,t,l,c);return u!==null?Io(e,s,u,a,i):Wt}function Va(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:c;for(let f=d;f<h;f++){let b=s[f];if(f<l&&t===b||f>=l&&b.type===t)return f}if(i){let f=s[l];if(f&&$t(f)&&f.type===t)return l}return null}function Io(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof dr){let a=o;if(a.resolving){let f=Eg(s[t]);throw Au(f)}let l=$a(a.canSeeViewProviders);a.resolving=!0;let c=s[t].type||s[t],u,d=a.injectImpl?Je(a.injectImpl):null,h=ad(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&AE(t,s[t],e)}finally{d!==null&&Je(d),$a(l),a.resolving=!1,ld()}}return o}function GE(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Qn)?n[Qn]:void 0;return typeof e=="number"?e>=0?e&Hm:BE:e}function um(n,e,t){let r=1<<n;return!!(t[e+(n>>$m)]&r)}function dm(n,e){return!(n&2)&&!(n&1&&e)}var ur=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Km(this._tNode,this._lView,e,Kn(r),t)}};function BE(){return new ur(Le(),W())}function nl(n){return Po(()=>{let e=n.prototype.constructor,t=e[oo]||Sd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[oo]||Sd(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Sd(n){return Du(n)?()=>{let e=Sd(Ue(n));return e&&e()}:gn(n)}function HE(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[K]&2048&&!si(s);){let a=Ym(o,s,t,r|2,Wt);if(a!==Wt)return a;let l=o.parent;if(!l){let c=s[ju];if(c){let u=c.get(t,Wt,r);if(u!==Wt)return u}l=Zm(s),s=s[rr]}o=l}return i}function Zm(n){let e=n[B],t=e.type;return t===2?e.declTNode:t===1?n[Qe]:null}function $E(){return mi(Le(),W())}function mi(n,e){return new Pt(kt(n,e))}var Pt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=$E}return n})();function Jm(n){return n instanceof Pt?n.nativeElement:n}function zE(){return this._results[Symbol.iterator]()}var Wa=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Lt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Ig(e);(this._changesDetected=!Sg(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=zE};function Qm(n){return(n.flags&128)===128}var tf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(tf||{}),Xm=new Map,WE=0;function qE(){return WE++}function KE(n){Xm.set(n[ho],n)}function Id(n){Xm.delete(n[ho])}var fm="__ngContext__";function fi(n,e){Ht(e)?(n[fm]=e[ho],KE(e)):n[fm]=e}function ev(n){return nv(n[ii])}function tv(n){return nv(n[mt])}function nv(n){for(;n!==null&&!Nt(n);)n=n[mt];return n}var Td;function nf(n){Td=n}function rv(){if(Td!==void 0)return Td;if(typeof document<"u")return document;throw new G(210,!1)}var rl=new q("",{providedIn:"root",factory:()=>YE}),YE="ng",il=new q(""),vi=new q("",{providedIn:"platform",factory:()=>"unknown"});var ol=new q("",{providedIn:"root",factory:()=>rv().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ZE="h",JE="b";var iv="r";var ov="di";var sv=!1,av=new q("",{providedIn:"root",factory:()=>sv});var QE=(n,e,t,r)=>{};function XE(n,e,t,r){QE(n,e,t,r)}function sl(n){return(n.flags&32)===32}var ew=()=>null;function lv(n,e,t=!1){return ew(n,e,t)}function cv(n,e){let t=n.contentQueries;if(t!==null){let r=z(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];vo(o),a.contentQueries(2,e[s],s)}}}finally{z(r)}}}function xd(n,e,t){vo(0);let r=z(null);try{e(n,t)}finally{z(r)}}function rf(n,e,t){if(Gu(e)){let r=z(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{z(r)}}}var sn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(sn||{});var qa=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ya})`}};function of(n){return n instanceof qa?n.changingThisBreaksApplicationSecurity:n}function uv(n,e){let t=dv(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ya})`)}return t===e}function dv(n){return n instanceof qa&&n.getTypeName()||null}var tw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fv(n){return n=String(n),n.match(tw)?n:"unsafe:"+n}var sf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(sf||{});function Tn(n){let e=nw();return e?e.sanitize(sf.URL,n)||"":uv(n,"URL")?of(n):fv(Xn(n))}function nw(){let n=W();return n&&n[Gt].sanitizer}var rw=/^>|^->|<!--|-->|--!>|<!-$/g,iw=/(<|>)/g,ow="\u200B$1\u200B";function sw(n){return n.replace(rw,e=>e.replace(iw,ow))}function af(n){return n.ownerDocument.defaultView}function We(n){return n.ownerDocument}function aw(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var hv="ng-template";function lw(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aw(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(lf(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function lf(n){return n.type===4&&n.value!==hv}function cw(n,e,t){let r=n.type===4&&!t?hv:n.value;return e===r}function uw(n,e,t){let r=4,i=n.attrs,o=i!==null?hw(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Rt(r)&&!Rt(l))return!1;if(s&&Rt(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!cw(n,l,t)||l===""&&e.length===1){if(Rt(r))return!1;s=!0}}else if(r&8){if(i===null||!lw(n,i,l,t)){if(Rt(r))return!1;s=!0}}else{let c=e[++a],u=dw(l,i,lf(n),t);if(u===-1){if(Rt(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(Rt(r))return!1;s=!0}}}}return Rt(r)||s}function Rt(n){return(n&1)===0}function dw(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return pw(e,n)}function pv(n,e,t=!1){for(let r=0;r<e.length;r++)if(uw(n,e[r],t))return!0;return!1}function fw(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function hw(n){for(let e=0;e<n.length;e++){let t=n[e];if(OE(t))return e}return n.length}function pw(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function gw(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function hm(n,e){return n?":not("+e.trim()+")":e}function mw(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Rt(s)&&(e+=hm(o,i),i=""),r=s,o=o||!Rt(r);t++}return i!==""&&(e+=hm(o,i)),e}function vw(n){return n.map(mw).join(",")}function yw(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Rt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var bt={};function _w(n,e){return n.createText(e)}function bw(n,e,t){n.setValue(e,t)}function Ew(n,e){return n.createComment(sw(e))}function gv(n,e,t){return n.createElement(e,t)}function Ka(n,e,t,r,i){n.insertBefore(e,t,r,i)}function mv(n,e,t){n.appendChild(e,t)}function pm(n,e,t,r,i){r!==null?Ka(n,e,t,r,i):mv(n,e,t)}function vv(n,e,t,r){n.removeChild(null,e,t,r)}function ww(n,e,t){n.setAttribute(e,"style",t)}function Cw(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yv(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&RE(n,e,r),i!==null&&Cw(n,e,i),o!==null&&ww(n,e,o)}function cf(n,e,t,r,i,o,s,a,l,c,u){let d=ye+r,h=d+i,f=Dw(d,h),b=typeof c=="function"?c():c;return f[B]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:u}}function Dw(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:bt);return t}function Sw(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=cf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function uf(n,e,t,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[Mt]=i,d[K]=r|4|128|8|64|1024,(c!==null||n&&n[K]&2048)&&(d[K]|=2048),Wu(d),d[Me]=d[rr]=n,d[we]=t,d[Gt]=s||n&&n[Gt],d[ue]=a||n&&n[ue],d[yn]=l||n&&n[yn]||null,d[Qe]=o,d[ho]=qE(),d[nr]=u,d[ju]=c,d[ze]=e.type==2?n[ze]:d,d}function Iw(n,e,t){let r=kt(e,n),i=Sw(t),o=n[Gt].rendererFactory,s=df(n,uf(n,i,null,_v(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function _v(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function bv(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function df(n,e){return n[ii]?n[Vu][mt]=e:n[ii]=e,n[Vu]=e,e}function _(n=1){Ev(be(),W(),rn()+n,!1)}function Ev(n,e,t,r){if(!r)if((e[K]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fa(e,o,t)}else{let o=n.preOrderHooks;o!==null&&La(e,o,0,t)}Cn(t)}var al=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(al||{});function Ad(n,e,t,r){let i=z(null);try{let[o,s,a]=n.inputs[t],l=null;(s&al.SignalBased)!==0&&(l=e[o][Fe]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):Fm(e,l,o,r)}finally{z(i)}}var qt=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(qt||{}),Tw;function ff(n,e){return Tw(n,e)}var hi=new Set,hf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(hf||{}),Fo=new q(""),gm=new Set;function gr(n){gm.has(n)||(gm.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var wv=!1,Md=class extends Lt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Pg()&&(this.destroyRef=R(on,{optional:!0})??void 0,this.pendingTasks=R(Dn,{optional:!0})??void 0)}emit(e){let t=z(null);try{super.next(e)}finally{z(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ne=Md;function Cv(n){let e,t;function r(){n=cr;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function mm(n){return queueMicrotask(()=>n()),()=>{n=cr}}var pf="isAngularZone",Ya=pf+"_ID",xw=0,Se=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ne(!1);onMicrotaskEmpty=new Ne(!1);onStable=new Ne(!1);onError=new Ne(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=wv}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Nw(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(pf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new G(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Aw,cr,cr);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Aw={};function gf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Mw(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Cv(()=>{n.callbackScheduled=!1,Nd(n),n.isCheckStableRunning=!0,gf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Nd(n)}function Nw(n){let e=()=>{Mw(n)},t=xw++;n._inner=n._inner.fork({name:"angular",properties:{[pf]:!0,[Ya]:t,[Ya+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(kw(l))return r.invokeTask(o,s,a,l);try{return vm(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ym(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return vm(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Rw(l)&&e(),ym(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Nd(n),gf(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Nd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function vm(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ym(n){n._nesting--,gf(n)}var To=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ne;onMicrotaskEmpty=new Ne;onStable=new Ne;onError=new Ne;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function kw(n){return Dv(n,"__ignore_ng_zone__")}function Rw(n){return Dv(n,"__scheduler_tick__")}function Dv(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Sv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();var Ow=new q("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Iv(n,e){let t=n.get(Ow);if(Array.isArray(e))for(let r of e)t.queue.add(r);else t.queue.add(e);t.scheduler&&t.scheduler(n)}function Pw(n,e){for(let[t,r]of e)Iv(n,r.animateFns)}function _m(n,e,t,r){let i=n?.[or]?.enter;e!==null&&i&&i.has(t.index)&&Pw(r,i)}function ci(n,e,t,r,i,o,s,a){if(i!=null){let l,c=!1;Nt(i)?l=i:Ht(i)&&(c=!0,i=i[Mt]);let u=vt(i);n===0&&r!==null?(_m(a,r,o,t),s==null?mv(e,r,u):Ka(e,r,u,s||null,!0)):n===1&&r!==null?(_m(a,r,o,t),Ka(e,r,u,s||null,!0)):n===2?bm(a,o,t,d=>{vv(e,u,c,d)}):n===3&&bm(a,o,t,()=>{e.destroyNode(u)}),l!=null&&Ww(e,n,t,l,o,r,s)}}function Fw(n,e){Tv(n,e),e[Mt]=null,e[Qe]=null}function Lw(n,e,t,r,i,o){r[Mt]=i,r[Qe]=e,cl(n,r,t,1,i,o)}function Tv(n,e){e[Gt].changeDetectionScheduler?.notify(9),cl(n,e,e[ue],2,null,null)}function Vw(n){let e=n[ii];if(!e)return gd(n[B],n);for(;e;){let t=null;if(Ht(e))t=e[ii];else{let r=e[Te];r&&(t=r)}if(!t){for(;e&&!e[mt]&&e!==n;)Ht(e)&&gd(e[B],e),e=e[Me];e===null&&(e=n),Ht(e)&&gd(e[B],e),t=e&&e[mt]}e=t}}function mf(n,e){let t=n[sr],r=t.indexOf(e);t.splice(r,1)}function ll(n,e){if(ar(e))return;let t=e[ue];t.destroyNode&&cl(n,e,t,3,null,null),Vw(e)}function gd(n,e){if(ar(e))return;let t=z(null);try{e[K]&=-129,e[K]|=256,e[ft]&&Hn(e[ft]),Gw(n,e),Uw(n,e),e[B].type===1&&e[ue].destroy();let r=e[_n];if(r!==null&&Nt(e[Me])){r!==e[Me]&&mf(r,e);let i=e[Bt];i!==null&&i.detachView(n)}Id(e)}finally{z(t)}}function bm(n,e,t,r){let i=n?.[or];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);if(i.skipLeaveAnimations)return i.skipLeaveAnimations=!1,r(!1);n&&hi.add(n),Iv(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s)for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:u}=c();a.push(u)}i.running=Promise.allSettled(a),jw(n,r)}else n&&hi.delete(n),r(!1)})}function jw(n,e){let t=n[or]?.running;if(t){t.then(()=>{n[or].running=void 0,hi.delete(n),e(!0)});return}e(!1)}function Uw(n,e){let t=n.cleanup,r=e[ri];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ri]=null);let i=e[tn];if(i!==null){e[tn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[nn];if(o!==null){e[nn]=null;for(let s of o)s.destroy()}}function Gw(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof dr)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];de(4,a,l);try{l.call(a)}finally{de(5,a,l)}}else{de(4,i,o);try{o.call(i)}finally{de(5,i,o)}}}}}function xv(n,e,t){return Bw(n,e.parent,t)}function Bw(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Mt];if(En(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===sn.None||i===sn.Emulated)return null}return kt(r,t)}function Av(n,e,t){return $w(n,e,t)}function Hw(n,e,t){return n.type&40?kt(n,t):null}var $w=Hw,Em;function vf(n,e,t,r){let i=xv(n,r,e),o=e[ue],s=r.parent||e[Qe],a=Av(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)pm(o,i,t[l],a,!1);else pm(o,i,t,a,!1);Em!==void 0&&Em(o,r,e,t,i)}function Do(n,e){if(e!==null){let t=e.type;if(t&3)return kt(e,n);if(t&4)return kd(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Do(n,r);{let i=n[e.index];return Nt(i)?kd(-1,i):vt(i)}}else{if(t&128)return Do(n,e.next);if(t&32)return ff(e,n)()||vt(n[e.index]);{let r=Mv(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=mn(n[ze]);return Do(i,r)}else return Do(n,e.next)}}}return null}function Mv(n,e){if(e!==null){let r=n[ze][Qe],i=e.projection;return r.projection[i]}return null}function kd(n,e){let t=Te+n+1;if(t<e.length){let r=e[t],i=r[B].firstChild;if(i!==null)return Do(r,i)}return e[bn]}function yf(n,e,t,r,i,o,s){for(;t!=null;){let a=r[yn];if(t.type===128){t=t.next;continue}let l=r[t.index],c=t.type;if(s&&e===0&&(l&&fi(vt(l),r),t.flags|=2),!sl(t))if(c&8)yf(n,e,t.child,r,i,o,!1),ci(e,n,a,i,l,t,o,r);else if(c&32){let u=ff(t,r),d;for(;d=u();)ci(e,n,a,i,d,t,o,r);ci(e,n,a,i,l,t,o,r)}else c&16?Nv(n,e,r,t,i,o):ci(e,n,a,i,l,t,o,r);t=s?t.projectionNext:t.next}}function cl(n,e,t,r,i,o){yf(t,r,n.firstChild,e,i,o,!1)}function zw(n,e,t){let r=e[ue],i=xv(n,t,e),o=t.parent||e[Qe],s=Av(o,t,e);Nv(r,0,e,t,i,s)}function Nv(n,e,t,r,i,o){let s=t[ze],l=s[Qe].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];ci(e,n,t[yn],i,u,r,o,t)}else{let c=l,u=s[Me];Qm(r)&&(c.flags|=128),yf(n,e,c,u,i,o,!0)}}function Ww(n,e,t,r,i,o,s){let a=r[bn],l=vt(r);a!==l&&ci(e,n,t,o,a,i,s);for(let c=Te;c<r.length;c++){let u=r[c];cl(u[B],u,n,e,o,a)}}function qw(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:qt.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qt.Important),n.setStyle(t,r,i,o))}}function kv(n,e,t,r,i){let o=rn(),s=r&2;try{Cn(-1),s&&e.length>ye&&Ev(n,e,ye,!1),de(s?2:0,i,t),t(r,i)}finally{Cn(o),de(s?3:1,i,t)}}function ul(n,e,t){Xw(n,e,t),(t.flags&64)===64&&eC(n,e,t)}function Lo(n,e,t=kt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Kw(n,e,t,r){let o=r.get(av,sv)||t===sn.ShadowDom,s=n.selectRootElement(e,o);return Yw(s),s}function Yw(n){Zw(n)}var Zw=()=>null;function Jw(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Rv(n,e,t,r,i,o){let s=e[B];if(wf(n,s,e,t,r)){En(n)&&Qw(e,n.index);return}n.type&3&&(t=Jw(t)),Ov(n,e,t,r,i,o)}function Ov(n,e,t,r,i,o){if(n.type&3){let s=kt(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function Qw(n,e){let t=yt(e,n);t[K]&16||(t[K]|=64)}function Xw(n,e,t){let r=t.directiveStart,i=t.directiveEnd;En(t)&&Iw(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||za(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=Io(e,n,s,t);if(fi(l,e),o!==null&&iC(e,s-r,l,a,t,o),$t(a)){let c=yt(t.index,e);c[we]=Io(e,n,s,t)}}}function eC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Jg();try{Cn(o);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];Aa(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&tC(l,c)}}finally{Cn(-1),Aa(s)}}function tC(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function _f(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];pv(e,o.selectors,!1)&&(r??=[],$t(o)?r.unshift(o):r.push(o))}return r}function nC(n,e,t,r,i,o){let s=kt(n,e);rC(e[ue],s,o,n.value,t,r,i)}function rC(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Xn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function iC(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];Ad(r,t,l,c)}}function bf(n,e,t,r,i){let o=ye+t,s=e[B],a=i(s,e,n,r,t);e[o]=a,ai(n,!0);let l=n.type===2;return l?(yv(e[ue],a,n),(Hg()===0||oi(n))&&fi(a,e),$g()):fi(a,e),Ra()&&(!l||!sl(n))&&vf(s,e,a,n),n}function Ef(n){let e=n;return nd()?rd():(e=e.parent,ai(e,!1)),e}function oC(n,e){let t=n[yn];if(!t)return;let r;try{r=t.get(zt,null)}catch{r=null}r?.(e)}function wf(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=e.data[c];Ad(d,t[c],u,i),a=!0}if(o)for(let l of o){let c=t[l],u=e.data[l];Ad(u,c,r,i),a=!0}return a}function sC(n,e){let t=yt(e,n),r=t[B];aC(r,t);let i=t[Mt];i!==null&&t[nr]===null&&(t[nr]=lv(i,t[yn])),de(18),Cf(r,t,t[we]),de(19,t[we])}function aC(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Cf(n,e,t){Na(e);try{let r=n.viewQuery;r!==null&&xd(1,r,t);let i=n.template;i!==null&&kv(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Bt]?.finishViewCreation(n),n.staticContentQueries&&cv(n,e),n.staticViewQueries&&xd(2,n.viewQuery,t);let o=n.components;o!==null&&lC(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[K]&=-5,ka()}}function lC(n,e){for(let t=0;t<e.length;t++)sC(n,e[t])}function Vo(n,e,t,r){let i=z(null);try{let o=e.tView,a=n[K]&4096?4096:16,l=uf(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[_n]=c;let u=n[Bt];return u!==null&&(l[Bt]=u.createEmbeddedView(o)),Cf(o,l,t),l}finally{z(i)}}function pi(n,e){return!e||e.firstChild===null||Qm(n)}function xo(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(vt(o)),Nt(o)&&Pv(o,r);let s=t.type;if(s&8)xo(n,e,t.child,r);else if(s&32){let a=ff(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=Mv(e,t);if(Array.isArray(a))r.push(...a);else{let l=mn(e[ze]);xo(l[B],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Pv(n,e){for(let t=Te;t<n.length;t++){let r=n[t],i=r[B].firstChild;i!==null&&xo(r[B],r,i,e)}n[bn]!==n[Mt]&&e.push(n[bn])}function Fv(n){if(n[Sa]!==null){for(let e of n[Sa])e.impl.addSequence(e);n[Sa].length=0}}var Lv=[];function cC(n){return n[ft]??uC(n)}function uC(n){let e=Lv.pop()??Object.create(fC);return e.lView=n,e}function dC(n){n.lView[ft]!==n&&(n.lView=null,Lv.push(n))}var fC=Z(U({},Gn),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{lr(n.lView)},consumerOnSignalRead(){this.lView[ft]=this}});function hC(n){let e=n[ft]??Object.create(pC);return e.lView=n,e}var pC=Z(U({},Gn),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=mn(n.lView);for(;e&&!Vv(e[B]);)e=mn(e);e&&qu(e)},consumerOnSignalRead(){this.lView[ft]=this}});function Vv(n){return n.type!==2}function jv(n){if(n[nn]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[nn])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[K]&8192)}}var gC=100;function Uv(n,e=0){let r=n[Gt].rendererFactory,i=!1;i||r.begin?.();try{mC(n,e)}finally{i||r.end?.()}}function mC(n,e){let t=id();try{li(!0),Rd(n,e);let r=0;for(;mo(n);){if(r===gC)throw new G(103,!1);r++,Rd(n,1)}}finally{li(t)}}function vC(n,e,t,r){if(ar(e))return;let i=e[K],o=!1,s=!1;Na(e);let a=!0,l=null,c=null;o||(Vv(n)?(c=cC(e),l=Bn(c)):js()===null?(a=!1,c=hC(e),l=Bn(c)):e[ft]&&(Hn(e[ft]),e[ft]=null));try{Wu(e),Kg(n.bindingStartIndex),t!==null&&kv(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&Fa(e,f,null)}else{let f=n.preOrderHooks;f!==null&&La(e,f,0,null),hd(e,0)}if(s||yC(e),jv(e),Gv(e,0),n.contentQueries!==null&&cv(n,e),!o)if(u){let f=n.contentCheckHooks;f!==null&&Fa(e,f)}else{let f=n.contentHooks;f!==null&&La(e,f,1),hd(e,1)}bC(n,e);let d=n.components;d!==null&&Hv(e,d,0);let h=n.viewQuery;if(h!==null&&xd(2,h,r),!o)if(u){let f=n.viewCheckHooks;f!==null&&Fa(e,f)}else{let f=n.viewHooks;f!==null&&La(e,f,2),hd(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Da]){for(let f of e[Da])f();e[Da]=null}o||(Fv(e),e[K]&=-73)}catch(u){throw o||lr(e),u}finally{c!==null&&(Wr(c,l),a&&dC(c)),ka()}}function Gv(n,e){for(let t=ev(n);t!==null;t=tv(t))for(let r=Te;r<t.length;r++){let i=t[r];Bv(i,e)}}function yC(n){for(let e=ev(n);e!==null;e=tv(e)){if(!(e[K]&2))continue;let t=e[sr];for(let r=0;r<t.length;r++){let i=t[r];qu(i)}}}function _C(n,e,t){de(18);let r=yt(e,n);Bv(r,t),de(19,r[we])}function Bv(n,e){Ia(n)&&Rd(n,e)}function Rd(n,e){let r=n[B],i=n[K],o=n[ft],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qr(o)),s||=!1,o&&(o.dirty=!1),n[K]&=-9217,s)vC(r,n,r.template,n[we]);else if(i&8192){let a=z(null);try{jv(n),Gv(n,1);let l=r.components;l!==null&&Hv(n,l,1),Fv(n)}finally{z(a)}}}function Hv(n,e,t){for(let r=0;r<e.length;r++)_C(n,e[r],t)}function bC(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Cn(~i);else{let o=i,s=t[++r],a=t[++r];Zg(s,o);let l=e[o];de(24,l),a(2,l),de(25,l)}}}finally{Cn(-1)}}function Df(n,e){let t=id()?64:1088;for(n[Gt].changeDetectionScheduler?.notify(e);n;){n[K]|=t;let r=mn(n);if(si(n)&&!r)return n;n=r}return null}function $v(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function zv(n,e){let t=Te+e;if(t<n.length)return n[t]}function jo(n,e,t,r=!0){let i=e[B];if(EC(i,e,n,t),r){let s=kd(t,n),a=e[ue],l=a.parentNode(n[bn]);l!==null&&Lw(i,n[Qe],a,e,l,s)}let o=e[nr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Wv(n,e){let t=Ao(n,e);return t!==void 0&&ll(t[B],t),t}function Ao(n,e){if(n.length<=Te)return;let t=Te+e,r=n[t];if(r){let i=r[_n];i!==null&&i!==n&&mf(i,r),e>0&&(n[t-1][mt]=r[mt]);let o=lo(n,Te+e);Fw(r[B],r);let s=o[Bt];s!==null&&s.detachView(o[B]),r[Me]=null,r[mt]=null,r[K]&=-129}return r}function EC(n,e,t,r){let i=Te+r,o=t.length;r>0&&(t[i-1][mt]=e),r<o-Te?(e[mt]=t[i],Nu(t,Te+r,e)):(t.push(e),e[mt]=null),e[Me]=t;let s=e[_n];s!==null&&t!==s&&qv(s,e);let a=e[Bt];a!==null&&a.insertView(n),Ta(e),e[K]|=128}function qv(n,e){let t=n[sr],r=e[Me];if(Ht(r))n[K]|=2;else{let i=r[Me][ze];e[ze]!==i&&(n[K]|=2)}t===null?n[sr]=[e]:t.push(e)}var Sn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[B];return xo(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[we]}set context(e){this._lView[we]=e}get destroyed(){return ar(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Me];if(Nt(e)){let t=e[po],r=t?t.indexOf(this):-1;r>-1&&(Ao(e,r),lo(t,r))}this._attachedToViewContainer=!1}ll(this._lView[B],this._lView)}onDestroy(e){Ku(this._lView,e)}markForCheck(){Df(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){Ta(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,Uv(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=si(this._lView),t=this._lView[_n];t!==null&&!e&&mf(t,this._lView),Tv(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let t=si(this._lView),r=this._lView[_n];r!==null&&!t&&qv(r,this._lView),Ta(this._lView)}};var fr=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=wC;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Vo(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Sn(o)}}return n})();function wC(){return dl(Le(),W())}function dl(n,e){return n.type&4?new fr(e,n,mi(n,e)):null}function yi(n,e,t,r,i){let o=n.data[e];if(o===null)o=CC(n,e,t,r,i),Yg()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=zg();o.injectorIndex=s===null?-1:s.injectorIndex}return ai(o,!0),o}function CC(n,e,t,r,i){let o=td(),s=nd(),a=s?o:o&&o.parent,l=n.data[e]=SC(n,a,t,e,r,i);return DC(n,l,o,s),l}function DC(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function SC(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Qu()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var gP=new RegExp(`^(\\d+)*(${JE}|${ZE})*(.*)`);function IC(n){let e=n[Uu]??[],r=n[Me][ue],i=[];for(let o of e)o.data[ov]!==void 0?i.push(o):TC(o,r);n[Uu]=i}function TC(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[iv];for(;t<i;){let o=r.nextSibling;vv(e,r,!1),r=o,t++}}}var xC=()=>null,AC=()=>null;function Za(n,e){return xC(n,e)}function Kv(n,e,t){return AC(n,e,t)}var Yv=class{},fl=class{},Od=class{resolveComponentFactory(e){throw new G(917,!1)}},hl=class{static NULL=new Od},hr=class{},Uo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>MC()}return n})();function MC(){let n=W(),e=Le(),t=yt(e.index,n);return(Ht(t)?t:n)[ue]}var Zv=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}return n})();var ja={},Pd=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ja,r);return i!==ja||t===ja?i:this.parentInjector.get(e,t,r)}};function Ja(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Cu(i,a);else if(o==2){let l=a,c=e[++s];r=Cu(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ne(n,e=0){let t=W();if(t===null)return ee(n,e);let r=Le();return Km(r,t,Ue(n),e)}function Jv(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}RC(n,e,t,a,o,l,c)}o!==null&&r!==null&&NC(t,r,o)}function NC(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}function kC(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function RC(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let h=0;h<a;h++){let f=r[h];!l&&$t(f)&&(l=!0,kC(n,t,h)),Dd(za(t,e),n,f.type)}jC(t,n.data.length,a);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=bv(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(t.mergedAttrs=di(t.mergedAttrs,f.hostAttrs),PC(n,t,e,d,f),VC(d,f,i),s!==null&&s.has(f)){let[S,E]=s.get(f);t.directiveToIndex.set(f.type,[d,S+t.directiveStart,E+t.directiveStart])}else(o===null||!o.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let b=f.type.prototype;!c&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}OC(n,t,o)}function OC(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))wm(0,e,i,r),wm(1,e,i,r),Dm(e,r,!1);else{let o=t.get(i);Cm(0,e,o,r),Cm(1,e,o,r),Dm(e,r,!0)}}}function wm(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Qv(e,o)}}function Cm(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Qv(e,s)}}function Qv(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Dm(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||lf(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function PC(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=gn(i.type,!0)),s=new dr(o,$t(i),ne,null);n.blueprint[r]=s,t[r]=s,FC(n,e,r,bv(n,t,i.hostVars,bt),i)}function FC(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;LC(s)!=a&&s.push(a),s.push(t,r,o)}}function LC(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function VC(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;$t(e)&&(t[""]=n)}}function jC(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Sf(n,e,t,r,i,o,s,a){let l=e[B],c=l.consts,u=_t(c,s),d=yi(l,n,t,r,u);return o&&Jv(l,e,d,_t(c,a),i),d.mergedAttrs=di(d.mergedAttrs,d.attrs),d.attrs!==null&&Ja(d,d.attrs,!1),d.mergedAttrs!==null&&Ja(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function If(n,e){Um(n,e),Gu(e)&&n.queries.elementEnd(e)}function UC(n,e,t,r,i,o){let s=e.consts,a=_t(s,i),l=yi(e,n,t,r,a);if(l.mergedAttrs=di(l.mergedAttrs,l.attrs),o!=null){let c=_t(s,o);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&Ja(l,l.attrs,!1),l.mergedAttrs!==null&&Ja(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function GC(n,e,t){return n[e]=t}function Ot(n,e,t){if(t===bt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function BC(n,e,t,r){let i=Ot(n,e,t);return Ot(n,e+1,r)||i}function Ua(n,e,t){return function r(i){let o=En(n)?yt(n.index,e):e;Df(o,5);let s=e[we],a=Sm(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=Sm(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function Sm(n,e,t,r){let i=z(null);try{return de(6,e,t),t(r)!==!1}catch(o){return oC(n,o),!1}finally{de(7,e,t),z(i)}}function Xv(n,e,t,r,i,o,s,a){let l=oi(n),c=!1,u=null;if(!r&&l&&(u=$C(e,t,o,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let d=kt(n,t),h=r?r(d):d;XE(t,h,o,a);let f=i.listen(h,o,a);if(!HC(o)){let b=r?S=>r(vt(S[n.index])):n.index;ey(b,e,t,o,a,f,!1)}}return c}function HC(n){return n.startsWith("animation")||n.startsWith("transition")}function $C(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ri],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function ey(n,e,t,r,i,o,s){let a=e.firstCreatePass?Zu(e):null,l=Yu(t),c=l.length;l.push(i,o),a&&a.push(r,n,c,(c+1)*(s?-1:1))}function Im(n,e,t,r,i,o){let s=e[t],a=e[B],c=a.data[t].outputs[r],d=s[c].subscribe(o);ey(n.index,a,e,i,o,d,!0)}var Fd=Symbol("BINDING");var Ld=class extends hl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=tr(e);return new Mo(t,this.ngModule)}};function zC(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&al.SignalBased)!==0};return i&&(o.transform=i),o})}function WC(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function qC(n,e,t){let r=e instanceof st?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Pd(t,r):t}function KC(n){let e=n.get(hr,null);if(e===null)throw new G(407,!1);let t=n.get(Zv,null),r=n.get(xt,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function YC(n,e){let t=ty(n);return gv(e,t,t==="svg"?Bu:t==="math"?Lg:null)}function ty(n){return(n.selectors[0][0]||"div").toLowerCase()}var Mo=class extends fl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=zC(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=WC(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=vw(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){de(22);let a=z(null);try{let l=this.componentDef,c=ZC(r,l,s,o),u=qC(l,i||this.ngModule,e),d=KC(u),h=d.rendererFactory.createRenderer(null,l),f=r?Kw(h,r,l.encapsulation,u):YC(l,h),b=s?.some(Tm)||o?.some(w=>typeof w!="function"&&w.bindings.some(Tm)),S=uf(null,c,null,512|_v(l),null,null,d,h,u,null,lv(f,u,!0));S[ye]=f,Na(S);let E=null;try{let w=Sf(ye,S,2,"#host",()=>c.directiveRegistry,!0,0);yv(h,f,w),fi(f,S),ul(c,S,w),rf(c,w,S),If(c,w),t!==void 0&&QC(w,this.ngContentSelectors,t),E=yt(w.index,S),S[we]=E[we],Cf(c,S,null)}catch(w){throw E!==null&&Id(E),Id(S),w}finally{de(23),ka()}return new Qa(this.componentType,S,!!b)}finally{z(a)}}};function ZC(n,e,t,r){let i=n?["ng-version","20.3.9"]:yw(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[Fd].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[Fd].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let l=[e];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=Ou(d);l.push(h)}return cf(0,null,JC(o,s),1,a,l,null,null,null,[i],null)}function JC(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Tm(n){let e=n[Fd].kind;return e==="input"||e==="twoWay"}var Qa=class extends Yv{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=go(t[B],ye),this.location=mi(this._tNode,t),this.instance=yt(this._tNode.index,t)[we],this.hostView=this.changeDetectorRef=new Sn(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=wf(r,i[B],i,e,t);this.previousInputValues.set(e,t);let s=yt(r.index,i);Df(s,1)}get injector(){return new ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QC(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var mr=(()=>{class n{static __NG_ELEMENT_ID__=XC}return n})();function XC(){let n=Le();return ry(n,W())}var eD=mr,ny=class extends eD{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return mi(this._hostTNode,this._hostLView)}get injector(){return new ur(this._hostTNode,this._hostLView)}get parentInjector(){let e=ef(this._hostTNode,this._hostLView);if(Bm(e)){let t=Ha(e,this._hostLView),r=Ba(e),i=t[B].data[r+8];return new ur(i,t)}else return new ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=xm(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Te}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Za(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,pi(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!SE(e),c;if(l)c=t;else{let E=t||{};c=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef,s=E.directives,a=E.bindings}let u=l?e:new Mo(tr(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let w=(l?d:this.parentInjector).get(st,null);w&&(o=w)}let h=tr(u.componentType??{}),f=Za(this._lContainer,h?.id??null),b=f?.firstChild??null,S=u.create(d,i,b,o,s,a);return this.insertImpl(S.hostView,c,pi(this._hostTNode,f)),S}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(jg(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Me],c=new ny(l,l[Qe],l[Me]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return jo(s,i,o,r),e.attachToViewContainerRef(),Nu(md(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=xm(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ao(this._lContainer,t);r&&(lo(md(this._lContainer),t),ll(r[B],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ao(this._lContainer,t);return r&&lo(md(this._lContainer),t)!=null?new Sn(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function xm(n){return n[po]}function md(n){return n[po]||(n[po]=[])}function ry(n,e){let t,r=e[n.index];return Nt(r)?t=r:(t=$v(r,e,null,n),e[n.index]=t,df(e,t)),nD(t,e,n,r),new ny(t,n,e)}function tD(n,e){let t=n[ue],r=t.createComment(""),i=kt(e,n),o=t.parentNode(i);return Ka(t,o,r,t.nextSibling(i),!1),r}var nD=oD,rD=()=>!1;function iD(n,e,t){return rD(n,e,t)}function oD(n,e,t,r){if(n[bn])return;let i;t.type&8?i=vt(r):i=tD(e,t),n[bn]=i}var Vd=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},jd=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)xf(e,t).matches!==null&&this.queries[t].setDirty()}},Ud=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=dD(e):this.predicate=e}},Gd=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Bd=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,sD(t,o)),this.matchTNodeWithReadOption(e,t,Va(t,e,o,!1,!1))}else r===fr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Va(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Pt||i===mr||i===fr&&t.type&4)this.addMatch(t.index,-2);else{let o=Va(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function sD(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function aD(n,e){return n.type&11?mi(n,e):n.type&4?dl(n,e):null}function lD(n,e,t,r){return t===-1?aD(e,n):t===-2?cD(n,e,r):Io(n,n[B],t,e)}function cD(n,e,t){if(t===Pt)return mi(e,n);if(t===fr)return dl(e,n);if(t===mr)return ry(e,n)}function iy(n,e,t,r){let i=e[Bt].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(lD(e,u,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Hd(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=iy(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=Te;d<u.length;d++){let h=u[d];h[_n]===h[Me]&&Hd(h[B],h,c,r)}if(u[sr]!==null){let d=u[sr];for(let h=0;h<d.length;h++){let f=d[h];Hd(f[B],f,c,r)}}}}}return r}function Tf(n,e){return n[Bt].queries[e].queryList}function uD(n,e,t){let r=new Wa((t&4)===4);return Bg(n,e,r,r.destroy),(e[Bt]??=new jd).queries.push(new Vd(r))-1}function oy(n,e,t){let r=be();return r.firstCreatePass&&(fD(r,new Ud(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),uD(r,W(),e)}function dD(n){return n.split(",").map(e=>e.trim())}function fD(n,e,t){n.queries===null&&(n.queries=new Gd),n.queries.track(new Bd(e,t))}function xf(n,e){return n.queries.getByIndex(e)}function sy(n,e){let t=n[B],r=xf(t,e);return r.crossesNgTemplate?Hd(t,n,e,[]):iy(t,n,r,e)}function ay(n,e,t){let r,i=eo(()=>{r._dirtyCounter();let o=pD(r,n);if(e&&o===void 0)throw new G(-951,!1);return o});return r=i[Fe],r._dirtyCounter=A(0),r._flatValue=void 0,i}function ly(n){return ay(!0,!1,n)}function cy(n){return ay(!0,!0,n)}function hD(n,e){let t=n[Fe];t._lView=W(),t._queryIndex=e,t._queryList=Tf(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(r=>r+1))}function pD(n,e){let t=n._lView,r=n._queryIndex;if(t===void 0||r===void 0||t[K]&4)return e?void 0:ot;let i=Tf(t,r),o=sy(t,r);return i.reset(o,Jm),e?i.first:i._changesDetected||n._flatValue===void 0?n._flatValue=i.toArray():n._flatValue}var No=class{};var ko=class extends No{injector;componentFactoryResolver=new Ld(this);instance=null;constructor(e){super();let t=new Zn([...e.providers,{provide:No,useValue:this},{provide:hl,useValue:this.componentFactoryResolver}],e.parent||fo(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function uy(n,e,t=null){return new ko({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var gD=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Pu(!1,t.type),i=r.length>0?uy([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(ee(st))})}return n})();function Ge(n){return Po(()=>{let e=dy(n),t=Z(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===tf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(gD).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||sn.Emulated,styles:n.styles||ot,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&gr("NgStandalone"),fy(t);let r=n.dependencies;return t.directiveDefs=Am(r,mD),t.pipeDefs=Am(r,Mg),t.id=_D(t),t})}function mD(n){return tr(n)||Ou(n)}function an(n){return Po(()=>({type:n.type,bootstrap:n.bootstrap||ot,declarations:n.declarations||ot,imports:n.imports||ot,exports:n.exports||ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function vD(n,e){if(n==null)return vn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=al.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function yD(n){if(n==null)return vn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ve(n){return Po(()=>{let e=dy(n);return fy(e),e})}function Af(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function dy(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||vn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:vD(n.inputs,e),outputs:yD(n.outputs),debugInfo:null}}function fy(n){n.features?.forEach(e=>e(n))}function Am(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function _D(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function bD(n){return Object.getPrototypeOf(n.prototype).constructor}function Et(n){let e=bD(n.type),t=!0,r=[n];for(;e;){let i;if($t(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=vd(n.inputs),s.declaredInputs=vd(n.declaredInputs),s.outputs=vd(n.outputs);let a=i.hostBindings;a&&SD(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&CD(n,l),c&&DD(n,c),ED(n,i),bg(n.outputs,i.outputs),$t(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Et&&(t=!1)}}e=Object.getPrototypeOf(e)}wD(r)}function ED(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function wD(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=di(i.hostAttrs,t=di(t,i.hostAttrs))}}function vd(n){return n===vn?{}:n===ot?[]:n}function CD(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function DD(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function SD(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function hy(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=di(n.mergedAttrs,n.attrs);let u=n.tView=cf(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ai(n,!1);let l=TD(t,e,n,r);Ra()&&vf(t,e,l,n),fi(l,e);let c=$v(l,e,l,n);e[r+ye]=c,df(e,c),iD(c,n,e)}function ID(n,e,t,r,i,o,s,a,l,c,u){let d=t+ye,h;return e.firstCreatePass?(h=yi(e,d,4,s||null,a||null),xa()&&Jv(e,n,h,_t(e.consts,c),_f),Um(e,h)):h=e.data[d],hy(h,n,e,t,r,i,o,l),oi(h)&&ul(e,n,h),c!=null&&Lo(n,h,u),h}function Ro(n,e,t,r,i,o,s,a,l,c,u){let d=t+ye,h;if(e.firstCreatePass){if(h=yi(e,d,4,s||null,a||null),c!=null){let f=_t(e.consts,c);h.localNames=[];for(let b=0;b<f.length;b+=2)h.localNames.push(f[b],-1)}}else h=e.data[d];return hy(h,n,e,t,r,i,o,l),c!=null&&Lo(n,h,u),h}function Kt(n,e,t,r,i,o,s,a){let l=W(),c=be(),u=_t(c.consts,o);return ID(l,c,n,e,t,r,i,u,void 0,s,a),Kt}var TD=xD;function xD(n,e,t,r){return _o(!0),e[ue].createComment("")}var Mf=new q("");function _i(n){return!!n&&typeof n.then=="function"}function Nf(n){return!!n&&typeof n.subscribe=="function"}var pl=new q("");var kf=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(pl,{optional:!0})??[];injector=R(jt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ni(this.injector,i);if(_i(o))t.push(o);else if(Nf(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),py=new q("");function gy(){Yc(()=>{let n="";throw new G(600,n)})}function my(n){return n.isBoundToModule}var AD=10;var bi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(zt);afterRenderManager=R(Sv);zonelessEnabled=R(Eo);rootEffectScheduler=R(Co);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Lt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(Dn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(it(t=>!t))}constructor(){R(Fo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(st);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=jt.NULL){return this._injector.get(Se).run(()=>{de(10);let s=t instanceof fl;if(!this._injector.get(kf).done){let b="";throw new G(405,b)}let l;s?l=t:l=this._injector.get(hl).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=my(l)?void 0:this._injector.get(No),u=r||l.selector,d=l.create(i,[],u,c),h=d.location.nativeElement,f=d.injector.get(Mf,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),So(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),de(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){de(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new G(101,!1);let t=z(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,z(t),this.afterTick.next(),de(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(hr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<AD;)de(14),this.synchronizeOnce(),de(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!mo(i))continue;let o=r&&!this.zonelessEnabled?0:1;Uv(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>mo(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;So(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(py,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>So(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new G(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function So(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Be(n,e,t,r){let i=W(),o=wn();if(Ot(i,o,e)){let s=be(),a=yo();nC(a,i,n,e,t,r)}return Be}var EP=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Go(){return W()[ze][we]}var $d=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e,!0))}};function yd(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function MD(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=n.at(o),u=e[o],d=yd(o,c,o,u,t);if(d!==0){d<0&&n.updateValue(o,u),o++;continue}let h=n.at(s),f=e[l],b=yd(s,h,l,f,t);if(b!==0){b<0&&n.updateValue(s,f),s--,l--;continue}let S=t(o,c),E=t(s,h),w=t(o,u);if(Object.is(w,E)){let L=t(l,f);Object.is(L,S)?(n.swap(o,s),n.updateValue(s,f),l--,s--):n.move(s,o),n.updateValue(o,u),o++;continue}if(r??=new Xa,i??=Nm(n,o,s,t),zd(n,r,o,w))n.updateValue(o,u),o++,s++;else if(i.has(w))r.set(S,n.detach(o)),s--;else{let L=n.create(o,e[o]);n.attach(o,L),o++,s++}}for(;o<=l;)Mm(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=n.at(o),d=c.value,h=yd(o,u,o,d,t);if(h!==0)h<0&&n.updateValue(o,d),o++,c=l.next();else{r??=new Xa,i??=Nm(n,o,s,t);let f=t(o,d);if(zd(n,r,o,f))n.updateValue(o,d),o++,s++,c=l.next();else if(!i.has(f))n.attach(o,n.create(o,d)),o++,s++,c=l.next();else{let b=t(o,u);r.set(b,n.detach(o)),s--}}}for(;!c.done;)Mm(n,r,t,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function zd(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Mm(n,e,t,r,i){if(zd(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Nm(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Xa=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function M(n,e,t,r,i,o,s,a){gr("NgControlFlow");let l=W(),c=be(),u=_t(c.consts,o);return Ro(l,c,n,e,t,r,i,u,256,s,a),Rf}function Rf(n,e,t,r,i,o,s,a){gr("NgControlFlow");let l=W(),c=be(),u=_t(c.consts,o);return Ro(l,c,n,e,t,r,i,u,512,s,a),Rf}function N(n,e){gr("NgControlFlow");let t=W(),r=wn(),i=t[r]!==bt?t[r]:-1,o=i!==-1?el(t,ye+i):void 0,s=0;if(Ot(t,r,n)){let a=z(null);try{if(o!==void 0&&Wv(o,s),n!==-1){let l=ye+n,c=el(t,l),u=Yd(t[B],l),d=Kv(c,u,t),h=Vo(t,u,e,{dehydratedView:d});jo(c,h,s,pi(u,d))}}finally{z(a)}}else if(o!==void 0){let a=zv(o,s);a!==void 0&&(a[we]=e)}}var Wd=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Te}};function Of(n,e){return e}var qd=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Yt(n,e,t,r,i,o,s,a,l,c,u,d,h){gr("NgControlFlow");let f=W(),b=be(),S=l!==void 0,E=W(),w=a?s.bind(E[ze][we]):s,L=new qd(S,w);E[ye+n]=L,Ro(f,b,n+1,e,t,r,i,_t(b.consts,o),256),S&&Ro(f,b,n+2,l,c,u,d,_t(b.consts,h),512)}var Kd=class extends $d{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Te}at(e){return this.getLView(e)[we].$implicit}attach(e,t){let r=t[nr];this.needsIndexUpdate||=e!==this.length,jo(this.lContainer,t,e,pi(this.templateTNode,r))}detach(e,t){return this.needsIndexUpdate||=e!==this.length-1,t&&ND(this.lContainer,e),kD(this.lContainer,e)}create(e,t){let r=Za(this.lContainer,this.templateTNode.tView.ssrId),i=Vo(this.hostLView,this.templateTNode,new Wd(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){ll(e[B],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[we].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[we].$index=e}getLView(e){return RD(this.lContainer,e)}};function Zt(n){let e=z(null),t=rn();try{let r=W(),i=r[B],o=r[t],s=t+1,a=el(r,s);if(o.liveCollection===void 0){let c=Yd(i,s);o.liveCollection=new Kd(a,r,c)}else o.liveCollection.reset();let l=o.liveCollection;if(MD(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=wn(),u=l.length===0;if(Ot(r,c,u)){let d=t+2,h=el(r,d);if(u){let f=Yd(i,d),b=Kv(h,f,r),S=Vo(r,f,void 0,{dehydratedView:b});jo(h,S,0,pi(f,b))}else i.firstUpdatePass&&IC(h),Wv(h,0)}}}finally{z(e)}}function el(n,e){return n[e]}function ND(n,e){if(n.length<=Te)return;let t=Te+e,r=n[t];r&&r[or]&&(r[or].skipLeaveAnimations=!0)}function kD(n,e){return Ao(n,e)}function RD(n,e){return zv(n,e)}function Yd(n,e){return go(n,e)}function j(n,e,t){let r=W(),i=wn();if(Ot(r,i,e)){let o=be(),s=yo();Rv(s,r,n,e,r[ue],t)}return j}function km(n,e,t,r,i){wf(e,n,t,i?"class":"style",r)}function g(n,e,t,r){let i=W(),o=i[B],s=n+ye,a=o.firstCreatePass?Sf(s,i,2,e,_f,xa(),t,r):o.data[s];if(bf(a,i,n,e,vy),oi(a)){let l=i[B];ul(l,i,a),rf(l,a,i)}return r!=null&&Lo(i,a),g}function y(){let n=be(),e=Le(),t=Ef(e);return n.firstCreatePass&&If(n,t),Xu(t)&&ed(),Ju(),t.classesWithoutHost!=null&&NE(t)&&km(n,t,W(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&kE(t)&&km(n,t,W(),t.stylesWithoutHost,!1),y}function Y(n,e,t,r){return g(n,e,t,r),y(),Y}function I(n,e,t,r){let i=W(),o=i[B],s=n+ye,a=o.firstCreatePass?UC(s,o,2,e,t,r):o.data[s];return bf(a,i,n,e,vy),r!=null&&Lo(i,a),I}function T(){let n=Le(),e=Ef(n);return Xu(e)&&ed(),Ju(),T}function xe(n,e,t,r){return I(n,e,t,r),T(),xe}var vy=(n,e,t,r,i)=>(_o(!0),gv(e[ue],r,rm()));function fe(n,e,t){let r=W(),i=r[B],o=n+ye,s=i.firstCreatePass?Sf(o,r,8,"ng-container",_f,xa(),e,t):i.data[o];if(bf(s,r,n,"ng-container",OD),oi(s)){let a=r[B];ul(a,r,s),rf(a,s,r)}return t!=null&&Lo(r,s),fe}function he(){let n=be(),e=Le(),t=Ef(e);return n.firstCreatePass&&If(n,t),he}function vr(n,e,t){return fe(n,e,t),he(),vr}var OD=(n,e,t,r,i)=>(_o(!0),Ew(e[ue],""));function H(){return W()}function at(n,e,t){let r=W(),i=wn();if(Ot(r,i,e)){let o=be(),s=yo();Ov(s,r,n,e,r[ue],t)}return at}var Bo="en-US";var PD=Bo;function yy(n){typeof n=="string"&&(PD=n.toLowerCase().replace(/_/g,"-"))}function x(n,e,t){let r=W(),i=be(),o=Le();return _y(i,r,r[ue],o,n,e,t),x}function pe(n,e,t){let r=W(),i=be(),o=Le();return(o.type&3||t)&&Xv(o,i,r,t,r[ue],n,e,Ua(o,r,e)),pe}function _y(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=Ua(r,e,o),Xv(r,n,e,s,t,i,o,l)&&(a=!1)),a){let c=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];l??=Ua(r,e,o),Im(r,e,h,f,i,l)}if(c&&c.length)for(let d of c)l??=Ua(r,e,o),Im(r,e,d,i,i,l)}}function v(n=1){return nm(n)}function FD(n,e){let t=null,r=fw(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?pv(n,o,!0):gw(r,o))return i}return t}function Pf(n){let e=W()[ze][Qe];if(!e.projection){let t=n?n.length:1,r=e.projection=Tg(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?FD(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Ho(n,e=0,t,r,i,o){let s=W(),a=be(),l=r?n+1:null;l!==null&&Ro(s,a,l,r,i,o,null,t);let c=yi(a,ye+n,16,null,t||null);c.projection===null&&(c.projection=e),rd();let d=!s[nr]||Qu();s[ze][Qe].projection[c.projection]===null&&l!==null?LD(s,a,l):d&&!sl(c)&&zw(a,s,c)}function LD(n,e,t){let r=ye+t,i=e.data[r],o=n[r],s=Za(o,i.tView.ssrId),a=Vo(n,i,void 0,{dehydratedView:s});jo(o,a,0,pi(i,s))}function wt(n,e,t){oy(n,e,t)}function Ct(n){let e=W(),t=be(),r=Ma();vo(r+1);let i=xf(t,r);if(n.dirty&&Vg(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=sy(e,r);n.reset(o,Jm),n.notifyOnChanges()}return!0}return!1}function Dt(){return Tf(W(),Ma())}function xn(n,e,t,r){hD(n,oy(e,t,r))}function $o(n=1){vo(Ma()+n)}function An(n){let e=Wg();return $u(e,ye+n)}function Pa(n,e){return n<<17|e<<2}function pr(n){return n>>17&32767}function VD(n){return(n&2)==2}function jD(n,e){return n&131071|e<<17}function Zd(n){return n|2}function gi(n){return(n&131068)>>2}function _d(n,e){return n&-131069|e<<2}function UD(n){return(n&1)===1}function Jd(n){return n|1}function GD(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=pr(s),l=gi(s);n[r]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||ti(d,u)>0)&&(c=!0)}else u=t;if(i)if(l!==0){let h=pr(n[a+1]);n[r+1]=Pa(h,a),h!==0&&(n[h+1]=_d(n[h+1],r)),n[a+1]=jD(n[a+1],r)}else n[r+1]=Pa(a,0),a!==0&&(n[a+1]=_d(n[a+1],r)),a=r;else n[r+1]=Pa(l,0),a===0?a=r:n[l+1]=_d(n[l+1],r),l=r;c&&(n[r+1]=Zd(n[r+1])),Rm(n,u,r,!0),Rm(n,u,r,!1),BD(e,u,n,r,o),s=Pa(a,l),o?e.classBindings=s:e.styleBindings=s}function BD(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ti(o,e)>=0&&(t[r+1]=Jd(t[r+1]))}function Rm(n,e,t,r){let i=n[t+1],o=e===null,s=r?pr(i):gi(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];HD(l,e)&&(a=!0,n[s+1]=r?Jd(c):Zd(c)),s=r?pr(c):gi(c)}a&&(n[t+1]=r?Zd(i):Jd(i))}function HD(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ti(n,e)>=0:!1}function ie(n,e,t){return by(n,e,t,!1),ie}function Ie(n,e){return by(n,e,null,!0),Ie}function by(n,e,t,r){let i=W(),o=be(),s=sd(2);if(o.firstUpdatePass&&zD(o,n,s,r),e!==bt&&Ot(i,s,e)){let a=o.data[rn()];ZD(o,a,i,i[ue],n,i[s+1]=JD(e,t),r,s)}}function $D(n,e){return e>=n.expandoStartIndex}function zD(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[rn()],s=$D(n,t);QD(o,r)&&e===null&&!s&&(e=!1),e=WD(i,o,e,r),GD(i,o,e,t,s,r)}}function WD(n,e,t,r){let i=Qg(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=bd(null,n,e,t,r),t=Oo(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=bd(i,n,e,t,r),o===null){let l=qD(n,e,r);l!==void 0&&Array.isArray(l)&&(l=bd(null,n,e,l[1],r),l=Oo(l,e.attrs,r),KD(n,e,r,l))}else o=YD(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function qD(n,e,t){let r=t?e.classBindings:e.styleBindings;if(gi(r)!==0)return n[pr(r)]}function KD(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[pr(i)]=r}function YD(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Oo(r,s,t)}return Oo(r,e.attrs,t)}function bd(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Oo(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Oo(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Ag(n,s,t?!0:e[++o]))}return n===void 0?null:n}function ZD(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=UD(c)?Om(l,e,t,i,gi(c),s):void 0;if(!tl(u)){tl(o)||VD(c)&&(o=Om(l,null,t,i,a,s));let d=Hu(rn(),t);qw(r,s,d,i,o)}}function Om(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=t[i+1];h===bt&&(h=d?ot:void 0);let f=d?Ca(h,r):u===r?h:void 0;if(c&&!tl(f)&&(f=Ca(l,r)),tl(f)&&(a=f,s))return a;let b=n[i+1];i=s?pr(b):gi(b)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Ca(l,r))}return a}function tl(n){return n!==void 0}function JD(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=pn(of(n)))),n}function QD(n,e){return(n.flags&(e?8:16))!==0}function m(n,e=""){let t=W(),r=be(),i=n+ye,o=r.firstCreatePass?yi(r,i,1,e,null):r.data[i],s=XD(r,t,o,e,n);t[i]=s,Ra()&&vf(r,t,s,o),ai(o,!1)}var XD=(n,e,t,r,i)=>(_o(!0),_w(e[ue],r));function Ey(n,e,t,r=""){return Ot(n,wn(),t)?e+Xn(t)+r:bt}function eS(n,e,t,r,i,o=""){let s=qg(),a=BC(n,s,t,i);return sd(2),a?e+Xn(t)+r+Xn(i)+o:bt}function Ce(n){return oe("",n),Ce}function oe(n,e,t){let r=W(),i=Ey(r,n,e,t);return i!==bt&&wy(r,rn(),i),oe}function yr(n,e,t,r,i){let o=W(),s=eS(o,n,e,t,r,i);return s!==bt&&wy(o,rn(),s),yr}function wy(n,e,t){let r=Hu(e,n);bw(n[ue],r,t)}function zo(n,e,t){dd(e)&&(e=e());let r=W(),i=wn();if(Ot(r,i,e)){let o=be(),s=yo();Rv(s,r,n,e,r[ue],t)}return zo}function gl(n,e){let t=dd(n);return t&&n.set(e),t}function Wo(n,e){let t=W(),r=be(),i=Le();return _y(r,t,t[ue],i,n,e),Wo}function Ff(n,e,t=""){return Ey(W(),n,e,t)}function tS(n,e,t){let r=be();if(r.firstCreatePass){let i=$t(n);Qd(t,r.data,r.blueprint,i,!0),Qd(e,r.data,r.blueprint,i,!1)}}function Qd(n,e,t,r,i){if(n=Ue(n),Array.isArray(n))for(let o=0;o<n.length;o++)Qd(n[o],e,t,r,i);else{let o=be(),s=W(),a=Le(),l=Yn(n)?n:Ue(n.provide),c=Lu(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Yn(n)||!n.multi){let f=new dr(c,i,ne,null),b=wd(l,e,i?u:u+h,d);b===-1?(Dd(za(a,s),o,l),Ed(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),s.push(f)):(t[b]=f,s[b]=f)}else{let f=wd(l,e,u+h,d),b=wd(l,e,u,u+h),S=f>=0&&t[f],E=b>=0&&t[b];if(i&&!E||!i&&!S){Dd(za(a,s),o,l);let w=iS(i?rS:nS,t.length,i,r,c,n);!i&&E&&(t[b].providerFactory=w),Ed(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),s.push(w)}else{let w=Cy(t[i?b:f],c,!i&&r);Ed(o,n,f>-1?f:b,w)}!i&&r&&E&&t[b].componentProviders++}}}function Ed(n,e,t,r){let i=Yn(e),o=Og(e);if(i||o){let l=(o?Ue(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function Cy(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wd(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function nS(n,e,t,r,i){return Xd(this.multi,[])}function rS(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Io(r,r[B],this.providerFactory.index,i);s=l.slice(0,a),Xd(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],Xd(o,s);return s}function Xd(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function iS(n,e,t,r,i,o){let s=new dr(n,t,ne,null);return s.multi=[],s.index=e,s.componentProviders=0,Cy(s,i,r&&!t),s}function Mn(n,e=[]){return t=>{t.providersResolver=(r,i)=>tS(r,i?i(n):n,e)}}function ml(n,e,t,r){return Dy(W(),od(),n,e,t,r)}function oS(n,e){let t=n[e];return t===bt?void 0:t}function Dy(n,e,t,r,i,o){let s=e+t;return Ot(n,s,i)?GC(n,s+1,o?r.call(o,i):r(i)):oS(n,s+1)}function Lf(n,e){let t=be(),r,i=n+ye;t.firstCreatePass?(r=sS(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=gn(r.type,!0)),s,a=Je(ne);try{let l=$a(!1),c=o();return $a(l),zu(t,W(),i,c),c}finally{Je(a)}}function sS(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Vf(n,e,t){let r=n+ye,i=W(),o=$u(i,r);return aS(i,r)?Dy(i,od(),e,o.transform,t,o):o.transform(t)}function aS(n,e){return n[B].data[e].pure}function vl(n,e){return dl(n,e)}var lS=(()=>{class n{zone=R(Se);changeDetectionScheduler=R(xt);applicationRef=R(bi);applicationErrorHandler=R(zt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sy({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Se(Z(U({},Iy()),{scheduleInRootZone:t})),[{provide:Se,useFactory:n},{provide:er,multi:!0,useFactory:()=>{let r=R(lS,{optional:!0});return()=>r.initialize()}},{provide:er,multi:!0,useFactory:()=>{let r=R(cS);return()=>{r.initialize()}}},e===!0?{provide:fd,useValue:!0}:[],{provide:Oa,useValue:t??wv},{provide:zt,useFactory:()=>{let r=R(Se),i=R(st),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(gt),o.handleError(s))})}}}]}function Iy(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var cS=(()=>{class n{subscription=new Ze;initialized=!1;zone=R(Se);pendingTasks=R(Dn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Se.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Se.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jf=(()=>{class n{applicationErrorHandler=R(zt);appRef=R(bi);taskService=R(Dn);ngZone=R(Se);zonelessEnabled=R(Eo);tracing=R(Fo,{optional:!0});disableScheduling=R(fd,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ya):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(Oa,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof To||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?mm:Cv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ya+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,mm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uf(){return gr("NgZoneless"),co([{provide:xt,useExisting:jf},{provide:Se,useClass:To},{provide:Eo,useValue:!0},{provide:Oa,useValue:!1},[]])}function uS(){return typeof $localize<"u"&&$localize.locale||Bo}var yl=new q("",{providedIn:"root",factory:()=>R(yl,{optional:!0,skipSelf:!0})||uS()});var _l=class{destroyed=!1;listeners=null;errorHandler=R(gt,{optional:!0});destroyRef=R(on);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new G(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(Jn(953,!1));return}if(this.listeners===null)return;let t=z(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{z(t)}}};function ht(n){return gg(n)}function O(n,e){return eo(n,e?.equal)}var Gf=class{[Fe];constructor(e){this[Fe]=e}destroy(){this[Fe].destroy()}};function qe(n,e){let t=e?.injector??R(jt),r=e?.manualCleanup!==!0?t.get(on):null,i,o=t.get(bo,null,{optional:!0}),s=t.get(xt);return o!==null?(i=hS(o.view,s,n),r instanceof ao&&r._lView===o.view&&(r=null)):i=pS(n,t.get(Co),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Gf(i)}var Ty=Z(U({},mg),{cleanupFns:void 0,zone:null,onDestroyFn:cr,run(){let n=li(!1);try{vg(this)}finally{li(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=z(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],z(n)}}}),dS=Z(U({},Ty),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Hn(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),fS=Z(U({},Ty),{consumerMarkedDirty(){this.view[K]|=8192,lr(this.view),this.notifier.notify(13)},destroy(){Hn(this),this.onDestroyFn(),this.cleanup(),this.view[nn]?.delete(this)}});function hS(n,e,t){let r=Object.create(fS);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=xy(r,t),n[nn]??=new Set,n[nn].add(r),r.consumerMarkedDirty(r),r}function pS(n,e,t){let r=Object.create(dS);return r.fn=xy(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function xy(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}var Ny=Symbol("InputSignalNode#UNSET"),AS=Z(U({},Hs),{transformFn:void 0,applyValueToInputSignal(n,e){Yr(n,e)}});function ky(n,e){let t=Object.create(AS);t.value=n,t.transformFn=e?.transform;function r(){if(zr(t),t.value===Ny){let i=null;throw new G(-950,i)}return t.value}return r[Fe]=t,r}var MS=new q("");MS.__NG_ELEMENT_ID__=n=>{let e=Le();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new G(204,!1)};function se(n){return new _l}function Ay(n,e){return ky(n,e)}function NS(n){return ky(Ny,n)}var ge=(Ay.required=NS,Ay);function My(n,e){return ly(e)}function kS(n,e){return cy(e)}var _r=(My.required=kS,My);var Bf=new q(""),RS=new q("");function qo(n){return!n.moduleRef}function OS(n){let e=qo(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Se);return t.run(()=>{qo(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),qo(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Bf);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Bf);s.add(o),n.moduleRef.onDestroy(()=>{So(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return FS(r,t,()=>{let o=e.get(Dn),s=o.add(),a=e.get(kf);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(yl,Bo);if(yy(l||Bo),!e.get(RS,!0))return qo(n)?e.get(bi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(qo(n)){let u=e.get(bi);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return PS?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var PS;function FS(n,e,t){try{let r=t();return _i(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var bl=null;function LS(n=[],e){return jt.create({name:e,providers:[{provide:uo,useValue:"platform"},{provide:Bf,useValue:new Set([()=>bl=null])},...n]})}function VS(n=[]){if(bl)return bl;let e=LS(n);return bl=e,gy(),jS(e),e}function jS(n){let e=n.get(il,null);ni(n,()=>{e?.forEach(t=>t())})}var Hf=(()=>{class n{static __NG_ELEMENT_ID__=US}return n})();function US(n){return GS(Le(),W(),(n&16)===16)}function GS(n,e,t){if(En(n)&&!t){let r=yt(n.index,e);return new Sn(r,r)}else if(n.type&175){let r=e[ze];return new Sn(r,e)}return null}function Ry(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;de(8);try{let o=i?.injector??VS(r),s=[Sy({}),{provide:xt,useExisting:jf},sm,...t||[]],a=new ko({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return OS({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{de(9)}}function $f(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var Oy=null;function kn(){return Oy}function zf(n){Oy??=n}var Ko=class{};var Wf=class{_viewContainerRef;_templateRef;_created=!1;constructor(e,t){this._viewContainerRef=e,this._templateRef=t}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},El=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=t===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ve({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),qf=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Wf(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(ne(mr),ne(fr),ne(El,9))};static \u0275dir=Ve({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var Kf=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||n)(ne(mr))};static \u0275dir=Ve({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[In]})}return n})();function BS(n,e){return new G(2100,!1)}var Yf=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw BS(n,t);return t.toUpperCase()}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Af({name:"uppercase",type:n,pure:!0})}return n})();var je=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=an({type:n});static \u0275inj=Ut({})}return n})();function Yo(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var br=class{};var Py="browser";var Zo=class{_doc;constructor(e){this._doc=e}manager},wl=(()=>{class n extends Zo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ee(Xe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Dl=new q(""),th=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof wl));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof wl);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ee(Dl),ee(Se))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Jf="ng-app-id";function Fy(n){for(let e of n)e.remove()}function Ly(n,e){let t=e.createElement("style");return t.textContent=n,t}function $S(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Jf}="${e}"],link[${Jf}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Jf),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Xf(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var nh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,$S(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Ly);r?.forEach(i=>this.addUsage(i,this.external,Xf))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Fy(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Fy(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Ly(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Xf(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ee(Xe),ee(rl),ee(ol,8),ee(vi))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Qf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rh=/%COMP%/g;var jy="%COMP%",zS=`_nghost-${jy}`,WS=`_ngcontent-${jy}`,qS=!0,KS=new q("",{providedIn:"root",factory:()=>qS});function YS(n){return WS.replace(rh,n)}function ZS(n){return zS.replace(rh,n)}function Uy(n,e){return e.map(t=>t.replace(rh,n))}var ih=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Jo(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Cl?i.applyToHost(t):i instanceof Qo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case sn.Emulated:o=new Cl(l,c,r,this.appId,u,s,a,d,h);break;case sn.ShadowDom:return new eh(l,c,t,r,s,a,this.nonce,d,h);default:o=new Qo(l,c,r,u,s,a,d,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ee(th),ee(nh),ee(rl),ee(KS),ee(Xe),ee(vi),ee(Se),ee(ol),ee(Fo,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Jo=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Qf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Vy(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Vy(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Qf[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Qf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(qt.DashCase|qt.Important)?e.style.setProperty(t,r,i&qt.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&qt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=kn().getGlobalEventTarget(this.doc,e),!e))throw new G(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Vy(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var eh=class extends Jo{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Uy(i.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let h of d){let f=Xf(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qo=class extends Jo{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?Uy(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&hi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Cl=class extends Qo{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,c){let u=i+"-"+r.id;super(e,t,r,o,s,a,l,c,u),this.contentAttr=YS(u),this.hostAttr=ZS(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Sl=class n extends Ko{supportsDOMEvents=!0;static makeCurrent(){zf(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=JS();return t==null?null:QS(t)}resetBaseElement(){Xo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yo(document.cookie,e)}},Xo=null;function JS(){return Xo=Xo||document.head.querySelector("base"),Xo?Xo.getAttribute("href"):null}function QS(n){return new URL(n,document.baseURI).pathname}var XS=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Gy=["alt","control","meta","shift"],eI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tI={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},By=(()=>{class n extends Zo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Gy.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=eI[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Gy.forEach(s=>{if(s!==i){let a=tI[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ee(Xe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function oh(n,e,t){let r=U({rootComponent:n,platformRef:t?.platformRef},nI(e));return Ry(r)}function nI(n){return{appProviders:[...aI,...n?.providers??[]],platformProviders:sI}}function rI(){Sl.makeCurrent()}function iI(){return new gt}function oI(){return nf(document),document}var sI=[{provide:vi,useValue:Py},{provide:il,useValue:rI,multi:!0},{provide:Xe,useFactory:oI}];var aI=[{provide:uo,useValue:"root"},{provide:gt,useFactory:iI},{provide:Dl,useClass:wl,multi:!0,deps:[Xe]},{provide:Dl,useClass:By,multi:!0,deps:[Xe]},ih,nh,th,{provide:hr,useExisting:ih},{provide:br,useClass:XS},[]];var wi=class{},ns=class{},Er=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Tl=class{encodeKey(e){return Hy(e)}encodeValue(e){return Hy(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function lI(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var cI=/%(\d[a-f0-9])/gi,uI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Hy(n){return encodeURIComponent(n).replace(cI,(e,t)=>uI[t]??e)}function Il(n){return`${n}`}var Rn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Tl,e.fromString){if(e.fromObject)throw new G(2805,!1);this.map=lI(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Il):[Il(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Il(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Il(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var xl=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function dI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function $y(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zy(n){return typeof Blob<"u"&&n instanceof Blob}function Wy(n){return typeof FormData<"u"&&n instanceof FormData}function fI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var qy="Content-Type",Ky="Accept",Yy="X-Request-URL",Zy="text/plain",Jy="application/json",hI=`${Jy}, ${Zy}, */*`,es=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(dI(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new G(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Er,this.context??=new xl,!this.params)this.params=new Rn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||$y(this.body)||zy(this.body)||Wy(this.body)||fI(this.body)?this.body:this.body instanceof Rn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Wy(this.body)?null:zy(this.body)?this.body.type||null:$y(this.body)?null:typeof this.body=="string"?Zy:this.body instanceof Rn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Jy:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,c=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.referrer||this.referrer,h=e.integrity||this.integrity,f=e.transferCache??this.transferCache,b=e.timeout??this.timeout,S=e.body!==void 0?e.body:this.body,E=e.withCredentials??this.withCredentials,w=e.reportProgress??this.reportProgress,L=e.headers||this.headers,F=e.params||this.params,k=e.context??this.context;return e.setHeaders!==void 0&&(L=Object.keys(e.setHeaders).reduce((te,Pe)=>te.set(Pe,e.setHeaders[Pe]),L)),e.setParams&&(F=Object.keys(e.setParams).reduce((te,Pe)=>te.set(Pe,e.setParams[Pe]),F)),new n(t,r,S,{params:F,headers:L,context:k,reportProgress:w,responseType:i,withCredentials:E,transferCache:f,keepalive:o,cache:a,priority:s,timeout:b,mode:l,redirect:c,credentials:u,referrer:d,integrity:h})}},Ei=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Ei||{}),Ci=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Er,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},Al=class n extends Ci{constructor(e={}){super(e)}type=Ei.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ml=class n extends Ci{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ei.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},ts=class extends Ci{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},pI=200,gI=204;function sh(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var mI=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof es)o=t;else{let l;i.headers instanceof Er?l=i.headers:l=new Er(i.headers);let c;i.params&&(i.params instanceof Rn?c=i.params:c=new Rn({fromObject:i.params})),o=new es(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=ha(o).pipe(uu(l=>this.handler.handle(l)));if(t instanceof es||i.observe==="events")return s;let a=s.pipe(cu(l=>l instanceof Ml));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(it(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new G(2806,!1);return l.body}));case"blob":return a.pipe(it(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new G(2807,!1);return l.body}));case"text":return a.pipe(it(l=>{if(l.body!==null&&typeof l.body!="string")throw new G(2808,!1);return l.body}));case"json":default:return a.pipe(it(l=>l.body))}case"response":return a;default:throw new G(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Rn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,sh(i,r))}post(t,r,i={}){return this.request("POST",t,sh(i,r))}put(t,r,i={}){return this.request("PUT",t,sh(i,r))}static \u0275fac=function(r){return new(r||n)(ee(wi))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();var vI=new q("");function yI(n,e){return e(n)}function _I(n,e,t){return(r,i)=>ni(t,()=>e(r,o=>n(o,i)))}var Qy=new q(""),bI=new q(""),Xy=new q("",{providedIn:"root",factory:()=>!0});var Nl=(()=>{class n extends wi{backend;injector;chain=null;pendingTasks=R(wo);contributeToStability=R(Xy);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Qy),...this.injector.get(bI,[])]));this.chain=r.reduceRight((i,o)=>_I(i,o,this.injector),yI)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(du(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ee(ns),ee(st))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();var EI=/^\)\]\}',?\n/,wI=RegExp(`^${Yy}:`,"m");function CI(n){return"responseURL"in n&&n.responseURL?n.responseURL:wI.test(n.getAllResponseHeaders())?n.getResponseHeader(Yy):null}var ah=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new G(-2800,!1);let r=this.xhrFactory;return ha(null).pipe(fu(()=>new _e(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((E,w)=>s.setRequestHeader(E,w.join(","))),t.headers.has(Ky)||s.setRequestHeader(Ky,hI),!t.headers.has(qy)){let E=t.detectContentTypeHeader();E!==null&&s.setRequestHeader(qy,E)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let E=t.responseType.toLowerCase();s.responseType=E!=="json"?E:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let E=s.statusText||"OK",w=new Er(s.getAllResponseHeaders()),L=CI(s)||t.url;return l=new Al({headers:w,status:s.status,statusText:E,url:L}),l},u=()=>{let{headers:E,status:w,statusText:L,url:F}=c(),k=null;w!==gI&&(k=typeof s.response>"u"?s.responseText:s.response),w===0&&(w=k?pI:0);let te=w>=200&&w<300;if(t.responseType==="json"&&typeof k=="string"){let Pe=k;k=k.replace(EI,"");try{k=k!==""?JSON.parse(k):null}catch(ae){k=Pe,te&&(te=!1,k={error:ae,text:k})}}te?(o.next(new Ml({body:k,headers:E,status:w,statusText:L,url:F||void 0})),o.complete()):o.error(new ts({error:k,headers:E,status:w,statusText:L,url:F||void 0}))},d=E=>{let{url:w}=c(),L=new ts({error:E,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});o.error(L)},h=d;t.timeout&&(h=E=>{let{url:w}=c(),L=new ts({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:w||void 0});o.error(L)});let f=!1,b=E=>{f||(o.next(c()),f=!0);let w={type:Ei.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(w.total=E.total),t.responseType==="text"&&s.responseText&&(w.partialText=s.responseText),o.next(w)},S=E=>{let w={type:Ei.UploadProgress,loaded:E.loaded};E.lengthComputable&&(w.total=E.total),o.next(w)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",h),s.addEventListener("abort",d),t.reportProgress&&(s.addEventListener("progress",b),a!==null&&s.upload&&s.upload.addEventListener("progress",S)),s.send(a),o.next({type:Ei.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",b),a!==null&&s.upload&&s.upload.removeEventListener("progress",S)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(ee(br))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),e_=new q(""),DI="XSRF-TOKEN",SI=new q("",{providedIn:"root",factory:()=>DI}),II="X-XSRF-TOKEN",TI=new q("",{providedIn:"root",factory:()=>II}),rs=class{},xI=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yo(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(ee(Xe),ee(SI))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function AI(n,e){let t=n.url.toLowerCase();if(!R(e_)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=R(rs).getToken(),i=R(TI);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function lh(...n){let e=[mI,ah,Nl,{provide:wi,useExisting:Nl},{provide:ns,useFactory:()=>R(vI,{optional:!0})??R(ah)},{provide:Qy,useValue:AI,multi:!0},{provide:e_,useValue:!0},{provide:rs,useClass:xI}];for(let t of n)e.push(...t.\u0275providers);return co(e)}var MI="https://ouqykxafhtctlaymzoxw.supabase.co",NI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91cXlreGFmaHRjdGxheW16b3h3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNjE0MjYsImV4cCI6MjA3ODYzNzQyNn0.r1r9Q7rS4JRS-UcnC30KJJl1xXIUi_T_vs9kMWGfy0M",kI="gallery-images",RI="bolivar@alencastro.com.br";function kl(n,e){return((typeof import.meta<"u"?import.meta.env:void 0)?.[n]??"").trim()||e}var On={supabaseUrl:kl("NG_APP_SUPABASE_URL",MI),supabaseAnonKey:kl("NG_APP_SUPABASE_ANON_KEY",NI),supabaseBucket:kl("NG_APP_SUPABASE_BUCKET",kI),supabaseAdminEmail:kl("NG_APP_SUPABASE_ADMIN_EMAIL",RI)};ve();var t_=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);var is=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},Rl=class extends is{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},os=class extends is{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},ss=class extends is{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},ch=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(ch||{});var as=class{constructor(e,{headers:t={},customFetch:r,region:i=ch.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=t_(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return P(this,arguments,void 0,function*(t,r={}){var i;let o,s;try{let{headers:a,method:l,body:c,signal:u,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let b=new URL(`${this.url}/${t}`);f&&f!=="any"&&(h["x-region"]=f,b.searchParams.set("forceFunctionRegion",f));let S;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",S=c):typeof c=="string"?(h["Content-Type"]="text/plain",S=c):typeof FormData<"u"&&c instanceof FormData?S=c:(h["Content-Type"]="application/json",S=JSON.stringify(c)):S=c;let E=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(E=s.signal,u.addEventListener("abort",()=>s.abort())):E=s.signal);let w=yield this.fetch(b.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:S,signal:E}).catch(te=>{throw new Rl(te)}),L=w.headers.get("x-relay-error");if(L&&L==="true")throw new os(w);if(!w.ok)throw new ss(w);let F=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return F==="application/json"?k=yield w.json():F==="application/octet-stream"||F==="application/pdf"?k=yield w.blob():F==="text/event-stream"?k=w:F==="multipart/form-data"?k=yield w.formData():k=yield w.text(),{data:k,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof ss||a instanceof os?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var Ih=mb(u_(),1),{PostgrestClient:d_,PostgrestQueryBuilder:Y3,PostgrestFilterBuilder:Z3,PostgrestTransformBuilder:J3,PostgrestBuilder:Q3,PostgrestError:$I}=Ih.default||Ih;var Th=class{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let t=process.versions;if(t&&t.node){let r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){let r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}},xh=Th;var f_="2.83.0";var h_=`realtime-js/${f_}`,Ah="1.0.0",p_="2.0.0",Mh=Ah;var cs=1e4,g_=1e3,m_=100,wr=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})(wr||{}),Re=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(Re||{}),lt=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})(lt||{}),Nh=(function(n){return n.websocket="websocket",n})(Nh||{}),Cr=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})(Cr||{});var Pl=class{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodePush(e){var t,r;let{event:i,topic:o,payload:s}=e,a=(t=e.ref)!==null&&t!==void 0?t:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=this.META_LENGTH+l.length+a.length+o.length+i.length,u=new ArrayBuffer(this.HEADER_LENGTH+c),d=new DataView(u),h=0;d.setUint8(h++,this.KINDS.push),d.setUint8(h++,l.length),d.setUint8(h++,a.length),d.setUint8(h++,o.length),d.setUint8(h++,i.length),Array.from(l,b=>d.setUint8(h++,b.charCodeAt(0))),Array.from(a,b=>d.setUint8(h++,b.charCodeAt(0))),Array.from(o,b=>d.setUint8(h++,b.charCodeAt(0))),Array.from(i,b=>d.setUint8(h++,b.charCodeAt(0)));var f=new Uint8Array(u.byteLength+s.byteLength);return f.set(new Uint8Array(u),0),f.set(new Uint8Array(s),u.byteLength),f.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r,i,o;let s=e.topic,a=(t=e.ref)!==null&&t!==void 0?t:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,u=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0),d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+s.length+c.length,h=new ArrayBuffer(this.HEADER_LENGTH+d),f=new DataView(h),b=0;f.setUint8(b++,this.KINDS.userBroadcastPush),f.setUint8(b++,l.length),f.setUint8(b++,a.length),f.setUint8(b++,s.length),f.setUint8(b++,c.length),f.setUint8(b++,this.BINARY_ENCODING),Array.from(l,E=>f.setUint8(b++,E.charCodeAt(0))),Array.from(a,E=>f.setUint8(b++,E.charCodeAt(0))),Array.from(s,E=>f.setUint8(b++,E.charCodeAt(0))),Array.from(c,E=>f.setUint8(b++,E.charCodeAt(0)));var S=new Uint8Array(h.byteLength+u.byteLength);return S.set(new Uint8Array(h),0),S.set(new Uint8Array(u),h.byteLength),S.buffer}_encodeJsonUserBroadcastPush(e){var t,r,i,o;let s=e.topic,a=(t=e.ref)!==null&&t!==void 0?t:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,u=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},h=new TextEncoder().encode(JSON.stringify(u)).buffer,f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+s.length+c.length,b=new ArrayBuffer(this.HEADER_LENGTH+f),S=new DataView(b),E=0;S.setUint8(E++,this.KINDS.userBroadcastPush),S.setUint8(E++,l.length),S.setUint8(E++,a.length),S.setUint8(E++,s.length),S.setUint8(E++,c.length),S.setUint8(E++,this.JSON_ENCODING),Array.from(l,L=>S.setUint8(E++,L.charCodeAt(0))),Array.from(a,L=>S.setUint8(E++,L.charCodeAt(0))),Array.from(s,L=>S.setUint8(E++,L.charCodeAt(0))),Array.from(c,L=>S.setUint8(E++,L.charCodeAt(0)));var w=new Uint8Array(b.byteLength+h.byteLength);return w.set(new Uint8Array(b),0),w.set(new Uint8Array(h),b.byteLength),w.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){let r=JSON.parse(e),[i,o,s,a,l]=r;return t({join_ref:i,ref:o,topic:s,event:a,payload:l})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,t,i);case this.KINDS.reply:return this._decodeReply(e,t,i);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,i)}}_decodePush(e,t,r){let i=t.getUint8(1),o=t.getUint8(2),s=t.getUint8(3),a=this.HEADER_LENGTH+this.META_LENGTH-1,l=r.decode(e.slice(a,a+i));a=a+i;let c=r.decode(e.slice(a,a+o));a=a+o;let u=r.decode(e.slice(a,a+s));a=a+s;let d=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{join_ref:l,ref:null,topic:c,event:u,payload:d}}_decodeReply(e,t,r){let i=t.getUint8(1),o=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,c=r.decode(e.slice(l,l+i));l=l+i;let u=r.decode(e.slice(l,l+o));l=l+o;let d=r.decode(e.slice(l,l+s));l=l+s;let h=r.decode(e.slice(l,l+a));l=l+a;let f=JSON.parse(r.decode(e.slice(l,e.byteLength))),b={status:h,response:f};return{join_ref:c,ref:u,topic:d,event:lt.reply,payload:b}}_decodeBroadcast(e,t,r){let i=t.getUint8(1),o=t.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(e.slice(s,s+i));s=s+i;let l=r.decode(e.slice(s,s+o));s=s+o;let c=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{join_ref:null,ref:null,topic:a,event:l,payload:c}}_decodeUserBroadcast(e,t,r){let i=t.getUint8(1),o=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4),l=this.HEADER_LENGTH+4,c=r.decode(e.slice(l,l+i));l=l+i;let u=r.decode(e.slice(l,l+o));l=l+o;let d=r.decode(e.slice(l,l+s));l=l+s;let h=e.slice(l,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,b={type:this.BROADCAST,event:u,payload:f};return s>0&&(b.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:b}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}};var Si=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var me=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(me||{}),Rh=(n,e,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,s)=>(o[s]=zI(s,n,e,i),o),{}):{}},zI=(n,e,t,r)=>{let i=e.find(a=>a.name===n),o=i?.type,s=t[n];return o&&!r.includes(o)?v_(o,s):kh(s)},v_=(n,e)=>{if(n.charAt(0)==="_"){let t=n.slice(1,n.length);return YI(e,t)}switch(n){case me.bool:return WI(e);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return qI(e);case me.json:case me.jsonb:return KI(e);case me.timestamp:return ZI(e);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return kh(e);default:return kh(e)}},kh=n=>n,WI=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},qI=n=>{if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return e}return n},KI=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},YI=(n,e)=>{if(typeof n!="string")return n;let t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,t);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>v_(e,a))}return n},ZI=n=>typeof n=="string"?n.replace(" ","T"):n,Fl=n=>{let e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};var Ii=class{constructor(e,t,r={},i=cs){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var us=class n{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let o=this.cloneDeep(e),s=this.transformState(t),a={},l={};return this.map(o,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{let d=o[c];if(d){let h=u.map(E=>E.presence_ref),f=d.map(E=>E.presence_ref),b=u.filter(E=>f.indexOf(E.presence_ref)<0),S=d.filter(E=>h.indexOf(E.presence_ref)<0);b.length>0&&(a[c]=b),S.length>0&&(l[c]=S)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){let{joins:o,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;let u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){let d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(s,(a,l)=>{let c=e[a];if(!c)return;let u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ds=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(ds||{}),ln=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(ln||{});var fs=class n{constructor(e,t={config:{}},r){var i,o;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Re.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ii(this,lt.join,this.params,this.timeout),this.rejoinTimer=new Si(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Re.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Re.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Re.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new us(this),this.broadcastEndpointURL=Fl(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Re.closed){let{config:{broadcast:s,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[ds.PRESENCE]&&this.bindings[ds.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e?.(ln.CHANNEL_ERROR,f)),this._onClose(()=>e?.(ln.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",b=>p(this,[b],function*({postgres_changes:f}){var S;if(this.socket.setAuth(),f===void 0){e?.(ln.SUBSCRIBED);return}else{let E=this.bindings.postgres_changes,w=(S=E?.length)!==null&&S!==void 0?S:0,L=[];for(let F=0;F<w;F++){let k=E[F],{filter:{event:te,schema:Pe,table:ae,filter:Ae}}=k,hn=f&&f[F];if(hn&&hn.event===te&&hn.schema===Pe&&hn.table===ae&&hn.filter===Ae)L.push(Object.assign(Object.assign({},k),{id:hn.id}));else{this.unsubscribe(),this.state=Re.errored,e?.(ln.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(ln.SUBSCRIBED);return}})).receive("error",f=>{this.state=Re.errored,e?.(ln.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(ln.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return p(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return p(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this.state===Re.joined&&e===ds.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}httpSend(i,o){return p(this,arguments,function*(e,t,r={}){var s;let a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");let l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},c=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let u=c.statusText;try{let d=yield c.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))})}send(r){return p(this,arguments,function*(e,t={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return yield(o=u.body)===null||o===void 0?void 0:o.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,c;let u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Re.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ii(this,lt.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Re.closed,this.bindings={}}_fetchWithTimeout(e,t,r){return p(this,null,function*(){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),s})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ii(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>m_){let t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,o;let s=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=lt;if(r&&[a,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var b,S,E;return((b=f.filter)===null||b===void 0?void 0:b.event)==="*"||((E=(S=f.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var b,S,E,w,L,F;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let k=f.id,te=(b=f.filter)===null||b===void 0?void 0:b.event;return k&&((S=t.ids)===null||S===void 0?void 0:S.includes(k))&&(te==="*"||te?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let k=(L=(w=f?.filter)===null||w===void 0?void 0:w.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return k==="*"||k===((F=t?.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let b=h.data,{schema:S,table:E,commit_timestamp:w,type:L,errors:F}=b;h=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:w,eventType:L,new:{},old:{},errors:F}),this._getPayloadRecords(b))}f.callback(h,r)})}_isClosed(){return this.state===Re.closed}_isJoined(){return this.state===Re.joined}_isJoining(){return this.state===Re.joining}_isLeaving(){return this.state===Re.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(lt.close,{},e)}_onError(e){this._on(lt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Re.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Rh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Rh(e.columns,e.old_record)),t}};var Oh=()=>{},Ll={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QI=[1e3,2e3,5e3,1e4],XI=1e4,eT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,hs=class{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cs,this.transport=null,this.heartbeatIntervalMs=Ll.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oh,this.ref=0,this.reconnectTimer=null,this.vsn=Mh,this.logger=Oh,this.conn=null,this.sendBuffer=[],this.serializer=new Pl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Nh.websocket}`,this.httpEndpoint=Fl(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xh.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");let t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){return p(this,null,function*(){let t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return p(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wr.connecting:return Cr.Connecting;case wr.open:return Cr.Open;case wr.closing:return Cr.Closing;default:return Cr.Closed}}isConnected(){return this.connectionState()===Cr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new fs(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){let{topic:t,event:r,payload:i,ref:o}=e,s=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(e=null){return p(this,null,function*(){this._authPromise=this._performAuth(e);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return p(this,null,function*(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(g_,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Ll.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:i,payload:o,ref:s}=t,a=s?`(${s})`:"",l=o.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),o),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,o,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===wr.open||this.conn.readyState===wr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(lt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([eT],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}_performAuth(e=null){return p(this,null,function*(){let t;e?t=e:this.accessToken?t=yield this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{let i={access_token:t,version:h_};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(lt.access_token,{access_token:t})}))})}_waitForAuthIfNeeded(){return p(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Si(()=>p(this,null,function*(){setTimeout(()=>p(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Ll.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,o,s,a,l,c,u,d,h,f;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:cs,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Ll.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:Oh,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:Mh,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:b=>QI[b-1]||XI,this.vsn){case Ah:this.encode=(u=e?.encode)!==null&&u!==void 0?u:(b,S)=>S(JSON.stringify(b)),this.decode=(d=e?.decode)!==null&&d!==void 0?d:(b,S)=>S(JSON.parse(b));break;case p_:this.encode=(h=e?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};ve();var Ti=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ce(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Vl=class extends Ti{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dr=class extends Ti{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};ve();var xi=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),y_=()=>Response,jl=n=>{if(Array.isArray(n))return n.map(t=>jl(t));if(typeof n=="function"||n!==Object(n))return n;let e={};return Object.entries(n).forEach(([t,r])=>{let i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=jl(r)}),e},__=n=>{if(typeof n!="object"||n===null)return!1;let e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ph=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},tT=(n,e,t)=>P(void 0,void 0,void 0,function*(){let r=yield y_();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{let o=n.status||500,s=i?.statusCode||o+"";e(new Vl(Ph(i),o,s))}).catch(i=>{e(new Dr(Ph(i),i))}):e(new Dr(Ph(n),n))}),nT=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(__(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function ps(n,e,t,r,i,o){return P(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(t,nT(e,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>tT(l,a,r))})})}function Pn(n,e,t,r){return P(this,void 0,void 0,function*(){return ps(n,"GET",e,t,r)})}function ct(n,e,t,r,i){return P(this,void 0,void 0,function*(){return ps(n,"POST",e,r,i,t)})}function gs(n,e,t,r,i){return P(this,void 0,void 0,function*(){return ps(n,"PUT",e,r,i,t)})}function b_(n,e,t,r){return P(this,void 0,void 0,function*(){return ps(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Ai(n,e,t,r,i){return P(this,void 0,void 0,function*(){return ps(n,"DELETE",e,r,i,t)})}ve();ve();var Ul=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return P(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}};var E_,Fh=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[E_]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ul(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return P(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}};E_=Symbol.toStringTag;var w_=Fh;var rT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},C_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Gl=class{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=xi(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return P(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},C_),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),l&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield(e=="PUT"?gs:ct)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ce(o))return{data:null,error:o};throw o}})}upload(e,t,r){return P(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return P(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(e),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let l,c=Object.assign({upsert:C_.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);let d=yield gs(this.fetch,a.toString(),l,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ce(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return P(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");let o=yield ct(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new Ti("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}update(e,t,r){return P(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return P(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}copy(e,t,r){return P(this,void 0,void 0,function*(){try{return{data:{path:(yield ct(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return P(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield ct(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return P(this,void 0,void 0,function*(){try{let i=yield ct(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}download(e,t){let i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),s=o?`?${o}`:"",a=this._getFinalPath(e),l=()=>Pn(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new w_(l,this.shouldThrowOnError)}info(e){return P(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield Pn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:jl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}exists(e){return P(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield b_(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r)&&r instanceof Dr){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);let a=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return P(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}list(e,t,r){return P(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},rT),t),{prefix:e||""});return{data:yield ct(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}listV2(e,t){return P(this,void 0,void 0,function*(){try{let r=Object.assign({},e);return{data:yield ct(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};ve();var Bl="2.83.0";var Hl={"X-Client-Info":`storage-js/${Bl}`};var $l=class{constructor(e,t={},r,i){this.shouldThrowOnError=!1;let o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hl),t),this.fetch=xi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return P(this,void 0,void 0,function*(){try{let t=this.listBucketOptionsToQueryString(e);return{data:yield Pn(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}getBucket(e){return P(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}createBucket(e){return P(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield ct(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return P(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}emptyBucket(e){return P(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}deleteBucket(e){return P(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}};ve();var zl=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hl),t),this.fetch=xi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return P(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}listBuckets(e){return P(this,void 0,void 0,function*(){try{let t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);let r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Pn(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}deleteBucket(e){return P(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}};ve();ve();var Mi={"X-Client-Info":`storage-js/${Bl}`,"Content-Type":"application/json"};var Wl=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ke(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Ni=class extends Wl{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ql=class extends Wl{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};ve();var ki=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);var D_=n=>{if(typeof n!="object"||n===null)return!1;let e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var S_=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),iT=(n,e,t)=>P(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){let i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(s=>{let a=s?.statusCode||s?.code||i+"";e(new Ni(S_(s),i,a))}).catch(()=>{let s=i+"",a=o.statusText||`HTTP ${i} error`;e(new Ni(a,i,s))});else{let s=i+"",a=o.statusText||`HTTP ${i} error`;e(new Ni(a,i,s))}}else e(new ql(S_(n),n))}),oT=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(D_(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t))};function sT(n,e,t,r,i,o){return P(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(t,oT(e,r,i,o)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;let c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>s(l)).catch(l=>iT(l,a,r))})})}function Ye(n,e,t,r,i){return P(this,void 0,void 0,function*(){return sT(n,"POST",e,r,i,t)})}var Kl=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mi),t),this.fetch=ki(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return P(this,void 0,void 0,function*(){try{return{data:(yield Ye(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}getIndex(e,t){return P(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}listIndexes(e){return P(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return P(this,void 0,void 0,function*(){try{return{data:(yield Ye(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}};ve();var Yl=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mi),t),this.fetch=ki(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return P(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ye(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}getVectors(e){return P(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}listVectors(e){return P(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ye(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}queryVectors(e){return P(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}deleteVectors(e){return P(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ye(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}};ve();var Zl=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mi),t),this.fetch=ki(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return P(this,void 0,void 0,function*(){try{return{data:(yield Ye(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}getBucket(e){return P(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}listBuckets(){return P(this,arguments,void 0,function*(e={}){try{return{data:yield Ye(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}deleteBucket(e){return P(this,void 0,void 0,function*(){try{return{data:(yield Ye(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}})}};var ms=class extends Zl{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Jl(this.url,this.headers,e,this.fetch)}},Jl=class extends Kl{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){let t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return P(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return P(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){let t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return P(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){let t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return P(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Ql(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Ql=class extends Yl{constructor(e,t,r,i,o){super(e,t,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){let t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return P(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){let t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return P(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return P(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){let t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return P(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){let t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return P(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var vs=class extends $l{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Gl(this.url,this.headers,e,this.fetch)}get vectors(){return new ms(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zl(this.url+"/iceberg",this.headers,this.fetch)}};var I_="2.83.0";var ys="";typeof Deno<"u"?ys="deno":typeof document<"u"?ys="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ys="react-native":ys="node";var aT={"X-Client-Info":`supabase-js-${ys}/${I_}`},T_={headers:aT},x_={schema:"public"},A_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M_={};var lT=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),cT=()=>Headers,N_=(n,e,t)=>{let r=lT(t),i=cT();return(o,s)=>p(null,null,function*(){var a;let l=(a=yield e())!==null&&a!==void 0?a:n,c=new i(s?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:c}))})};function uT(n){return n.endsWith("/")?n:n+"/"}function k_(n,e){var t,r;let{db:i,auth:o,realtime:s,global:a}=n,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d?.headers)!==null&&t!==void 0?t:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>p(null,null,function*(){return""})};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}function R_(n){let e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uT(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}ve();ve();var Xl="2.83.0";var Sr=30*1e3,ec=3,tc=ec*Sr,O_="http://localhost:9999",P_="supabase.auth.token";var F_={"X-Client-Info":`gotrue-js/${Xl}`};var _s="X-Supabase-Api-Version",Lh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},L_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V_=600*1e3;var Fn=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function V(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var nc=class extends Fn{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function j_(n){return V(n)&&n.name==="AuthApiError"}var St=class extends Fn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},Jt=class extends Fn{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}},He=class extends Jt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function U_(n){return V(n)&&n.name==="AuthSessionMissingError"}var cn=class extends Jt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Ir=class extends Jt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Tr=class extends Jt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function G_(n){return V(n)&&n.name==="AuthImplicitGrantRedirectError"}var bs=class extends Jt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ri=class extends Jt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function rc(n){return V(n)&&n.name==="AuthRetryableFetchError"}var Es=class extends Jt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var xr=class extends Jt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),B_=` 	
\r=`.split(""),dT=(()=>{let n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<B_.length;e+=1)n[B_[e].charCodeAt(0)]=-2;for(let e=0;e<ic.length;e+=1)n[ic[e].charCodeAt(0)]=e;return n})();function H_(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(ic[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;t(ic[r]),e.queuedBits-=6}}function $_(n,e,t){let r=dT[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Vh(n){let e=[],t=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{pT(s,r,t)};for(let s=0;s<n.length;s+=1)$_(n.charCodeAt(s),i,o);return e.join("")}function fT(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function hT(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}fT(r,e)}}function pT(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ln(n){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)$_(n.charCodeAt(i),t,r);return new Uint8Array(e)}function z_(n){let e=[];return hT(n,t=>e.push(t)),new Uint8Array(e)}function un(n){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>H_(i,t,r)),H_(null,t,r),e.join("")}function W_(n){return Math.round(Date.now()/1e3)+n}function q_(){return Symbol("auth-callback")}var Oe=()=>typeof window<"u"&&typeof document<"u",Ar={tested:!1,writable:!1},oc=()=>{if(!Oe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ar.tested)return Ar.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ar.tested=!0,Ar.writable=!0}catch{Ar.tested=!0,Ar.writable=!1}return Ar.writable};function K_(n){let e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}var sc=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Y_=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Mr=(n,e,t)=>p(null,null,function*(){yield n.setItem(e,JSON.stringify(t))}),Vn=(n,e)=>p(null,null,function*(){let t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),dn=(n,e)=>p(null,null,function*(){yield n.removeItem(e)}),ws=class n{constructor(){this.promise=new n.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};ws.promiseConstructor=Promise;function ac(n){let e=n.split(".");if(e.length!==3)throw new xr("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!L_.test(e[r]))throw new xr("JWT not in base64url format");return{header:JSON.parse(Vh(e[0])),payload:JSON.parse(Vh(e[1])),signature:Ln(e[2]),raw:{header:e[0],payload:e[1]}}}function Z_(n){return p(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})}function J_(n,e){return new Promise((r,i)=>{p(null,null,function*(){for(let o=0;o<1/0;o++)try{let s=yield n(o);if(!e(o,null,s)){r(s);return}}catch(s){if(!e(o,s)){i(s);return}}})})}function gT(n){return("0"+n.toString(16)).substr(-2)}function mT(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,gT).join("")}function vT(n){return p(this,null,function*(){let t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")})}function yT(n){return p(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let t=yield vT(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Nr(n,e,t=!1){return p(this,null,function*(){let r=mT(),i=r;t&&(i+="/PASSWORD_RECOVERY"),yield Mr(n,`${e}-code-verifier`,i);let o=yield yT(r);return[o,r===o?"plain":"s256"]})}var _T=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Q_(n){let e=n.headers.get(_s);if(!e||!e.match(_T))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function X_(n){if(!n)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function e0(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var bT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kr(n){if(!bT.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lc(){let n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){let r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function t0(n,e){return new Proxy(n,{get:(t,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,i)}})}function jh(n){return JSON.parse(JSON.stringify(n))}var Rr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ET=[502,503,504];function n0(n){return p(this,null,function*(){var e;if(!Y_(n))throw new Ri(Rr(n),0);if(ET.includes(n.status))throw new Ri(Rr(n),n.status);let t;try{t=yield n.json()}catch(o){throw new St(Rr(o),o)}let r,i=Q_(n);if(i&&i.getTime()>=Lh["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Es(Rr(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new He}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new Es(Rr(t),n.status,t.weak_password.reasons);throw new nc(Rr(t),n.status||500,r)})}var wT=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function $(n,e,t,r){return p(this,null,function*(){var i;let o=Object.assign({},r?.headers);o[_s]||(o[_s]=Lh["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=yield CT(n,e,t+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}})}function CT(n,e,t,r,i,o){return p(this,null,function*(){let s=wT(e,r,i,o),a;try{a=yield n(t,Object.assign({},s))}catch(l){throw console.error(l),new Ri(Rr(l),0)}if(a.ok||(yield n0(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield n0(l)}})}function It(n){var e;let t=null;DT(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=W_(n.expires_in)));let r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Uh(n){let e=It(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Qt(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function r0(n){return{data:n,error:null}}function i0(n){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o}=n,s=en(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function Gh(n){return n}function DT(n){return n.access_token&&n.refresh_token&&n.expires_in}var cc=["global","local","others"];var Oi=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=sc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(r){return p(this,arguments,function*(e,t=cc[0]){if(cc.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cc.join(", ")}`);try{return yield $(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(V(i))return{data:null,error:i};throw i}})}inviteUserByEmail(r){return p(this,arguments,function*(e,t={}){try{return yield $(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Qt})}catch(i){if(V(i))return{data:{user:null},error:i};throw i}})}generateLink(e){return p(this,null,function*(){try{let{options:t}=e,r=en(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:i0,redirectTo:t?.redirectTo})}catch(t){if(V(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return p(this,null,function*(){try{return yield $(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qt})}catch(t){if(V(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return p(this,null,function*(){var t,r,i,o,s,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=yield $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Gh});if(u.error)throw u.error;let d=yield u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(b=>{let S=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);c[`${E}Page`]=S}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(V(c))return{data:{users:[]},error:c};throw c}})}getUserById(e){return p(this,null,function*(){kr(e);try{return yield $(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qt})}catch(t){if(V(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return p(this,null,function*(){kr(e);try{return yield $(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Qt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return p(this,null,function*(){kr(e);try{return yield $(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Qt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return p(this,null,function*(){kr(e.userId);try{let{data:t,error:r}=yield $(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(V(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return p(this,null,function*(){kr(e.userId),kr(e.id);try{return{data:yield $(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(V(t))return{data:null,error:t};throw t}})}_listOAuthClients(e){return p(this,null,function*(){var t,r,i,o,s,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=yield $(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Gh});if(u.error)throw u.error;let d=yield u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(b=>{let S=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(b.split(";")[1].split("=")[1]);c[`${E}Page`]=S}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(V(c))return{data:{clients:[]},error:c};throw c}})}_createOAuthClient(e){return p(this,null,function*(){try{return yield $(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(V(t))return{data:null,error:t};throw t}})}_getOAuthClient(e){return p(this,null,function*(){try{return yield $(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(V(t))return{data:null,error:t};throw t}})}_updateOAuthClient(e,t){return p(this,null,function*(){try{return yield $(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}_deleteOAuthClient(e){return p(this,null,function*(){try{return yield $(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(V(t))return{data:null,error:t};throw t}})}_regenerateOAuthClientSecret(e){return p(this,null,function*(){try{return yield $(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(V(t))return{data:null,error:t};throw t}})}};function Bh(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}var Or={debug:!!(globalThis&&oc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Cs=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},uc=class extends Cs{};function Hh(n,e,t){return p(this,null,function*(){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Or.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>p(null,null,function*(){if(i){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield t()}finally{Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new uc(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Or.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}function o0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function $h(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function s0(n){return parseInt(n,16)}function a0(n){let e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function l0(n){var e;let{chainId:t,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:h}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let f=$h(n.address),b=u?`${u}://${r}`:r,S=n.statement?`${n.statement}
`:"",E=`${b} wants you to sign in with your Ethereum account:
${f}

${S}`,w=`URI: ${d}
Version: ${h}
Chain ID: ${t}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let L=`
Resources:`;for(let F of c){if(!F||typeof F!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${F}`);L+=`
- ${F}`}w+=L}return`${E}
${w}`}ve();var Ee=class extends Error{constructor({message:e,code:t,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}},Pr=class extends Ee{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}};function c0({error:n,options:e}){var t,r,i;let{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ee({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ee({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ee({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ee({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ee({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ee({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ee({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ee({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let s=window.location.hostname;if(zh(s)){if(o.rp.id!==s)return new Ee({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ee({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function u0({error:n,options:e}){let{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ee({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ee({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let r=window.location.hostname;if(zh(r)){if(t.rpId!==r)return new Ee({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var Wh=class{createNewAbortSignal(){if(this.controller){let t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},ST=new Wh;function f0(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:e,user:t,excludeCredentials:r}=n,i=en(n,["challenge","user","excludeCredentials"]),o=Ln(e).buffer,s=Object.assign(Object.assign({},t),{id:Ln(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){let c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ln(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function h0(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:e,allowCredentials:t}=n,r=en(n,["challenge","allowCredentials"]),i=Ln(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let s=0;s<t.length;s++){let a=t[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Ln(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function p0(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let t=n;return{id:n.id,rawId:n.id,response:{attestationObject:un(new Uint8Array(n.response.attestationObject)),clientDataJSON:un(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function g0(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:un(new Uint8Array(i.authenticatorData)),clientDataJSON:un(new Uint8Array(i.clientDataJSON)),signature:un(new Uint8Array(i.signature)),userHandle:i.userHandle?un(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zh(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function d0(){var n,e;return!!(Oe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}function IT(n){return p(this,null,function*(){try{let e=yield navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Pr("Browser returned unexpected credential type",e)}:{data:null,error:new Pr("Empty credential response",e)}}catch(e){return{data:null,error:c0({error:e,options:n})}}})}function TT(n){return p(this,null,function*(){try{let e=yield navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Pr("Browser returned unexpected credential type",e)}:{data:null,error:new Pr("Empty credential response",e)}}catch(e){return{data:null,error:u0({error:e,options:n})}}})}var xT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},AT={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function dc(...n){let e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of n)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(t(s))r[o]=s;else if(e(s)){let a=r[o];e(a)?r[o]=dc(a,s):r[o]=dc(s)}else r[o]=s}return r}function MT(n,e){return dc(xT,n,e||{})}function NT(n,e){return dc(AT,n,e||{})}var fc=class{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){return p(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})}_challenge(s,a){return p(this,arguments,function*({factorId:e,webauthn:t,friendlyName:r,signal:i},o){try{let{data:l,error:c}=yield this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:c};let u=i??ST.createNewAbortSignal();if(l.webauthn.type==="create"){let{user:d}=l.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{let d=MT(l.webauthn.credential_options.publicKey,o?.create),{data:h,error:f}=yield IT({publicKey:d,signal:u});return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{let d=NT(l.webauthn.credential_options.publicKey,o?.request),{data:h,error:f}=yield TT(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(l){return V(l)?{data:null,error:l}:{data:null,error:new St("Unexpected error in challenge",l)}}})}_verify(i){return p(this,arguments,function*({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})})}_authenticate(s,a){return p(this,arguments,function*({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!t)return{data:null,error:new Fn("rpId is required for WebAuthn authentication")};try{if(!d0())return{data:null,error:new St("Browser does not support WebAuthn",null)};let{data:l,error:c}=yield this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:c};let{webauthn:u}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:u.type,rpId:t,rpOrigins:r,credential_response:u.credential_response}})}catch(l){return V(l)?{data:null,error:l}:{data:null,error:new St("Unexpected error in authenticate",l)}}})}_register(s,a){return p(this,arguments,function*({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!t)return{data:null,error:new Fn("rpId is required for WebAuthn registration")};try{if(!d0())return{data:null,error:new St("Browser does not support WebAuthn",null)};let{data:l,error:c}=yield this._enroll({friendlyName:e});if(!l)return yield this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:c};let{data:u,error:d}=yield this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:o});return u?this._verify({factorId:l.id,challengeId:u.challengeId,webauthn:{rpId:t,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(l){return V(l)?{data:null,error:l}:{data:null,error:new St("Unexpected error in register",l)}}})}};o0();var kT={url:O_,storageKey:P_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:F_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function m0(n,e,t){return p(this,null,function*(){return yield t()})}var Pi={},RT=(()=>{class n{get jwks(){var t,r;return(r=(t=Pi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Pi[this.storageKey]=Object.assign(Object.assign({},Pi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Pi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pi[this.storageKey]=Object.assign(Object.assign({},Pi[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},kT),t);if(this.storageKey=s.storageKey,this.instanceID=(r=n.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,n.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Oe()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Oi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=sc(s.fetch),this.lock=s.lock||m0,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Oe()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Hh:this.lock=m0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fc(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:oc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bh(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Bh(this.memoryStorage)),Oe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",a=>p(this,null,function*(){this._debug("received broadcast notification from other tab or client",a),yield this._notifyAllSubscribers(a.data.event,a.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Xl}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){return p(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=p(this,null,function*(){return yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return p(this,null,function*(){var t;try{let r={},i="none";if(Oe()&&(r=K_(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce")),Oe()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=yield this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),G_(s)){let c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return yield this._removeSession(),{error:s}}let{session:a,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>p(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return V(r)?this._returnResult({error:r}):this._returnResult({error:new St("Unexpected error during initialization",r)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return p(this,null,function*(){var r,i,o;try{let s=yield $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:It}),{data:a,error:l}=s;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signUp(t){return p(this,null,function*(){var r,i,o;try{let s;if("email"in t){let{email:d,password:h,options:f}=t,b=null,S=null;this.flowType==="pkce"&&([b,S]=yield Nr(this.storage,this.storageKey)),s=yield $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:b,code_challenge_method:S},xform:It})}else if("phone"in t){let{phone:d,password:h,options:f}=t;s=yield $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:It})}else throw new Ir("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signInWithPassword(t){return p(this,null,function*(){try{let r;if("email"in t){let{email:s,password:a,options:l}=t;r=yield $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Uh})}else if("phone"in t){let{phone:s,password:a,options:l}=t;r=yield $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Uh})}else throw new Ir("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new cn;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(V(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOAuth(t){return p(this,null,function*(){var r,i,o,s;return yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(t){return p(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>p(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return p(this,null,function*(){let{chain:r}=t;switch(r){case"ethereum":return yield this.signInWithEthereum(t);case"solana":return yield this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(t){return p(this,null,function*(){var r,i,o,s,a,l,c,u,d,h,f;let b,S;if("message"in t)b=t.message,S=t.signature;else{let{chain:E,wallet:w,statement:L,options:F}=t,k;if(Oe())if(typeof w=="object")k=w;else{let Xt=window;if("ethereum"in Xt&&typeof Xt.ethereum=="object"&&"request"in Xt.ethereum&&typeof Xt.ethereum.request=="function")k=Xt.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=w}let te=new URL((r=F?.url)!==null&&r!==void 0?r:window.location.href),Pe=yield k.request({method:"eth_requestAccounts"}).then(Xt=>Xt).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Pe||Pe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let ae=$h(Pe[0]),Ae=(i=F?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!Ae){let Xt=yield k.request({method:"eth_chainId"});Ae=s0(Xt)}let hn={domain:te.host,address:ae,statement:L,uri:te.href,version:"1",chainId:Ae,nonce:(o=F?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=F?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=F?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=F?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=F?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=F?.signInWithEthereum)===null||d===void 0?void 0:d.resources};b=l0(hn),S=yield k.request({method:"personal_sign",params:[a0(b),ae]})}try{let{data:E,error:w}=yield $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:It});if(w)throw w;if(!E||!E.session||!E.user){let L=new cn;return this._returnResult({data:{user:null,session:null},error:L})}return E.session&&(yield this._saveSession(E.session),yield this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:w})}catch(E){if(V(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}})}signInWithSolana(t){return p(this,null,function*(){var r,i,o,s,a,l,c,u,d,h,f,b;let S,E;if("message"in t)S=t.message,E=t.signature;else{let{chain:w,wallet:L,statement:F,options:k}=t,te;if(Oe())if(typeof L=="object")te=L;else{let ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))te=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=L}let Pe=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in te&&te.signIn){let ae=yield te.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:Pe.host,uri:Pe.href}),F?{statement:F}:null)),Ae;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")Ae=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)Ae=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Ae&&"signature"in Ae&&(typeof Ae.signedMessage=="string"||Ae.signedMessage instanceof Uint8Array)&&Ae.signature instanceof Uint8Array)S=typeof Ae.signedMessage=="string"?Ae.signedMessage:new TextDecoder().decode(Ae.signedMessage),E=Ae.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in te)||typeof te.signMessage!="function"||!("publicKey"in te)||typeof te!="object"||!te.publicKey||!("toBase58"in te.publicKey)||typeof te.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${Pe.host} wants you to sign in with your Solana account:`,te.publicKey.toBase58(),...F?["",F,""]:[""],"Version: 1",`URI: ${Pe.href}`,`Issued At: ${(o=(i=k?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=k?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((a=k?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((l=k?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((c=k?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((u=k?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((h=(d=k?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...k.signInWithSolana.resources.map(Ae=>`- ${Ae}`)]:[]].join(`
`);let ae=yield te.signMessage(new TextEncoder().encode(S),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=ae}}try{let{data:w,error:L}=yield $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:un(E)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:It});if(L)throw L;if(!w||!w.session||!w.user){let F=new cn;return this._returnResult({data:{user:null,session:null},error:F})}return w.session&&(yield this._saveSession(w.session),yield this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:L})}catch(w){if(V(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}})}_exchangeCodeForSession(t){return p(this,null,function*(){let r=yield Vn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{let{data:s,error:a}=yield $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:It});if(yield dn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let l=new cn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(V(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}})}signInWithIdToken(t){return p(this,null,function*(){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=t,l=yield $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:It}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){let d=new cn;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(V(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOtp(t){return p(this,null,function*(){var r,i,o,s,a;try{if("email"in t){let{email:l,options:c}=t,u=null,d=null;this.flowType==="pkce"&&([u,d]=yield Nr(this.storage,this.storageKey));let{error:h}=yield $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){let{phone:l,options:c}=t,{data:u,error:d}=yield $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c?.data)!==null&&o!==void 0?o:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Ir("You must provide either an email or phone number.")}catch(l){if(V(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}verifyOtp(t){return p(this,null,function*(){var r,i;try{let o,s;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(i=t.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=yield $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:It});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(V(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signInWithSSO(t){return p(this,null,function*(){var r,i,o,s,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=yield Nr(this.storage,this.storageKey));let u=yield $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:r0});return!((s=u.data)===null||s===void 0)&&s.url&&Oe()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(V(l))return this._returnResult({data:null,error:l});throw l}})}reauthenticate(){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return p(this,null,function*(){try{return yield this._useSession(t=>p(this,null,function*(){let{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new He;let{error:o}=yield $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})}))}catch(t){if(V(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}resend(t){return p(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in t){let{email:i,type:o,options:s}=t,{error:a}=yield $(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){let{phone:i,type:o,options:s}=t,{data:a,error:l}=yield $(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:l})}throw new Ir("You must provide either an email or phone number and a type")}catch(r){if(V(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}getSession(){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return this._useSession(r=>p(this,null,function*(){return r}))}))})}_acquireLock(t,r){return p(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=p(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(p(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,t,()=>p(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(p(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return p(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return p(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,r=yield Vn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let i=t.expires_at?t.expires_at*1e3-Date.now()<tc:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){let a=yield Vn(this.userStorage,this.storageKey+"-user");a?.user?t.user=a.user:t.user=lc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};t.user=t0(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:o,error:s}=yield this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(t){return p(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return p(this,null,function*(){try{return t?yield $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qt}):yield this._useSession(r=>p(this,null,function*(){var i,o,s;let{data:a,error:l}=r;if(l)throw l;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new He}:yield $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Qt})}))}catch(r){if(V(r))return U_(r)&&(yield this._removeSession(),yield dn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}})}updateUser(i){return p(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(i){return p(this,arguments,function*(t,r={}){try{return yield this._useSession(o=>p(this,null,function*(){let{data:s,error:a}=o;if(a)throw a;if(!s.session)throw new He;let l=s.session,c=null,u=null;this.flowType==="pkce"&&t.email!=null&&([c,u]=yield Nr(this.storage,this.storageKey));let{data:d,error:h}=yield $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:Qt});if(h)throw h;return l.user=d.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})}))}catch(o){if(V(o))return this._returnResult({data:{user:null},error:o});throw o}})}setSession(t){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return p(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new He;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=ac(t.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:l,error:c}=yield this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:c}=yield this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(V(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}})}refreshSession(t){return p(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i;if(!t){let{data:a,error:l}=r;if(l)throw l;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new He;let{data:o,error:s}=yield this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(r){if(V(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}_getSessionFromURL(t,r){return p(this,null,function*(){try{if(!Oe())throw new Tr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Tr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new bs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new bs("No code detected.");let{data:F,error:k}=yield this._exchangeCodeForSession(t.code);if(k)throw k;let te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:F.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!a||!u)throw new Tr("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(l),f=d+h;c&&(f=parseInt(c));let b=f-d;b*1e3<=Sr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${h}s`);let S=f-h;d-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,f,d):d-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,f,d);let{data:E,error:w}=yield this._getUser(s);if(w)throw w;let L={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:t.type},error:null})}catch(i){if(V(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}})}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}_isPKCECallback(t){return p(this,null,function*(){let r=yield Vn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return p(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return p(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>p(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=yield this.admin.signOut(a,t);if(l&&!(j_(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(yield this._removeSession(),yield dn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(t){let r=q_(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),p(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(t){return p(this,null,function*(){return yield this._useSession(r=>p(this,null,function*(){var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){yield(o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}}))})}resetPasswordForEmail(i){return p(this,arguments,function*(t,r={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=yield Nr(this.storage,this.storageKey,!0));try{return yield $(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(V(a))return this._returnResult({data:null,error:a});throw a}})}getUserIdentities(){return p(this,null,function*(){var t;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}})}linkIdentity(t){return p(this,null,function*(){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)})}linkIdentityOAuth(t){return p(this,null,function*(){var r;try{let{data:i,error:o}=yield this._useSession(s=>p(this,null,function*(){var a,l,c,u,d;let{data:h,error:f}=s;if(f)throw f;let b=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield $(this.fetch,"GET",b,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(o)throw o;return Oe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(V(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}})}linkIdentityIdToken(t){return p(this,null,function*(){return yield this._useSession(r=>p(this,null,function*(){var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:l,token:c,access_token:u,nonce:d}=t,h=yield $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:It}),{data:f,error:b}=h;return b?this._returnResult({data:{user:null,session:null},error:b}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new cn}):(f.session&&(yield this._saveSession(f.session),yield this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:b}))}catch(o){if(V(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}))})}unlinkIdentity(t){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)throw a;return yield $(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})}))}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}})}_refreshAccessToken(t){return p(this,null,function*(){let r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield J_(o=>p(this,null,function*(){return o>0&&(yield Z_(200*Math.pow(2,o-1))),this._debug(r,"refreshing attempt",o),yield $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:It})}),(o,s)=>{let a=200*Math.pow(2,o);return s&&rc(s)&&Date.now()+a-i<Sr})}catch(i){if(this._debug(r,"error",i),V(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return p(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),Oe()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}})}_recoverAndRefresh(){return p(this,null,function*(){var t,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=yield Vn(this.storage,this.storageKey);if(o&&this.userStorage){let a=yield Vn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},yield Mr(this.userStorage,this.storageKey+"-user",a)),o.user=(t=a?.user)!==null&&t!==void 0?t:lc()}else if(o&&!o.user&&!o.user){let a=yield Vn(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,yield dn(this.storage,this.storageKey+"-user"),yield Mr(this.storage,this.storageKey,o)):o.user=lc()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&(yield this._removeSession());return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<tc;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${tc}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=yield this._callRefreshToken(o.refresh_token);a&&(console.error(a),rc(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:l}=yield this._getUser(o.access_token);!l&&a?.user?(o.user=a.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}})}_callRefreshToken(t){return p(this,null,function*(){var r,i;if(!t)throw new He;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new ws;let{data:s,error:a}=yield this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new He;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),V(s)){let a={data:null,error:s};return rc(s)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(t,r,i=!0){return p(this,null,function*(){let o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>p(this,null,function*(){try{yield l.callback(t,r)}catch(c){s.push(c)}}));if(yield Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}})}_saveSession(t){return p(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;let r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&(yield Mr(this.userStorage,this.storageKey+"-user",{user:r.user}));let o=Object.assign({},r);delete o.user;let s=jh(o);yield Mr(this.storage,this.storageKey,s)}else{let o=jh(r);yield Mr(this.storage,this.storageKey,o)}})}_removeSession(){return p(this,null,function*(){this._debug("#_removeSession()"),yield dn(this.storage,this.storageKey),yield dn(this.storage,this.storageKey+"-code-verifier"),yield dn(this.storage,this.storageKey+"-user"),this.userStorage&&(yield dn(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Oe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return p(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),Sr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>p(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return p(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return p(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return p(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return p(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>p(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(r=>p(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-t)/Sr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Sr}ms, refresh threshold is ${ec} ticks`),o<=ec&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof Cs)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return p(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Oe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>p(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return p(this,null,function*(){let r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>p(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,i){return p(this,null,function*(){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=yield Nr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(l.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`})}_unenroll(t){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):yield $(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}})}_enroll(t){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=yield $(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((o=c?.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))}))}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}})}_verify(t){return p(this,null,function*(){return this._acquireLock(-1,()=>p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?p0(t.webauthn.credential_response):g0(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=yield $(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))}))}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}}))})}_challenge(t){return p(this,null,function*(){return this._acquireLock(-1,()=>p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=yield $(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f0(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h0(l.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}}))})}_challengeAndVerify(t){return p(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return p(this,null,function*(){var t;let{data:{user:r},error:i}=yield this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(t=r?.factors)!==null&&t!==void 0?t:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return p(this,null,function*(){var t,r;let{data:{session:i},error:o}=yield this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=ac(i.access_token),a=null;s.aal&&(a=s.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");let u=s.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}})}_getAuthorizationDetails(t){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?yield $(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new He})}))}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}})}_approveAuthorization(t,r){return p(this,null,function*(){try{return yield this._useSession(i=>p(this,null,function*(){let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new He});let a=yield $(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Oe()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a}))}catch(i){if(V(i))return this._returnResult({data:null,error:i});throw i}})}_denyAuthorization(t,r){return p(this,null,function*(){try{return yield this._useSession(i=>p(this,null,function*(){let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new He});let a=yield $(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Oe()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a}))}catch(i){if(V(i))return this._returnResult({data:null,error:i});throw i}})}_listOAuthGrants(){return p(this,null,function*(){try{return yield this._useSession(t=>p(this,null,function*(){let{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?yield $(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new He})}))}catch(t){if(V(t))return this._returnResult({data:null,error:t});throw t}})}_revokeOAuthGrant(t){return p(this,null,function*(){try{return yield this._useSession(r=>p(this,null,function*(){let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?yield $(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new He})}))}catch(r){if(V(r))return this._returnResult({data:null,error:r});throw r}})}fetchJwk(i){return p(this,arguments,function*(t,r={keys:[]}){let o=r.keys.find(c=>c.kid===t);if(o)return o;let s=Date.now();if(o=this.jwks.keys.find(c=>c.kid===t),o&&this.jwks_cached_at+V_>s)return o;let{data:a,error:l}=yield $(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,o=a.keys.find(c=>c.kid===t),!o)?null:o})}getClaims(i){return p(this,arguments,function*(t,r={}){try{let o=t;if(!o){let{data:S,error:E}=yield this.getSession();if(E||!S.session)return this._returnResult({data:null,error:E});o=S.session.access_token}let{header:s,payload:a,signature:l,raw:{header:c,payload:u}}=ac(o);r?.allowExpired||X_(a.exp);let d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){let{error:S}=yield this.getUser(o);if(S)throw S;return{data:{claims:a,header:s,signature:l},error:null}}let h=e0(s.alg),f=yield crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!(yield crypto.subtle.verify(h,f,l,z_(`${c}.${u}`))))throw new xr("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(o){if(V(o))return this._returnResult({data:null,error:o});throw o}})}}return n.nextInstanceID={},n})(),qh=RT;var OT=qh,Kh=OT;var hc=class extends Kh{constructor(e){super(e)}};var pc=class{constructor(e,t,r){var i,o,s;this.supabaseUrl=e,this.supabaseKey=t;let a=R_(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);let l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:x_,realtime:M_,auth:Object.assign(Object.assign({},A_),{storageKey:l}),global:T_},u=k_(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=N_(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new d_(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new vs(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new as(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return p(this,null,function*(){var e,t;if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:a,lock:l,debug:c,throwOnError:u},d,h){let f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hc({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,flowType:a,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new hs(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var v0=(n,e,t)=>new pc(n,e,t);function PT(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}PT()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Fr=class Fr{constructor(){this.adminEmail=On.supabaseAdminEmail.trim().toLowerCase();this.storageKey="kinetic-auth-session";this.authStateListeners=new Set;this.sessionSignal=A(null);this.loadingSignal=A(!0);this.refreshTimeoutId=null;this.session=O(()=>this.sessionSignal());this.sessionToken=O(()=>this.sessionSignal()?.accessToken??null);this.ownerId=O(()=>this.extractOwnerId(this.sessionSignal()));this.userRole=O(()=>this.extractRole(this.sessionSignal()));this.accessToken=O(()=>this.sessionSignal()?.accessToken??null);this.isAuthenticated=O(()=>this.sessionSignal()!==null);this.isLoading=O(()=>this.loadingSignal());this.isAdmin=O(()=>this.matchesAdminEmail(this.sessionSignal()?.user?.email));this.supabase=v0(On.supabaseUrl,On.supabaseAnonKey,{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),this.initializePromise=this.restoreSession()}getSupabaseClient(){return{auth:{onAuthStateChange:e=>(e("INITIAL_SESSION",this.sessionSignal()),this.authStateListeners.add(e),{data:{subscription:{unsubscribe:()=>{this.authStateListeners.delete(e)}}}})}}}getRealSupabaseClient(){return this.supabase}initialize(){return p(this,null,function*(){return this.initializePromise})}resetState(){this.clearSession(),this.loadingSignal.set(!1)}canManageContent(){return this.userRole()?.toLowerCase()==="admin"?!0:this.isAdmin()}canManageGallery(e){if(!this.isAuthenticated())return!1;if(this.canManageContent())return!0;let t=e?.trim(),r=this.ownerId()?.trim();return!!(t&&r&&t===r)}signIn(e,t){return p(this,null,function*(){let r=e.trim(),i=t.trim();if(!r||!i)return{error:"Informe email e senha para entrar."};try{let{data:o,error:s}=yield this.supabase.auth.signInWithPassword({email:r,password:i});return s?{error:this.translateAuthError(s)}:o.session?(this.applySupabaseSession(o.session),{}):{error:"Sess\xE3o inv\xE1lida recebida do servidor."}}catch(o){return console.error("Erro inesperado durante login no Supabase:",o),{error:"Ocorreu um erro inesperado ao tentar fazer login."}}})}signUp(e,t){return p(this,null,function*(){let r=e.trim(),i=t.trim();if(!r||!i)return{error:"Informe email e senha para criar sua conta."};if(i.length<6)return{error:"A senha deve ter pelo menos 6 caracteres."};try{let o=this.isBrowser()?`${window.location.origin}${window.location.pathname}`:void 0,{data:s,error:a}=yield this.supabase.auth.signUp({email:r,password:i,options:{emailRedirectTo:o}});return a?{error:this.translateAuthError(a)}:s.user&&!s.session?{error:"Cadastro criado! Verifique seu email para confirmar o acesso."}:(s.session&&this.applySupabaseSession(s.session),{error:"Cadastro criado! Verifique seu email para confirmar o acesso."})}catch(o){return console.error("Erro inesperado durante cadastro no Supabase:",o),{error:"Ocorreu um erro inesperado ao tentar criar a conta."}}})}signOut(){return p(this,null,function*(){try{yield this.supabase.auth.signOut()}catch(e){console.error("Erro inesperado ao encerrar sess\xE3o no Supabase:",e)}this.clearSession()})}restoreSession(){return p(this,null,function*(){if(this.applySessionFromUrlFragment()){this.loadingSignal.set(!1);return}let t=this.loadSessionFromStorage();if(!t){this.loadingSignal.set(!1);return}let r=Math.floor(Date.now()/1e3);if(t.expiresAt-r>120){this.setSession(t,"INITIAL_SESSION"),this.loadingSignal.set(!1);return}if(!t.refreshToken){this.clearSession(),this.loadingSignal.set(!1);return}let o=yield this.refreshWithToken(t.refreshToken);o?this.setSession(o,"TOKEN_REFRESHED"):this.clearSession(),this.loadingSignal.set(!1)})}applySessionFromUrlFragment(){if(!this.isBrowser())return!1;let e=window.location.hash.replace(/^#/,"");if(!e)return!1;let t=new URLSearchParams(e);if(!(t.has("access_token")||t.has("refresh_token")||t.has("expires_in")||t.has("token_type")))return!1;let i=()=>this.cleanUrlFragment(),o=t.get("access_token"),s=t.get("refresh_token"),a=t.get("expires_in"),l=t.get("token_type");if(!o||!s||!a||!l)return i(),!1;let c=Number.parseInt(a,10);if(!Number.isFinite(c)||c<=0)return i(),!1;let u=this.buildUserFromJwt(o);if(!u)return i(),!1;let d={accessToken:o,refreshToken:s,expiresAt:Math.floor(Date.now()/1e3)+c,tokenType:l,user:u};return this.setSession(d,"SIGNED_IN"),i(),!0}convertSupabaseSession(e){return{accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:e.expires_at??Math.floor(Date.now()/1e3)+3600,tokenType:e.token_type??"bearer",user:this.convertSupabaseUser(e.user)}}convertSupabaseUser(e){return U({id:e.id,email:e.email??null},e.user_metadata)}applySupabaseSession(e){let t=this.convertSupabaseSession(e);this.setSession(t,"SIGNED_IN"),this.loadingSignal.set(!1)}translateAuthError(e){let t=e.message.toLowerCase();return t.includes("invalid login credentials")?"Email ou senha inv\xE1lidos.":t.includes("email not confirmed")?"Email ainda n\xE3o confirmado. Verifique sua caixa de entrada.":t.includes("user already registered")?"Este email j\xE1 est\xE1 cadastrado.":t.includes("invalid email")?"Email inv\xE1lido.":e.message||"Erro desconhecido durante a autentica\xE7\xE3o."}emitAuthChange(e,t){this.authStateListeners.forEach(r=>r(e,t))}setSession(e,t){let r=this.sessionSignal();this.sessionSignal.set(e),this.persistSession(e),this.scheduleRefresh(e);let i=t||(e?r?"TOKEN_REFRESHED":"SIGNED_IN":"SIGNED_OUT");this.emitAuthChange(i,e)}clearSession(){this.setSession(null,"SIGNED_OUT")}handleUnauthorized(){this.clearSession(),this.loadingSignal.set(!1)}refreshCurrentSession(){return p(this,null,function*(){let e=this.sessionSignal();if(!e||!e.refreshToken)return;let t=yield this.refreshWithToken(e.refreshToken);t?this.setSession(t,"TOKEN_REFRESHED"):this.clearSession()})}refreshWithToken(e){return p(this,null,function*(){try{let{data:t,error:r}=yield this.supabase.auth.refreshSession({refresh_token:e});return r?(console.warn("Falha ao atualizar sess\xE3o do Supabase:",r.message),null):t.session?this.convertSupabaseSession(t.session):null}catch(t){return console.error("Erro inesperado ao atualizar sess\xE3o do Supabase:",t),null}})}scheduleRefresh(e){if(this.refreshTimeoutId!==null&&(clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=null),!e||!this.isBrowser())return;let t=Math.floor(Date.now()/1e3),r=e.expiresAt-t,i=Math.max(r-60,5);this.refreshTimeoutId=setTimeout(()=>{this.refreshCurrentSession()},i*1e3)}persistSession(e){if(this.isBrowser())try{if(!e){window.localStorage.removeItem(this.storageKey);return}window.localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(t){console.error("Erro ao persistir sess\xE3o do Supabase no localStorage:",t)}}loadSessionFromStorage(){if(!this.isBrowser())return null;try{let e=window.localStorage.getItem(this.storageKey);if(!e)return null;let t=JSON.parse(e);return this.isValidSession(t)?t:(window.localStorage.removeItem(this.storageKey),null)}catch(e){return console.error("Erro ao restaurar sess\xE3o do Supabase do localStorage:",e),null}}isValidSession(e){return!!(e&&typeof e.accessToken=="string"&&typeof e.refreshToken=="string"&&typeof e.expiresAt=="number"&&typeof e.tokenType=="string"&&e.user&&typeof e.user.id=="string")}isBrowser(){return typeof window<"u"&&typeof window.localStorage<"u"}extractOwnerId(e){if(!e)return null;let t=this.decodeJwtClaims(e.accessToken),r=this.firstString(t?.owner_id,t?.ownerId,t?.sub);return r||(this.firstString(e.user?.owner_id,e.user?.ownerId,e.user?.id)??null)}extractRole(e){if(!e)return null;let t=this.decodeJwtClaims(e.accessToken),r=this.firstString(t?.role,this.readNested(t,"user_role"),this.readNested(t,"app_metadata","role"));if(r)return r;let i=this.firstString(e.user?.role,this.readNested(e.user,"role"),this.readNested(e.user,"app_metadata","role"),this.readNested(e.user,"user_metadata","role"));return i||(this.matchesAdminEmail(e.user?.email)?"admin":null)}decodeJwtClaims(e){let[,t]=e.split(".");if(!t)return null;try{let r=t.replace(/-/g,"+").replace(/_/g,"/"),i=r.padEnd(Math.ceil(r.length/4)*4,"="),s=(typeof atob=="function"?atob:a=>Buffer.from(a,"base64").toString("binary"))(i);return JSON.parse(s)}catch(r){return console.error("Erro ao decodificar JWT do Supabase:",r),null}}buildUserFromJwt(e){let t=this.decodeJwtClaims(e);if(!t||typeof t!="object")return null;let r=this.firstString(t.sub);if(!r)return null;let i=this.firstString(this.readNested(t,"email"),this.readNested(t,"user_metadata","email")),o=i?{id:r,email:i}:{id:r},s=this.readNestedObject(t,"user_metadata");return s&&(o.user_metadata=s),o}firstString(...e){return e.find(r=>typeof r=="string"&&r.length>0)??null}readNested(e,...t){if(!e||typeof e!="object")return null;let r=e;for(let i of t){if(!r||typeof r!="object"||!(i in r))return null;r=r[i]}return typeof r=="string"&&r.length>0?r:null}readNestedObject(e,...t){if(!e||typeof e!="object")return null;let r=e;for(let i of t){if(!r||typeof r!="object"||!(i in r))return null;r=r[i]}return r&&typeof r=="object"?r:null}cleanUrlFragment(){if(this.isBrowser())try{let e=`${window.location.pathname}${window.location.search}`;window.history.replaceState({},document.title,e)}catch(e){console.error("Erro ao limpar par\xE2metros de autentica\xE7\xE3o da URL:",e)}}matchesAdminEmail(e){return!this.adminEmail||!e?!1:e.trim().toLowerCase()===this.adminEmail}};Fr.\u0275fac=function(t){return new(t||Fr)},Fr.\u0275prov=Q({token:Fr,factory:Fr.\u0275fac,providedIn:"root"});var ut=Fr;var Lr=class Lr{constructor(){this.baseUrl=On.supabaseUrl.replace(/\/+$/,"");this.anonKey=On.supabaseAnonKey;this.bucketName=On.supabaseBucket;this.authService=R(ut);this.includeOwnerColumn=!0;this.includeGalleryIdColumn=!0;this.currentUserGalleryId=null;this.supabase=this.authService.getRealSupabaseClient()}getCurrentUserGalleryId(){return this.currentUserGalleryId}isEnabled(){return!!(this.baseUrl&&this.anonKey)}resetState(){this.currentUserGalleryId=null}restRequest(r){return p(this,arguments,function*(e,t={}){let i=yield fetch(`${this.baseUrl}/rest/v1/${e}`,Z(U({},t),{headers:U(U({},this.buildRestHeaders()),t.headers??{})}));return this.handleUnauthorized(i),i})}storageRequest(i){return p(this,arguments,function*(e,t={},r){let o=yield fetch(`${this.baseUrl}/storage/v1/${e}`,Z(U({},t),{headers:U(U({},this.buildStorageHeaders(r)),t.headers??{})}));return this.handleUnauthorized(o),o})}logFailure(e,t){console.error(`${e}:`,t)}logUnexpected(e,t){console.error(`${e}:`,t)}handleUnauthorized(e){e.status===401&&this.authService.handleUnauthorized()}buildError(e,t){return p(this,null,function*(){let i=(yield this.extractError(e))??t;return e.status===401||e.status===403?"Acesso negado: voc\xEA n\xE3o tem permiss\xE3o para operar nesta galeria.":i})}extractError(e){return p(this,null,function*(){try{if(e.headers.get("content-type")?.includes("application/json")){let i=yield e.json(),o=i.message??i.error;return typeof o=="string"&&o.length>0?o:null}return(yield e.text())||null}catch(t){return console.error("Falha ao interpretar resposta de erro do Supabase:",t),null}})}fetchGalleries(){return p(this,null,function*(){if(!this.isEnabled())return{success:!0,data:[]};try{let e=yield this.restRequest(`galleries?select=${this.buildGallerySelect()}&order=created_at.desc`);if(!e.ok){let r=yield e.clone().text();return this.disableUnsupportedColumns(r)?this.fetchGalleries():(this.logFailure("Falha ao buscar galerias no Supabase",r),{success:!1,error:yield this.buildError(e,"N\xE3o foi poss\xEDvel carregar as galerias.")})}return{success:!0,data:(yield e.json()).map(r=>({id:r.id,galleryId:r.gallery_id??r.id,ownerId:r.owner_id??null,name:r.name,description:r.description??"",imageUrls:this.extractGalleryImageUrls(r.gallery_images),thumbnailUrl:r.thumbnail_url??void 0,createdAt:this.formatDate(r.created_at)}))}}catch(e){return this.logUnexpected("Erro inesperado ao carregar galerias do Supabase",e),{success:!1,error:"Erro inesperado ao carregar galerias."}}})}syncCurrentUserGallery(){return p(this,null,function*(){if(!this.isEnabled()||!this.authService.isAuthenticated())return this.currentUserGalleryId=null,{success:!0,data:null};try{let e=yield this.restRequest("rpc/get_or_create_user_gallery",{method:"POST"});if(!e.ok)return this.logFailure("Falha ao obter galeria padr\xE3o do usu\xE1rio",yield e.text()),{success:!1,error:yield this.buildError(e,"N\xE3o foi poss\xEDvel recuperar a sua galeria.")};let t=yield e.json(),r=typeof t?.gallery_id=="string"?t.gallery_id:null;return this.currentUserGalleryId=r,{success:!0,data:r}}catch(e){return this.logUnexpected("Erro inesperado ao sincronizar galeria do usu\xE1rio",e),{success:!1,error:"Erro inesperado ao carregar galeria do usu\xE1rio."}}})}upsertGallery(e){return p(this,null,function*(){if(!this.isEnabled())return{success:!0};try{let t={id:e.id,name:e.name,description:e.description,thumbnail_url:this.sanitizeThumbnailUrl(e.thumbnailUrl)};this.includeGalleryIdColumn&&(t.gallery_id=e.galleryId),this.includeOwnerColumn&&e.ownerId&&(t.owner_id=e.ownerId);let r=this.parseDate(e.createdAt);r&&(t.created_at=r);let i=yield this.restRequest("galleries",{method:"POST",headers:{Prefer:"resolution=merge-duplicates"},body:JSON.stringify(t)});if(!i.ok){let o=yield i.clone().text();return this.disableUnsupportedColumns(o)?this.upsertGallery(e):(this.logFailure("Falha ao salvar galeria no Supabase",o),{success:!1,error:yield this.buildError(i,"N\xE3o foi poss\xEDvel salvar a galeria.")})}return{success:!0}}catch(t){return this.logUnexpected("Erro inesperado ao salvar galeria no Supabase",t),{success:!1,error:"Erro inesperado ao salvar galeria."}}})}deleteGallery(e,t){return p(this,null,function*(){if(!this.isEnabled())return{success:!0};try{let r=t.map(s=>this.extractStoragePath(s)).filter(s=>!!s);r.length>0&&(yield this.removeFromStorage(r));let i=yield this.restRequest(`gallery_images?gallery_id=eq.${encodeURIComponent(e)}`,{method:"DELETE"});if(!i.ok)return this.logFailure("Falha ao remover imagens associadas no Supabase",yield i.text()),{success:!1,error:yield this.buildError(i,"N\xE3o foi poss\xEDvel remover imagens da galeria.")};let o=yield this.restRequest(`galleries?id=eq.${encodeURIComponent(e)}`,{method:"DELETE"});return o.ok?{success:!0}:(this.logFailure("Falha ao excluir galeria no Supabase",yield o.text()),{success:!1,error:yield this.buildError(o,"N\xE3o foi poss\xEDvel excluir a galeria.")})}catch(r){return this.logUnexpected("Erro inesperado ao excluir galeria no Supabase",r),{success:!1,error:"Erro inesperado ao excluir galeria."}}})}uploadImage(e,t){return p(this,null,function*(){if(!this.isEnabled())return{success:!0,data:t};try{let{blob:r,extension:i,contentType:o}=this.dataUrlToBlob(t),s=`${e}/${crypto.randomUUID()}.${i}`;console.log("[SupabaseService] preparando upload para o Storage",{contentType:o,fileName:s});let a=yield this.storageRequest(`object/${this.bucketName}/${s}`,{method:"POST",headers:{"x-upsert":"false"},body:r},o);if(!a.ok)return this.logFailure("Falha ao enviar imagem para o Supabase Storage",yield a.text()),{success:!1,error:yield this.buildError(a,"N\xE3o foi poss\xEDvel enviar a imagem.")};let l=`${this.baseUrl}/storage/v1/object/public/${this.bucketName}/${s}`,c=yield this.restRequest("gallery_images",{method:"POST",headers:{Prefer:"resolution=merge-duplicates"},body:JSON.stringify({gallery_id:e,image_url:l})});if(!c.ok)return this.logFailure("Falha ao registrar imagem no Supabase",yield c.text()),{success:!1,error:yield this.buildError(c,"N\xE3o foi poss\xEDvel registrar a imagem.")};let u=yield this.updateGalleryThumbnail(e,l);return u.success?{success:!0,data:l}:{success:!1,error:u.error}}catch(r){return this.logUnexpected("Erro inesperado ao enviar imagem para o Supabase",r),{success:!1,error:"Erro inesperado ao enviar imagem."}}})}removeImageFromGallery(e,t,r){return p(this,null,function*(){if(!this.isEnabled())return{success:!0};try{let i=yield this.restRequest(`gallery_images?gallery_id=eq.${encodeURIComponent(e)}&image_url=eq.${encodeURIComponent(t)}`,{method:"DELETE"});if(!i.ok)return this.logFailure("Falha ao remover imagem do Supabase",yield i.text()),{success:!1,error:yield this.buildError(i,"N\xE3o foi poss\xEDvel remover a imagem.")};let o=this.extractStoragePath(t);o&&(yield this.removeFromStorage([o]));let s=yield this.updateGalleryThumbnail(e,r??null);return s.success?{success:!0}:s}catch(i){return this.logUnexpected("Erro inesperado ao remover imagem do Supabase",i),{success:!1,error:"Erro inesperado ao remover imagem."}}})}updateGalleryThumbnail(e,t){return p(this,null,function*(){if(!this.isEnabled())return{success:!0};try{let r=yield this.restRequest(`galleries?id=eq.${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify({thumbnail_url:this.sanitizeThumbnailUrl(t??void 0)})});return r.ok?{success:!0}:(this.logFailure("Falha ao atualizar thumbnail da galeria no Supabase",yield r.text()),{success:!1,error:yield this.buildError(r,"N\xE3o foi poss\xEDvel atualizar a capa da galeria.")})}catch(r){return this.logUnexpected("Erro inesperado ao atualizar thumbnail no Supabase",r),{success:!1,error:"Erro inesperado ao atualizar a capa da galeria."}}})}removeFromStorage(e){return p(this,null,function*(){if(!(!this.isEnabled()||e.length===0))try{let t=yield this.storageRequest(`object/${this.bucketName}/delete`,{method:"POST",body:JSON.stringify({paths:e})},"application/json");t.ok||this.logFailure("Falha ao remover arquivos do Supabase Storage",yield t.text())}catch(t){this.logUnexpected("Erro inesperado ao remover arquivos do Supabase Storage",t)}})}buildRestHeaders(){return{apikey:this.anonKey,Authorization:this.resolveAuthorizationHeader(),"Content-Type":"application/json"}}buildStorageHeaders(e){let t={apikey:this.anonKey,Authorization:this.resolveAuthorizationHeader()};return e&&(t["Content-Type"]=e),t}resolveAuthorizationHeader(){let e=this.authService.session();return e?`${e.tokenType} ${e.accessToken}`:`Bearer ${this.anonKey}`}dataUrlToBlob(e){let[t,r]=e.split(","),o=t.match(/data:(.*);base64/)?.[1]??"image/png",s=atob(r),a=s.length,l=new Uint8Array(a);for(let u=0;u<a;u+=1)l[u]=s.charCodeAt(u);return{blob:new Blob([l],{type:o}),contentType:o,extension:this.detectExtension(o)}}detectExtension(e){return e.includes("avif")?"avif":e.includes("jpeg")?"jpg":e.includes("png")?"png":e.includes("webp")?"webp":e.includes("gif")?"gif":"png"}extractGalleryImageUrls(e){return e?[...e].filter(t=>typeof t.image_url=="string"&&t.image_url.length>0).sort((t,r)=>this.parseTimestamp(r.created_at)-this.parseTimestamp(t.created_at)).map(t=>t.image_url):[]}parseTimestamp(e){if(!e)return Number.NEGATIVE_INFINITY;let t=Date.parse(e);return Number.isNaN(t)?Number.NEGATIVE_INFINITY:t}extractStoragePath(e){try{let t=new URL(e),r=`/storage/v1/object/public/${this.bucketName}/`;if(t.pathname.startsWith(r))return decodeURIComponent(t.pathname.slice(r.length));let i=t.pathname.indexOf(`/${this.bucketName}/`);return i!==-1?decodeURIComponent(t.pathname.slice(i+this.bucketName.length+2)):null}catch{return null}}parseDate(e){if(!e)return null;let[t,r,i]=e.split("/").map(s=>Number.parseInt(s,10));if(Number.isNaN(t)||Number.isNaN(r)||Number.isNaN(i))return null;let o=new Date(Date.UTC(i,r-1,t));return Number.isNaN(o.getTime())?null:o.toISOString()}formatDate(e){if(!e)return this.formatDateFromDate(new Date);let t=new Date(e);return Number.isNaN(t.getTime())?e:this.formatDateFromDate(t)}formatDateFromDate(e){let t=String(e.getUTCDate()).padStart(2,"0"),r=String(e.getUTCMonth()+1).padStart(2,"0"),i=e.getUTCFullYear();return`${t}/${r}/${i}`}sanitizeThumbnailUrl(e){return!e||e.startsWith("data:")?null:e}buildGallerySelect(){let e=["id","name","description","thumbnail_url","created_at"];return this.includeGalleryIdColumn&&e.push("gallery_id"),this.includeOwnerColumn&&e.push("owner_id"),e.push("gallery_images:gallery_images(image_url,created_at)"),e.join(",")}disableUnsupportedColumns(e){let t=e.toLowerCase(),r=!1;return this.includeGalleryIdColumn&&t.includes("gallery_id")&&(this.includeGalleryIdColumn=!1,r=!0),this.includeOwnerColumn&&t.includes("owner_id")&&(this.includeOwnerColumn=!1,r=!0),r}};Lr.\u0275fac=function(t){return new(t||Lr)},Lr.\u0275prov=Q({token:Lr,factory:Lr.\u0275fac,providedIn:"root"});var gc=Lr;var Vr=class Vr{constructor(){this.supabaseService=R(gc);this.authService=R(ut);this.ongoingUploads=new Set;this.pendingUploadsStorageKey="kinetic-gallery.pending-uploads";this.loadingSignal=A(!0);this.initializePromise=null;this.galleries=A([]);this.selectedGalleryId=A(null);this.pendingCaptures=A([]);this.currentUserGalleryId=A(null);this.lastErrorMessage=A(null);this.isLoading=O(()=>this.loadingSignal());this.images=O(()=>{let e=this.selectedGalleryId();if(!e)return[];let t=this.galleries().find(r=>r.id===e);return t?t.imageUrls:[]});this.initialize()}resetState(){this.supabaseService.resetState(),this.galleries.set([]),this.selectedGalleryId.set(null),this.pendingCaptures.set([]),this.currentUserGalleryId.set(null),this.lastErrorMessage.set(null),this.ongoingUploads.clear(),this.clearPendingUploadsStorage(),this.loadingSignal.set(!0)}initialize(){return p(this,null,function*(){return this.initializePromise?this.initializePromise:(this.loadingSignal.set(!0),this.initializePromise=this.initializeData().finally(()=>{this.loadingSignal.set(!1),this.initializePromise=null}),this.initializePromise)})}initializeData(){return p(this,null,function*(){yield this.authService.initialize(),this.lastErrorMessage.set(null),this.supabaseService.isEnabled()&&(yield this.syncCurrentUserGallery(),yield this.loadRemoteGalleries()),this.restorePendingUploads()})}syncCurrentUserGallery(){return p(this,null,function*(){let e=yield this.supabaseService.syncCurrentUserGallery();if(!e.success){this.setError(e.error??"N\xE3o foi poss\xEDvel sincronizar a galeria do usu\xE1rio.");return}let t=e.data??null;this.currentUserGalleryId.set(t),!this.authService.canManageContent()&&t&&this.selectedGalleryId.set(t)})}createGallery(e,t){return p(this,null,function*(){let r=this.authService.ownerId();if(!this.requireOwnerOrAdmin(r))return null;if(!this.authService.canManageContent()&&this.hasGalleryForOwner(r))return this.setError("Usu\xE1rios comuns podem criar apenas uma galeria. Capture fotos na galeria que voc\xEA j\xE1 possui."),null;let i=new Date,o=String(i.getDate()).padStart(2,"0"),s=String(i.getMonth()+1).padStart(2,"0"),a=i.getFullYear(),l=`${o}/${s}/${a}`,c=crypto.randomUUID(),u={id:c,galleryId:c,ownerId:r,name:e,description:t,imageUrls:[],thumbnailUrl:void 0,createdAt:l,canEditGallery:!0,canUploadToGallery:!0,canDeletePhoto:!0};if(this.supabaseService.isEnabled()){let d=yield this.supabaseService.upsertGallery(u);if(!d.success)return this.setError(d.error??"N\xE3o foi poss\xEDvel criar a galeria."),null}return this.galleries.update(d=>[u,...d]),this.authService.canManageGallery(r??"")&&(this.currentUserGalleryId.set(c),this.authService.canManageContent()||this.selectedGalleryId.set(c)),this.setError(null),u.id})}getGallery(e){return this.galleries().find(t=>t.id===e||t.galleryId===e)}updateGallery(e,t,r){return p(this,null,function*(){let i=this.getGallery(e);if(!this.requireOwnership(i))return!1;let o=this.withPermissions(Z(U({},i),{name:t,description:r}));if(this.supabaseService.isEnabled()){let s=yield this.supabaseService.upsertGallery(o);if(!s.success)return this.setError(s.error??"N\xE3o foi poss\xEDvel atualizar a galeria."),!1}return this.galleries.update(s=>s.map(a=>a.id===e?o:a)),this.setError(null),!0})}deleteGallery(e){return p(this,null,function*(){let t=this.getGallery(e);if(!this.requireOwnership(t))return!1;if(this.supabaseService.isEnabled()){let r=yield this.supabaseService.deleteGallery(e,t.imageUrls);if(!r.success)return this.setError(r.error??"N\xE3o foi poss\xEDvel excluir a galeria."),!1}return this.galleries.update(r=>r.filter(i=>i.id!==e)),this.selectedGalleryId()===e&&this.selectedGalleryId.set(null),this.setError(null),!0})}selectGallery(e){this.selectedGalleryId.set(e)}addImage(e){return p(this,null,function*(){if(!this.selectedGalleryId()){let i=yield this.createGallery("Galeria Principal","Galeria padr\xE3o para fotos capturadas");if(i)this.selectedGalleryId.set(i);else return!1}let t=this.selectedGalleryId();if(!t)return this.setError("Selecione uma galeria para salvar a imagem."),!1;let r=this.getGallery(t);return this.requireOwnership(r)?(this.pendingCaptures.update(i=>[e,...i]),!0):!1})}addPendingCapture(e){this.pendingCaptures.update(t=>[e,...t])}assignPendingCaptureToGallery(e,t){return p(this,null,function*(){return this.pendingCaptures.update(r=>r.filter(i=>i!==t)),this.addImageToGallery(e,t)})}removePendingCapture(e){this.pendingCaptures.update(t=>t.filter(r=>r!==e))}addImageToGallery(e,t){return p(this,null,function*(){let r=this.getGallery(e);if(!this.requireOwnership(r))return!1;let i=this.withPermissions(Z(U({},r),{imageUrls:[t,...r.imageUrls],thumbnailUrl:t}));return this.galleries.update(o=>o.map(s=>s.id===e?i:s)),t.startsWith("data:")&&this.registerPendingUpload(e,t),this.syncGalleryBase64Images(e,[t]),this.setError(null),!0})}removeImageFromGallery(e,t){return p(this,null,function*(){let r=this.getGallery(e);if(!this.requireOwnership(r))return!1;let i;if(this.galleries.update(s=>s.map(a=>{if(a.id===e){let l=a.imageUrls.filter(c=>c!==t);return i=l[0],Z(U({},a),{imageUrls:l,thumbnailUrl:i})}return a})),t.startsWith("data:")&&this.unregisterPendingUpload(e,t),this.supabaseService.isEnabled()){let s=yield this.supabaseService.removeImageFromGallery(e,t,i);if(!s.success)return this.setError(s.error??"N\xE3o foi poss\xEDvel remover a imagem."),!1}let o=this.getGallery(e);return o&&this.persistGallery(o),this.setError(null),!0})}loadRemoteGalleries(){return p(this,null,function*(){let e=yield this.supabaseService.fetchGalleries();if(!e.success){this.setError(e.error??"N\xE3o foi poss\xEDvel carregar as galerias.");return}let t=e.data??[];this.galleries.set(t.map(s=>this.withPermissions(s)));let r=this.selectedGalleryId(),i=this.findGalleryByIdOrAlias(r,t);r&&!i?this.selectedGalleryId.set(null):i&&this.selectedGalleryId.set(i.id);let o=this.currentUserGalleryId();if(!this.authService.canManageContent()&&!this.selectedGalleryId()&&o){let s=this.findGalleryByIdOrAlias(o,t);s&&this.selectedGalleryId.set(s.id)}})}syncGalleryBase64Images(e,t){if(!this.supabaseService.isEnabled())return;let r=this.getGallery(e);this.requireOwnership(r)&&t.filter(i=>i.startsWith("data:")).forEach(i=>{this.beginUpload(e,i)&&this.supabaseService.uploadImage(e,i).then(o=>p(this,null,function*(){if(!o.success||!o.data){this.setError(o.error??"N\xE3o foi poss\xEDvel enviar a imagem."),this.removeBase64Placeholder(e,i);return}let s=o.data;this.galleries.update(l=>l.map(c=>{if(c.id===e){let u=c.imageUrls.map(h=>h===i?s:h),d=c.thumbnailUrl===i?s:c.thumbnailUrl;return Z(U({},c),{imageUrls:u,thumbnailUrl:d})}return c}));let a=this.getGallery(e);a&&(yield this.persistGallery(a)),this.unregisterPendingUpload(e,i)})).finally(()=>{this.endUpload(e,i)})})}beginUpload(e,t){let r=this.createUploadKey(e,t);return this.ongoingUploads.has(r)?!1:(this.ongoingUploads.add(r),!0)}endUpload(e,t){this.ongoingUploads.delete(this.createUploadKey(e,t))}removeBase64Placeholder(e,t){this.galleries.update(r=>r.map(i=>{if(i.id!==e)return i;let o=i.imageUrls.filter(a=>a!==t),s=i.thumbnailUrl===t?o[0]:i.thumbnailUrl;return Z(U({},i),{imageUrls:o,thumbnailUrl:s})}))}createUploadKey(e,t){let r=t.slice(0,64),i=t.slice(-16);return`${e}::${t.length}::${r}::${i}`}persistGallery(e){return p(this,null,function*(){if(!this.requireOwnership(e))return!1;let t=yield this.supabaseService.upsertGallery(e);return t.success?!0:(this.setError(t.error??"N\xE3o foi poss\xEDvel atualizar a galeria."),!1)})}registerPendingUpload(e,t){this.canUseLocalStorage()&&this.updatePendingUploads(r=>r.some(o=>o.galleryId===e&&o.dataUrl===t)?r:[{galleryId:e,dataUrl:t},...r])}unregisterPendingUpload(e,t){this.canUseLocalStorage()&&this.updatePendingUploads(r=>r.filter(i=>!(i.galleryId===e&&i.dataUrl===t)))}restorePendingUploads(){let e=this.readPendingUploads();if(e.length===0)return;let t=e.reduce((r,{galleryId:i,dataUrl:o})=>{let s=r.get(i)??[];return s.includes(o)||s.unshift(o),r.set(i,s),r},new Map);this.galleries.update(r=>r.map(i=>{let o=t.get(i.id);if(!o||o.length===0)return i;let s=[...o,...i.imageUrls.filter(l=>!o.includes(l))],a=s[0]??i.thumbnailUrl;return Z(U({},i),{imageUrls:s,thumbnailUrl:a})})),t.forEach((r,i)=>{this.syncGalleryBase64Images(i,r)})}readPendingUploads(){if(!this.canUseLocalStorage())return[];try{let e=window.localStorage.getItem(this.pendingUploadsStorageKey);if(!e)return[];let t=JSON.parse(e);return Array.isArray(t)?t.filter(r=>!!r&&typeof r.galleryId=="string"&&typeof r.dataUrl=="string"):[]}catch(e){return console.error("Falha ao restaurar uploads pendentes do localStorage",e),[]}}updatePendingUploads(e){let t=this.readPendingUploads(),r=e(t);try{window.localStorage.setItem(this.pendingUploadsStorageKey,JSON.stringify(r))}catch(i){console.error("Falha ao persistir uploads pendentes no localStorage",i)}}clearPendingUploadsStorage(){if(this.canUseLocalStorage())try{window.localStorage.removeItem(this.pendingUploadsStorageKey)}catch(e){console.error("Falha ao limpar uploads pendentes do localStorage",e)}}canUseLocalStorage(){return typeof window<"u"&&typeof window.localStorage<"u"}requireOwnership(e){return e?this.requireOwnerOrAdmin(e.ownerId):(this.setError("Galeria n\xE3o encontrada."),!1)}requireOwnerOrAdmin(e){if(!this.authService.isAuthenticated())return this.setError("Fa\xE7a login para gerenciar galerias."),!1;if(this.authService.canManageContent())return!0;let t=e?.trim();return t?this.authService.canManageGallery(t)?!0:(this.setError("Voc\xEA n\xE3o tem permiss\xE3o para alterar esta galeria."),!1):(this.setError("N\xE3o foi poss\xEDvel validar o propriet\xE1rio da galeria."),!1)}setError(e){this.lastErrorMessage.set(e)}hasGalleryForOwner(e){let t=e?.trim();return t?this.currentUserGalleryId()?!0:this.galleries().some(r=>r.ownerId?.trim()===t):!1}findGalleryByIdOrAlias(e,t){if(e)return t.find(r=>r.id===e||r.galleryId===e)}withPermissions(e){let t=this.authService.canManageGallery(e.ownerId??"");return Z(U({},e),{canEditGallery:t,canUploadToGallery:t,canDeletePhoto:t})}};Vr.\u0275fac=function(t){return new(t||Vr)},Vr.\u0275prov=Q({token:Vr,factory:Vr.\u0275fac,providedIn:"root"});var Fi=Vr;var FT=(n,e)=>e.label;function LT(n,e){n&1&&(fe(0),J(),g(1,"svg",12),Y(2,"path",13),y(),he())}function VT(n,e){n&1&&(J(),g(0,"svg",12),Y(1,"path",15),y())}function jT(n,e){n&1&&(J(),g(0,"svg",14),Y(1,"path",16),y())}function UT(n,e){if(n&1&&(fe(0),M(1,VT,2,0,":svg:svg",12)(2,jT,2,0,":svg:svg",14),he()),n&2){let t=v(4);_(),N(t.isAutoNavigationActive()?1:2)}}function GT(n,e){n&1&&(J(),g(0,"svg",12),Y(1,"path",17),y())}function BT(n,e){n&1&&(J(),g(0,"svg",12),Y(1,"path",18),y())}function HT(n,e){if(n&1&&(fe(0),M(1,GT,2,0,":svg:svg",12)(2,BT,2,0,":svg:svg",12),he()),n&2){let t=v(4);_(),N(t.isFullscreen()?1:2)}}function $T(n,e){n&1&&(fe(0),J(),g(1,"svg",19),Y(2,"path",20),y(),he())}function zT(n,e){n&1&&(fe(0),J(),g(1,"svg",19),Y(2,"path",21),y(),he())}function WT(n,e){n&1&&(fe(0),J(),g(1,"svg",12),Y(2,"path",22)(3,"path",23),y(),he())}function qT(n,e){n&1&&(fe(0),J(),g(1,"svg",19),Y(2,"path",24),y(),he())}function KT(n,e){n&1&&(fe(0),J(),g(1,"svg",19),Y(2,"path",25),y(),he())}function YT(n,e){n&1&&(fe(0),J(),g(1,"svg",12),Y(2,"path",22)(3,"path",26),y(),he())}function ZT(n,e){if(n&1&&(fe(0),m(1),he()),n&2){let t=v(4);_(),oe(" ",t.themeMode()==="dark"?"Ativar modo claro":"Ativar modo escuro"," ")}}function JT(n,e){n&1&&m(0," Parar navega\xE7\xE3o autom\xE1tica ")}function QT(n,e){if(n&1&&m(0),n&2){let t=v(6);oe(" Iniciar navega\xE7\xE3o autom\xE1tica (",t.autoNavigationCountdown(),"s) ")}}function XT(n,e){n&1&&m(0," Iniciar navega\xE7\xE3o autom\xE1tica ")}function ex(n,e){if(n&1&&M(0,QT,1,1)(1,XT,1,0),n&2){let t=v(5);N(t.autoNavigationCountdown()!==null?0:1)}}function tx(n,e){if(n&1&&(fe(0),M(1,JT,1,0)(2,ex,2,1),he()),n&2){let t=v(4);_(),N(t.isAutoNavigationActive()?1:2)}}function nx(n,e){if(n&1&&(fe(0),m(1),he()),n&2){let t=v(4);_(),oe(" ",t.isFullscreen()?"Sair da tela cheia":"Entrar em tela cheia"," ")}}function rx(n,e){n&1&&(fe(0),m(1,"Informa\xE7\xF5es"),he())}function ix(n,e){n&1&&(fe(0),m(1,"Criar galeria"),he())}function ox(n,e){n&1&&(fe(0),m(1,"Tirar foto"),he())}function sx(n,e){n&1&&(fe(0),m(1,"Editar galeria"),he())}function ax(n,e){n&1&&(fe(0),m(1,"Excluir galeria"),he())}function lx(n,e){n&1&&(fe(0),m(1,"Excluir foto"),he())}function cx(n,e){if(n&1){let t=H();g(0,"li",6)(1,"button",7),x("click",function(i){C(t);let o=v().$implicit,s=v(2);return D(s.handleAction(o,i))}),g(2,"span",8),fe(3,9),Kt(4,LT,3,0,"ng-container",10)(5,UT,3,1,"ng-container",10)(6,HT,3,1,"ng-container",10)(7,$T,3,0,"ng-container",10)(8,zT,3,0,"ng-container",10)(9,WT,4,0,"ng-container",10)(10,qT,3,0,"ng-container",10)(11,KT,3,0,"ng-container",10)(12,YT,4,0,"ng-container",10),he(),y(),g(13,"span",11),fe(14,9),Kt(15,ZT,2,1,"ng-container",10)(16,tx,3,1,"ng-container",10)(17,nx,2,1,"ng-container",10)(18,rx,2,0,"ng-container",10)(19,ix,2,0,"ng-container",10)(20,ox,2,0,"ng-container",10)(21,sx,2,0,"ng-container",10)(22,ax,2,0,"ng-container",10)(23,lx,2,0,"ng-container",10),he(),y()()()}if(n&2){let t=v().$implicit,r=v(2);_(),Be("title",r.getActionTooltip(t)),_(2),j("ngSwitch",t),_(),j("ngSwitchCase","toggleTheme"),_(),j("ngSwitchCase","togglePlayback"),_(),j("ngSwitchCase","toggleFullscreen"),_(),j("ngSwitchCase","info"),_(),j("ngSwitchCase","createGallery"),_(),j("ngSwitchCase","capturePhoto"),_(),j("ngSwitchCase","editGallery"),_(),j("ngSwitchCase","deleteGallery"),_(),j("ngSwitchCase","deletePhoto"),_(2),j("ngSwitch",t),_(),j("ngSwitchCase","toggleTheme"),_(),j("ngSwitchCase","togglePlayback"),_(),j("ngSwitchCase","toggleFullscreen"),_(),j("ngSwitchCase","info"),_(),j("ngSwitchCase","createGallery"),_(),j("ngSwitchCase","capturePhoto"),_(),j("ngSwitchCase","editGallery"),_(),j("ngSwitchCase","deleteGallery"),_(),j("ngSwitchCase","deletePhoto")}}function ux(n,e){if(n&1&&M(0,cx,24,21,"li",6),n&2){let t=e.$implicit,r=v(2);N(r.isActionAllowed(t)?0:-1)}}function dx(n,e){n&1&&Y(0,"div",5)}function fx(n,e){if(n&1&&(g(0,"li",2)(1,"p",3),m(2),y(),g(3,"ul",4),Yt(4,ux,1,1,null,null,Of),y(),M(6,dx,1,0,"div",5),y()),n&2){let t=e.$implicit,r=e.$index,i=e.$count;_(2),Ce(t.label),_(2),Zt(t.actions),_(2),N(r!==i-1?6:-1)}}var Li=class Li{constructor(){this.x=ge.required();this.y=ge.required();this.isFullscreen=ge(!1);this.groups=ge.required();this.themeMode=ge.required();this.isAutoNavigationActive=ge(!1);this.autoNavigationCountdown=ge(null);this.canEditGallery=ge(!1);this.canUploadToGallery=ge(!1);this.canDeletePhoto=ge(!1);this.adminActionHint=ge("Apenas administradores ou propriet\xE1rios podem usar esta a\xE7\xE3o.");this.close=se();this.capture=se();this.toggleFullscreen=se();this.toggleTheme=se();this.togglePlayback=se();this.createGallery=se();this.editGallery=se();this.deleteGallery=se();this.deletePhoto=se();this.info=se()}isActionAllowed(e){switch(e){case"editGallery":case"deleteGallery":return this.canEditGallery();case"capturePhoto":return this.canUploadToGallery();case"deletePhoto":return this.canDeletePhoto();default:return!0}}getActionTooltip(e){switch(e){case"editGallery":case"deleteGallery":case"capturePhoto":case"deletePhoto":return this.adminActionHint();default:return null}}handleAction(e,t){switch(t.stopPropagation(),e){case"toggleTheme":this.toggleTheme.emit();break;case"togglePlayback":this.togglePlayback.emit();break;case"toggleFullscreen":this.toggleFullscreen.emit();break;case"info":this.info.emit();break;case"createGallery":this.createGallery.emit();break;case"capturePhoto":this.capture.emit();break;case"editGallery":this.editGallery.emit();break;case"deleteGallery":this.deleteGallery.emit();break;case"deletePhoto":this.deletePhoto.emit();break}this.close.emit()}};Li.\u0275fac=function(t){return new(t||Li)},Li.\u0275cmp=Ge({type:Li,selectors:[["app-context-menu"]],inputs:{x:[1,"x"],y:[1,"y"],isFullscreen:[1,"isFullscreen"],groups:[1,"groups"],themeMode:[1,"themeMode"],isAutoNavigationActive:[1,"isAutoNavigationActive"],autoNavigationCountdown:[1,"autoNavigationCountdown"],canEditGallery:[1,"canEditGallery"],canUploadToGallery:[1,"canUploadToGallery"],canDeletePhoto:[1,"canDeletePhoto"],adminActionHint:[1,"adminActionHint"]},outputs:{close:"close",capture:"capture",toggleFullscreen:"toggleFullscreen",toggleTheme:"toggleTheme",togglePlayback:"togglePlayback",createGallery:"createGallery",editGallery:"editGallery",deleteGallery:"deleteGallery",deletePhoto:"deletePhoto",info:"info"},decls:4,vars:4,consts:[[1,"menu"],["role","menu",1,"menu__groups"],["role","none",1,"menu__group"],[1,"menu__heading"],["role","none",1,"menu__items"],["role","presentation",1,"menu__divider"],["role","none"],["type","button","role","menuitem","data-cursor-pointer","",1,"menu__item",3,"click"],["aria-hidden","true",1,"menu__icon"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"menu__label"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","d","M12 3v1.5m0 15V21m9-9h-1.5M4.5 12H3m15.364 6.364-1.06-1.06M6.697 6.697 5.636 5.636m12.728 0-1.06 1.06M6.697 17.303l-1.061 1.061M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 6h-3A1.5 1.5 0 0 0 6 7.5v9A1.5 1.5 0 0 0 7.5 18h3A1.5 1.5 0 0 0 12 16.5v-9A1.5 1.5 0 0 0 10.5 6Zm7.5 1.5v9A1.5 1.5 0 0 1 16.5 18h-3a1.5 1.5 0 0 1-1.5-1.5v-9A1.5 1.5 0 0 1 13.5 6h3A1.5 1.5 0 0 1 18 7.5Z"],["d","M5.25 5.653c0-1.44 1.585-2.294 2.8-1.509l8.087 5.094a1.8 1.8 0 0 1 0 3.024L8.05 17.357c-1.215.785-2.8-.07-2.8-1.51V5.653Z"],["stroke-linecap","round","stroke-linejoin","round","d","M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5M15 15l5.25 5.25"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9M20.25 20.25h-4.5m4.5 0v-4.5m0 4.5L15 15"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","1.5"],["stroke-linecap","round","stroke-linejoin","round","d","m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],["stroke-linecap","round","stroke-linejoin","round","d","M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"],["stroke-linecap","round","stroke-linejoin","round","d","M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14.125V21H4.875c-.621 0-1.125-.504-1.125-1.125V4.875c0-.621.504-1.125 1.125-1.125H12"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.107H7.218a2.25 2.25 0 01-2.244-2.107L4.74 5.836m19.825 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM12 4.5V3.75c0-.621-.504-1.125-1.125-1.125H9.75A1.125 1.125 0 008.625 3.75v.75m-8.1 4.5H12m-.75 0h-.75m.75 0h-.75M12 4.5H5.25m-1.5 0h-.75M4.5 4.5V2.25m0 0H2.25M2.25 2.25V4.5m0 0h-.75m.75 0v.75m0 0H2.25V4.5m-1.5 0h-.75M2.25 4.5V2.25M2.25 4.5h-.75m.75 0v.75m0 0H4.5m-.75 0V2.25M12 4.5h-.75m.75 0h-.75M12 4.5V3.75c0-.621-.504-1.125-1.125-1.125H9.75A1.125 1.125 0 008.625 3.75v.75m-8.1 4.5H12m-.75 0h-.75m.75 0h-.75Z"],["stroke-linecap","round","stroke-linejoin","round","d","M8.25 13.5 10 15.25a1.06 1.06 0 0 0 1.5 0l4.25-4.25"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"ul",1),Yt(2,fx,7,2,"li",2,FT),y()()),t&2&&(ie("left",r.x(),"px")("top",r.y(),"px"),_(2),Zt(r.groups()))},dependencies:[je,El,qf],encapsulation:2,changeDetection:0});var mc=Li;var y0="angular-kinetic-gallery:theme",jr=class jr{constructor(e){this.documentRef=e;this.palettes={dark:{name:"dark",bodyBackground:"#000000",bodyText:"#e5e7eb",scrim:"rgba(0, 0, 0, 0.7)",contextMenu:{background:"rgba(30, 30, 30, 0.95)",border:"rgb(50, 50, 50)",itemHover:"rgb(60, 60, 60)",heading:"#9ca3af",divider:"rgba(255, 255, 255, 0.08)",text:"#e5e7eb",icon:"#9ca3af"},dialog:{surface:"rgba(30, 30, 30, 0.95)",border:"rgb(50, 50, 50)",title:"#e5e7eb",text:"#d1d5db",muted:"#9ca3af",icon:"#b4b4b4",inputBackground:"rgb(38, 38, 38)",inputText:"#e5e7eb",inputBorder:"rgb(60, 60, 60)",focusRing:"rgba(148, 163, 184, 0.35)",buttonPrimaryBg:"rgb(60, 60, 60)",buttonPrimaryText:"#ffffff",buttonSecondaryBg:"rgb(60, 60, 60)",buttonSecondaryText:"#ffffff",buttonDangerBg:"#ef4444",buttonDangerText:"#ffffff",disabledBg:"rgb(38, 38, 38)",disabledText:"rgb(150, 150, 150)",timerActiveBg:"rgb(80, 80, 80)",timerInactiveBg:"rgb(38, 38, 38)",timerInactiveText:"rgb(180, 180, 180)"},metaThemeColor:"#000000"},light:{name:"light",bodyBackground:"#f8fafc",bodyText:"#0f172a",scrim:"rgba(15, 23, 42, 0.45)",contextMenu:{background:"rgba(255, 255, 255, 0.98)",border:"rgba(148, 163, 184, 0.5)",itemHover:"rgba(226, 232, 240, 0.9)",heading:"#475569",divider:"rgba(148, 163, 184, 0.35)",text:"#0f172a",icon:"#475569"},dialog:{surface:"rgba(255, 255, 255, 0.98)",border:"rgba(148, 163, 184, 0.5)",title:"#0f172a",text:"#1e293b",muted:"#475569",icon:"#475569",inputBackground:"rgba(241, 245, 249, 0.9)",inputText:"#0f172a",inputBorder:"rgba(148, 163, 184, 0.6)",focusRing:"rgba(148, 163, 184, 0.35)",buttonPrimaryBg:"#0f172a",buttonPrimaryText:"#f8fafc",buttonSecondaryBg:"rgba(148, 163, 184, 0.25)",buttonSecondaryText:"#0f172a",buttonDangerBg:"#ef4444",buttonDangerText:"#ffffff",disabledBg:"rgba(226, 232, 240, 0.9)",disabledText:"rgba(148, 163, 184, 0.9)",timerActiveBg:"#0f172a",timerInactiveBg:"rgba(148, 163, 184, 0.25)",timerInactiveText:"#475569"},metaThemeColor:"#f8fafc"}};this.storedTheme=this.readStoredTheme();this.themeSignal=A(this.storedTheme??"dark");this.theme=O(()=>this.themeSignal());this.contextMenuPalette=O(()=>this.palettes[this.themeSignal()].contextMenu);this.dialogPalette=O(()=>this.palettes[this.themeSignal()].dialog);this.scrimColor=O(()=>this.palettes[this.themeSignal()].scrim);this.bodyBackground=O(()=>this.palettes[this.themeSignal()].bodyBackground);this.bodyText=O(()=>this.palettes[this.themeSignal()].bodyText);qe(()=>{let t=this.themeSignal();this.applyToDocument(t),this.persistTheme(t)})}toggleTheme(){this.setTheme(this.themeSignal()==="dark"?"light":"dark")}setTheme(e){this.themeSignal.set(e)}isDark(){return this.themeSignal()==="dark"}isLight(){return this.themeSignal()==="light"}applyToDocument(e){let t=this.documentRef.body;t.dataset.theme=e,this.documentRef.documentElement.dataset.theme=e;let r=this.palettes[e],o=(this.documentRef.defaultView?.getComputedStyle(t)??null)?.getPropertyValue("--color-bg-canvas").trim(),s=this.documentRef.querySelector('meta[name="theme-color"]');if(s){let a=o&&o.length>0?o:r.metaThemeColor;s.setAttribute("content",a)}}persistTheme(e){if(!(typeof window>"u"))try{window.localStorage.setItem(y0,e)}catch(t){console.warn("N\xE3o foi poss\xEDvel salvar o tema preferido.",t)}}readStoredTheme(){if(typeof window>"u")return null;try{let e=window.localStorage.getItem(y0);if(e==="dark"||e==="light")return e}catch(e){console.warn("N\xE3o foi poss\xEDvel ler o tema salvo.",e)}return null}};jr.\u0275fac=function(t){return new(t||jr)(ee(Xe))},jr.\u0275prov=Q({token:jr,factory:jr.\u0275fac,providedIn:"root"});var dt=jr;var _0="image/webp";function b0(n){return p(this,null,function*(){let e=n.type||"image/png",t={blob:n,extension:px(e),mime:e};if(typeof document>"u")return t;try{let r=yield hx(n),i=document.createElement("canvas");i.width=r.naturalWidth||r.width,i.height=r.naturalHeight||r.height;let o=i.getContext("2d");if(!o)return t;o.drawImage(r,0,0);let s=yield new Promise(a=>{i.toBlob(l=>a(l),_0,.8)});if(s&&s.size>0)return console.info("[convertToWebp] usando WEBP, tamanho:",s.size),{blob:s,extension:"webp",mime:_0}}catch(r){console.warn("Falha ao converter imagem para WEBP",r)}return console.warn("[convertToWebp] fallback ativado, mantendo formato original:",e),t})}function hx(n){return p(this,null,function*(){let e=URL.createObjectURL(n);try{return yield new Promise((t,r)=>{let i=new Image;i.onload=()=>t(i),i.onerror=()=>r(new Error("N\xE3o foi poss\xEDvel carregar a imagem para convers\xE3o.")),i.src=e})}finally{URL.revokeObjectURL(e)}})}function px(n){return n.includes("webp")?"webp":n.includes("avif")?"avif":n.includes("jpeg")?"jpg":n.includes("png")?"png":n.includes("gif")?"gif":"png"}var gx=["videoElement"],mx=["canvasElement"],vx=[[["","mobileGallerySelection",""]],[["","gallerySelection",""]],[["","gallerySelection",""]]],yx=["[mobileGallerySelection]","[gallerySelection]","[gallerySelection]"];function _x(n,e){n&1&&(I(0,"div",9),m(1," Preparando c\xE2mera... "),T())}function bx(n,e){if(n&1&&(I(0,"div",10),m(1),T()),n&2){let t=v(2);_(),oe(" ",t.error()," ")}}function Ex(n,e){if(n&1&&(I(0,"div",12),m(1),T()),n&2){let t=v(2);_(),oe(" ",t.countdown()," ")}}function wx(n,e){if(n&1){let t=H();I(0,"button",16),pe("click",function(){C(t);let i=v(2);return D(i.cycleCamera())}),I(1,"span",17),J(),I(2,"svg",18),xe(3,"path",32)(4,"path",33)(5,"path",34)(6,"path",35),T()(),De(),I(7,"span",21),m(8,"C\xC2MERA"),T()()}if(n&2){let t=v(2);at("disabled",!t.isStreaming())}}function Cx(n,e){n&1&&xe(0,"div",30)}function Dx(n,e){if(n&1){let t=H();I(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),pe("click",function(){C(t);let i=v();return D(i.toggleGridOverlay())}),xe(4,"video",8,0),M(6,_x,2,0,"div",9),M(7,bx,2,1,"div",10),xe(8,"div",11),M(9,Ex,2,1,"div",12),T(),I(10,"div",13),Ho(11),Ho(12,1),T()()(),I(13,"div",14)(14,"div",15)(15,"button",16),pe("click",function(){C(t);let i=v();return D(i.cycleTimerSetting())}),I(16,"span",17),J(),I(17,"svg",18),xe(18,"circle",19)(19,"polyline",20),T()(),De(),I(20,"span",21),m(21),Lf(22,"uppercase"),T()(),I(23,"div",22)(24,"button",23),pe("click",function(){C(t);let i=v();return D(i.captureImage())}),xe(25,"span",24)(26,"span",25)(27,"span",26)(28,"span",27),I(29,"span",28),m(30,"Capturar foto"),T()()(),M(31,wx,9,1,"button",29)(32,Cx,1,0,"div",30),T()(),xe(33,"canvas",31,1),T()}if(n&2){let t=v();Ie("capture--active",t.isCaptureActive())("capture--framed",t.showGrid())("capture--countdown",t.countdown()!==null&&t.countdown()>0),_(4),Ie("capture__video--hidden",!t.isStreaming()),_(2),N(!t.isStreaming()&&!t.error()?6:-1),_(),N(t.error()?7:-1),_(2),N(t.countdown()!==null&&t.countdown()>0?9:-1),_(6),at("disabled",!t.isStreaming()),_(6),Ce(Vf(22,15,t.timerLabel())),_(3),at("disabled",!t.isStreaming()||!t.captureAllowed()||t.isCaptureActive()),_(7),N(t.availableCameras().length>1?31:32)}}function Sx(n,e){if(n&1&&(I(0,"div",56)(1,"p",57),m(2,"Erro ao acessar a c\xE2mera:"),T(),I(3,"p",58),m(4),T()()),n&2){let t=v(2);ie("background-color",t.themeService.dialogPalette().inputBackground)("border","1px solid "+t.themeService.dialogPalette().inputBorder)("color",t.themeService.dialogPalette().text),_(3),ie("color",t.themeService.dialogPalette().muted),_(),Ce(t.error())}}function Ix(n,e){if(n&1&&(I(0,"div",43),J(),I(1,"svg",59),xe(2,"circle",60)(3,"path",61),T()()),n&2){let t=v(2);_(),Be("stroke",t.themeService.dialogPalette().icon)}}function Tx(n,e){if(n&1&&(I(0,"div",62),m(1),T()),n&2){let t=v(2);ie("color",t.themeService.isDark()?"#ffffff":"#0f172a"),_(),oe(" ",t.countdown()," ")}}function xx(n,e){if(n&1){let t=H();I(0,"button",63),pe("click",function(){C(t);let i=v(2);return D(i.cycleCamera())}),J(),I(1,"svg",64),xe(2,"path",65),T()()}if(n&2){let t=v(2);ie("background-color",t.isStreaming()?t.themeService.dialogPalette().inputBackground:t.themeService.dialogPalette().disabledBg)("border","1px solid "+t.themeService.dialogPalette().inputBorder)("color",t.isStreaming()?t.themeService.dialogPalette().text:t.themeService.dialogPalette().disabledText)("cursor",t.isStreaming()?"pointer":"not-allowed"),at("disabled",!t.isStreaming())}}function Ax(n,e){if(n&1){let t=H();I(0,"div",36),pe("click",function(i){return C(t),D(i.stopPropagation())}),I(1,"div",37)(2,"h2",38),m(3,"Capturar Foto"),T(),I(4,"button",39),pe("click",function(){C(t);let i=v();return D(i.close.emit())}),m(5," \xD7 "),T()(),M(6,Sx,5,9,"div",40),I(7,"div",41)(8,"div",42),M(9,Ix,4,1,"div",43),xe(10,"video",44,0),M(12,Tx,2,3,"div",45),T()(),I(13,"div",46),Ho(14,2),T(),I(15,"div",47)(16,"div",48)(17,"button",49),pe("click",function(){C(t);let i=v();return D(i.captureImage())}),I(18,"span"),m(19),T()(),I(20,"div",50)(21,"button",51),pe("click",function(){C(t);let i=v();return D(i.toggleTimer())}),J(),I(22,"svg",52),xe(23,"path",53),T()(),De(),I(24,"button",54),pe("click",function(){C(t);let i=v();return D(i.cycleTimerDuration())}),m(25),T(),M(26,xx,3,9,"button",55),T()()(),xe(27,"canvas",31,1),T()}if(n&2){let t=v();ie("background-color",t.themeService.dialogPalette().surface)("border","1px solid "+t.themeService.dialogPalette().border)("color",t.themeService.dialogPalette().text)("--dialog-focus-ring",t.themeService.dialogPalette().focusRing)("--vignette-color",t.themeService.isDark()?"rgba(0, 0, 0, 0.8)":"rgba(15, 23, 42, 0.35)"),Ie("capture--active",t.isCaptureActive())("capture--countdown",t.countdown()!==null&&t.countdown()>0)("capture--framed",t.showGrid()),_(2),ie("color",t.themeService.dialogPalette().title),_(2),ie("color",t.themeService.dialogPalette().icon),_(2),N(t.error()?6:-1),_(),ie("background-color",t.themeService.isDark()?"#000000":"#e2e8f0"),_(2),N(!t.isStreaming()&&!t.error()?9:-1),_(),Ie("capture-dialog__video--hidden",!t.isStreaming()),_(2),N(t.countdown()!==null&&t.countdown()>0?12:-1),_(5),ie("background-color",!t.isStreaming()||t.countdown()!==null?t.themeService.dialogPalette().disabledBg:t.themeService.dialogPalette().buttonPrimaryBg)("color",!t.isStreaming()||t.countdown()!==null?t.themeService.dialogPalette().disabledText:t.themeService.dialogPalette().buttonPrimaryText)("cursor",!t.isStreaming()||t.countdown()!==null?"not-allowed":"pointer"),at("disabled",!t.isStreaming()||t.countdown()!==null),_(2),Ce(t.isTimerEnabled()?"Iniciar Timer ("+t.timerDuration()+"s)":"Tirar Foto"),_(2),ie("background-color",t.isTimerEnabled()?t.themeService.dialogPalette().timerActiveBg:t.themeService.dialogPalette().timerInactiveBg)("color",t.isTimerEnabled()?t.themeService.dialogPalette().buttonPrimaryText:t.themeService.dialogPalette().timerInactiveText),_(3),ie("background-color",t.themeService.dialogPalette().inputBackground)("color",t.themeService.dialogPalette().text)("border","1px solid "+t.themeService.dialogPalette().inputBorder),_(),oe(" ",t.timerDuration(),"s "),_(),N(t.availableCameras().length>1?26:-1)}}var Vi=class Vi{constructor(){this.variant=ge("dialog");this.close=se();this.capture=se();this.prepareCapture=se();this.galleryChange=se();this.gallerySelectionRequest=se();this.captureAllowed=ge(!0);this.capturing=A(!1);this.isStreaming=A(!1);this.error=A(null);this.isTimerEnabled=A(!1);this.countdown=A(null);this.timerDurations=[3,5,10];this.timerDurationIndex=A(0);this.timerDuration=O(()=>this.timerDurations[this.timerDurationIndex()]);this.timerLabel=O(()=>this.isTimerEnabled()?`${this.timerDuration()}s`:"0s");this.availableCameras=A([]);this.selectedCameraId=A(null);this.isMobileVariant=O(()=>this.variant()==="mobile");this.showGrid=A(!1);this.isCaptureActive=O(()=>this.capturing()||this.countdown()!==null);this.videoElement=_r.required("videoElement");this.canvasElement=_r.required("canvasElement");this.themeService=R(dt);this.stream=null}handleSpacebar(e){let t=e.target;this.isTypingElement(t)||(e.preventDefault(),this.captureImage())}handleTimerShortcut(e){let t=e.target;this.isTypingElement(t)||(e.preventDefault(),this.toggleTimer())}isTypingElement(e){return!!e&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable||!!e.closest("input")||!!e.closest("textarea"))}ngAfterViewInit(){this.startCamera()}ngOnDestroy(){this.stopCamera(),this.countdownIntervalId&&clearInterval(this.countdownIntervalId)}reloadApp(){window.location.reload()}notifyGalleryChange(e){this.galleryChange.emit(e)}requestGallerySelection(){this.gallerySelectionRequest.emit()}toggleTimer(){this.isTimerEnabled.update(e=>!e)}cycleTimerDuration(){this.isTimerEnabled.set(!0),this.timerDurationIndex.update(e=>(e+1)%this.timerDurations.length)}cycleTimerSetting(){if(!this.isTimerEnabled()){this.isTimerEnabled.set(!0),this.timerDurationIndex.set(0);return}let e=this.timerDurationIndex()+1;e>=this.timerDurations.length?this.isTimerEnabled.set(!1):this.timerDurationIndex.set(e)}setCamera(e){return p(this,null,function*(){this.selectedCameraId()!==e&&(this.selectedCameraId.set(e),yield this.restartCamera())})}cycleCamera(){let e=this.availableCameras();if(e.length<=1)return;let t=this.selectedCameraId(),i=((t?e.findIndex(o=>o.deviceId===t):-1)+1)%e.length;this.setCamera(e[i].deviceId)}restartCamera(){return p(this,null,function*(){this.stopCamera(),yield this.startCamera()})}startCamera(){return p(this,null,function*(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("A API de m\xEDdia do navegador n\xE3o est\xE1 dispon\xEDvel.");let e={aspectRatio:1,width:{ideal:1280},height:{ideal:1280}},t={video:this.selectedCameraId()?Z(U({},e),{deviceId:{exact:this.selectedCameraId()}}):Z(U({},e),{facingMode:"environment"})};this.stream=yield navigator.mediaDevices.getUserMedia(t),this.videoElement().nativeElement.srcObject=this.stream,this.isStreaming.set(!0),this.error.set(null);let[r]=this.stream.getVideoTracks(),i=r?.getSettings().deviceId;i&&this.selectedCameraId.set(i),yield this.loadAvailableCameras()}catch(e){console.error("Erro ao iniciar a c\xE2mera: ",e);let t="N\xE3o foi poss\xEDvel acessar a c\xE2mera.";e.name==="NotAllowedError"||e.name==="PermissionDeniedError"?t="A permiss\xE3o para acessar a c\xE2mera foi negada.":(e.name==="NotFoundError"||e.name==="DevicesNotFoundError")&&(t="Nenhuma c\xE2mera foi encontrada no seu dispositivo."),this.error.set(t),this.isStreaming.set(!1)}})}stopCamera(){this.stream&&this.stream.getTracks().forEach(e=>e.stop()),this.isStreaming.set(!1)}captureImage(){if(!this.isStreaming()||!this.captureAllowed()||this.isCaptureActive())return;this.capturing.set(!0),this.prepareCapture.emit();let e=this.isTimerEnabled()?this.timerDuration():0;e>0?this.startCountdown(e):this.takePicture()}startCountdown(e){this.countdown.set(e),this.countdownIntervalId=setInterval(()=>{this.countdown.update(t=>t-1),this.countdown()===0&&(clearInterval(this.countdownIntervalId),this.takePicture(),this.countdown.set(null))},1e3)}loadAvailableCameras(){return p(this,null,function*(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return;let t=(yield navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput");if(this.availableCameras.set(t),t.length>0&&!this.selectedCameraId()){let r=t.find(i=>i.label.toLowerCase().includes("back"))??t[0];this.selectedCameraId.set(r.deviceId)}}catch(e){console.error("Erro ao carregar as c\xE2meras dispon\xEDveis:",e)}})}takePicture(){return p(this,null,function*(){if(!this.isStreaming()){this.capturing.set(!1);return}try{let e=this.videoElement().nativeElement,t=this.canvasElement().nativeElement,r=e.videoWidth,i=e.videoHeight,o=Math.min(r,i);t.width=o,t.height=o;let s=(r-o)/2,a=(i-o)/2,l=t.getContext("2d");if(!l){this.error.set("N\xE3o foi poss\xEDvel capturar a imagem.");return}l.drawImage(e,s,a,o,o,0,0,o,o);let c=yield this.canvasToBlob(t,"image/png");if(!c){this.error.set("N\xE3o foi poss\xEDvel capturar a imagem.");return}let{blob:u}=yield b0(c);try{let d=yield this.blobToDataUrl(u);this.capture.emit(d)}catch(d){console.error("Erro ao gerar pr\xE9-visualiza\xE7\xE3o da captura",d),this.error.set("N\xE3o foi poss\xEDvel processar a imagem capturada.")}}catch(e){console.error("Erro durante a captura da imagem",e),this.error()||this.error.set("N\xE3o foi poss\xEDvel capturar a imagem.")}finally{this.capturing.set(!1)}})}canvasToBlob(e,t){return new Promise(r=>{e.toBlob(r,t)})}blobToDataUrl(e){return new Promise((t,r)=>{let i=new FileReader;i.onloadend=()=>{let o=i.result;typeof o=="string"?t(o):r(new Error("Resultado inesperado ao converter blob em Data URL."))},i.onerror=()=>{r(new Error("Falha ao converter blob em Data URL."))},i.readAsDataURL(e)})}toggleGridOverlay(){this.showGrid.update(e=>!e)}};Vi.\u0275fac=function(t){return new(t||Vi)},Vi.\u0275cmp=Ge({type:Vi,selectors:[["app-webcam-capture"]],viewQuery:function(t,r){t&1&&(xn(r.videoElement,gx,5),xn(r.canvasElement,mx,5)),t&2&&$o(2)},hostBindings:function(t,r){t&1&&x("keydown.space",function(o){return r.handleSpacebar(o)},We)("keydown.r",function(o){return r.handleTimerShortcut(o)},We)},inputs:{variant:[1,"variant"],captureAllowed:[1,"captureAllowed"]},outputs:{close:"close",capture:"capture",prepareCapture:"prepareCapture",galleryChange:"galleryChange",gallerySelectionRequest:"gallerySelectionRequest"},ngContentSelectors:yx,decls:2,vars:1,consts:[["videoElement",""],["canvasElement",""],[1,"capture","capture--mobile",3,"capture--active","capture--framed","capture--countdown"],[1,"capture","capture--dialog","capture-dialog","animate-slide-up",3,"capture--active","capture--countdown","capture--framed","backgroundColor","border","color","--dialog-focus-ring","--vignette-color"],[1,"capture","capture--mobile"],[1,"capture__stage"],[1,"capture__stage-inner"],["data-cursor-pointer","",1,"capture__viewport",3,"click"],["autoplay","","playsinline","",1,"capture__video"],[1,"capture__status","capture__status--loading"],[1,"capture__status","capture__status--error"],["aria-hidden","true",1,"capture__overlay-frame"],[1,"capture__countdown","capture__countdown--mobile"],[1,"capture__gallery-slot"],[1,"capture__panel"],[1,"capture__control-board"],["type","button",1,"btn","btn--ghost","capture__chip",3,"click","disabled"],[1,"capture__chip-face"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"capture__chip-icon"],["cx","12","cy","12","r","9"],["points","12 7 12 12 15 13.5"],[1,"capture__chip-label"],[1,"capture__shutter-wrapper"],["type","button",1,"capture__shutter",3,"click","disabled"],[1,"capture__shutter-layer","capture__shutter-layer--frame"],[1,"capture__shutter-layer","capture__shutter-layer--body"],[1,"capture__shutter-layer","capture__shutter-layer--inner"],[1,"capture__shutter-layer","capture__shutter-layer--core"],[1,"sr-only"],["type","button",1,"btn","btn--ghost","capture__chip",3,"disabled"],["aria-hidden","true",1,"capture__control-placeholder"],["aria-hidden","true",1,"capture__canvas"],["d","M21 16.92A5.5 5.5 0 0 1 18.36 19H8"],["d","M3 12a5.5 5.5 0 0 1 5.5-5.5H16"],["d","M8 5l3-3 3 3"],["d","m16 19-3 3-3-3"],[1,"capture","capture--dialog","capture-dialog","animate-slide-up",3,"click"],[1,"capture-dialog__header"],[1,"capture-dialog__title"],["type","button","data-cursor-pointer","",1,"capture-dialog__close",3,"click"],[1,"capture-dialog__notice",3,"backgroundColor","border","color"],[1,"capture-dialog__preview","vignette-effect"],[1,"capture-dialog__preview-stage"],[1,"capture-dialog__loading"],["autoplay","","playsinline","",1,"capture-dialog__video"],[1,"capture__countdown","capture__countdown--dialog",3,"color"],[1,"capture-dialog__gallery-slot"],[1,"capture-dialog__footer","stack","stack--loose"],[1,"capture-dialog__primary-actions"],["type","button","data-cursor-pointer","",1,"capture-dialog__primary-button","button","button--block",2,"border","none",3,"click","disabled"],[1,"capture-dialog__toggles"],["type","button","data-cursor-pointer","","title","Ativar/Desativar timer",1,"capture-dialog__icon-button",2,"border","none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"capture-dialog__icon"],["stroke-linecap","round","stroke-linejoin","round","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["type","button","data-cursor-pointer","","title","Alternar dura\xE7\xE3o do timer",1,"capture-dialog__secondary-button",3,"click"],["type","button","data-cursor-pointer","","title","Alternar c\xE2mera",1,"capture-dialog__icon-button",3,"disabled","backgroundColor","border","color","cursor"],[1,"capture-dialog__notice"],[1,"capture-dialog__notice-title"],[1,"capture-dialog__notice-text"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"capture-dialog__spinner"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"capture__countdown","capture__countdown--dialog"],["type","button","data-cursor-pointer","","title","Alternar c\xE2mera",1,"capture-dialog__icon-button",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","1.5",1,"capture-dialog__icon"],["stroke-linecap","round","stroke-linejoin","round","d","M15 8h.01M4.13 7.21a2 2 0 011.74-1.21h2.17l1.12-1.68A2 2 0 0111.86 3h.28a2 2 0 011.7 1l1.12 2h2.18a2 2 0 011.74 1.21l1.73 3.99a2 2 0 01-.08 1.77l-1.1 1.9M7 16l-2 3m0 0l-2-3m2 3v-5m5.22 5a4 4 0 007.18-2"]],template:function(t,r){t&1&&(Pf(vx),M(0,Dx,35,17,"div",2)(1,Ax,29,47,"div",3)),t&2&&N(r.isMobileVariant()?0:1)},dependencies:[je,Yf],styles:['.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.vignette-effect[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;pointer-events:none;box-shadow:inset 0 0 40px 20px var(--vignette-color, rgba(0, 0, 0, .8));z-index:10}button[_ngcontent-%COMP%]:not(:disabled):hover{filter:brightness(1.05)}.capture__canvas[_ngcontent-%COMP%]{display:none}.capture-dialog__gallery-slot[_ngcontent-%COMP%]{margin-top:12px}.capture-dialog__selection-panel[_ngcontent-%COMP%]{display:grid;gap:8px;border:1px solid currentColor;border-radius:12px;padding:12px}.capture-dialog__selection-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.capture-dialog__selection-title[_ngcontent-%COMP%]{font-weight:600;margin:0}.capture-dialog__selection-hint[_ngcontent-%COMP%]{margin:0;opacity:.8;font-size:.9rem}.capture-dialog__selection-control[_ngcontent-%COMP%]{width:100%;padding:8px 10px;border-radius:8px;border:1px solid currentColor;background:transparent;color:inherit}.capture-dialog__selection-empty[_ngcontent-%COMP%]{padding:10px;border-radius:8px;border:1px dashed currentColor;font-size:.95rem}.capture-dialog__selection-description[_ngcontent-%COMP%]{margin:0;font-size:.95rem;opacity:.85}'],changeDetection:0});var vc=Vi;var A0=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ne(Uo),ne(Pt))};static \u0275dir=Ve({type:n})}return n})(),Mx=(()=>{class n extends A0{static \u0275fac=(()=>{let t;return function(i){return(t||(t=nl(n)))(i||n)}})();static \u0275dir=Ve({type:n,features:[Et]})}return n})(),Qh=new q("");var Nx={provide:Qh,useExisting:At(()=>Hi),multi:!0};function kx(){let n=kn()?kn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Rx=new q(""),Hi=(()=>{class n extends A0{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!kx())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ne(Uo),ne(Pt),ne(Rx,8))};static \u0275dir=Ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&x("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Mn([Nx]),Et]})}return n})();function Xh(n){return n==null||ep(n)===0}function ep(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ns=new q(""),Ac=new q(""),Ox=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_c=class{static min(e){return Px(e)}static max(e){return Fx(e)}static required(e){return M0(e)}static requiredTrue(e){return Lx(e)}static email(e){return Vx(e)}static minLength(e){return jx(e)}static maxLength(e){return Ux(e)}static pattern(e){return Gx(e)}static nullValidator(e){return bc()}static compose(e){return F0(e)}static composeAsync(e){return L0(e)}};function Px(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Fx(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function M0(n){return Xh(n.value)?{required:!0}:null}function Lx(n){return n.value===!0?null:{required:!0}}function Vx(n){return Xh(n.value)||Ox.test(n.value)?null:{email:!0}}function jx(n){return e=>{let t=e.value?.length??ep(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Ux(n){return e=>{let t=e.value?.length??ep(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Gx(n){if(!n)return bc;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Xh(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function bc(n){return null}function N0(n){return n!=null}function k0(n){return _i(n)?ro(n):n}function R0(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function O0(n,e){return e.map(t=>t(n))}function Bx(n){return!n.validate}function P0(n){return n.map(e=>Bx(e)?e:t=>e.validate(t))}function F0(n){if(!n)return null;let e=n.filter(N0);return e.length==0?null:function(t){return R0(O0(t,e))}}function tp(n){return n!=null?F0(P0(n)):null}function L0(n){if(!n)return null;let e=n.filter(N0);return e.length==0?null:function(t){let r=O0(t,e).map(k0);return lu(r).pipe(it(R0))}}function np(n){return n!=null?L0(P0(n)):null}function E0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function V0(n){return n._rawValidators}function j0(n){return n._rawAsyncValidators}function Yh(n){return n?Array.isArray(n)?n:[n]:[]}function Ec(n,e){return Array.isArray(n)?n.includes(e):n===e}function w0(n,e){let t=Yh(e);return Yh(n).forEach(i=>{Ec(t,i)||t.push(i)}),t}function C0(n,e){return Yh(e).filter(t=>!Ec(n,t))}var wc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=np(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},fn=class extends wc{name;get formDirective(){return null}get path(){return null}},Ur=class extends wc{_parent=null;name=null;valueAccessor=null},Cc=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Hx={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},q4=Z(U({},Hx),{"[class.ng-submitted]":"isSubmitted"}),Mc=(()=>{class n extends Cc{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ne(Ur,2))};static \u0275dir=Ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ie("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Et]})}return n})(),Nc=(()=>{class n extends Cc{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ne(fn,10))};static \u0275dir=Ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ie("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Et]})}return n})();var Ds="VALID",yc="INVALID",ji="PENDING",Ss="DISABLED",jn=class{},Dc=class extends jn{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ts=class extends jn{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},xs=class extends jn{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ui=class extends jn{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Sc=class extends jn{source;constructor(e){super(),this.source=e}},Ms=class extends jn{source;constructor(e){super(),this.source=e}};function rp(n){return(kc(n)?n.validators:n)||null}function $x(n){return Array.isArray(n)?tp(n):n||null}function ip(n,e){return(kc(e)?e.asyncValidators:n)||null}function zx(n){return Array.isArray(n)?np(n):n||null}function kc(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function U0(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[t])throw new G(1001,"")}function G0(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new G(1002,"")})}var Gi=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ht(this.statusReactive)}set status(e){ht(()=>this.statusReactive.set(e))}_status=O(()=>this.statusReactive());statusReactive=A(void 0);get valid(){return this.status===Ds}get invalid(){return this.status===yc}get pending(){return this.status==ji}get disabled(){return this.status===Ss}get enabled(){return this.status!==Ss}errors;get pristine(){return ht(this.pristineReactive)}set pristine(e){ht(()=>this.pristineReactive.set(e))}_pristine=O(()=>this.pristineReactive());pristineReactive=A(!0);get dirty(){return!this.pristine}get touched(){return ht(this.touchedReactive)}set touched(e){ht(()=>this.touchedReactive.set(e))}_touched=O(()=>this.touchedReactive());touchedReactive=A(!1);get untouched(){return!this.touched}_events=new Lt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(w0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(w0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(C0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(C0(e,this._rawAsyncValidators))}hasValidator(e){return Ec(this._rawValidators,e)}hasAsyncValidator(e){return Ec(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xs(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new xs(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ts(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ts(!0,r))}markAsPending(e={}){this.status=ji;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ui(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ss,this.errors=null,this._forEachChild(i=>{i.disable(Z(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dc(this.value,r)),this._events.next(new Ui(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ds,this._forEachChild(r=>{r.enable(Z(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ds||this.status===ji)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dc(this.value,t)),this._events.next(new Ui(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ss:Ds}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ji,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=k0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ui(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ne,this.statusChanges=new Ne}_calculateStatus(){return this._allControlsDisabled()?Ss:this.errors?yc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ji)?ji:this._anyControlsHaveStatus(yc)?yc:Ds}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ts(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xs(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$x(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=zx(this._rawAsyncValidators)}},Bi=class extends Gi{constructor(e,t,r){super(rp(t),ip(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){G0(this,!0,e),Object.keys(e).forEach(r=>{U0(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ms(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Zh=class extends Bi{};var ks=new q("",{providedIn:"root",factory:()=>Rc}),Rc="always";function B0(n,e){return[...e.path,n]}function Ic(n,e,t=Rc){op(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qx(n,e),Yx(n,e),Kx(n,e),Wx(n,e)}function D0(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Tc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Wx(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function op(n,e){let t=V0(n);e.validator!==null?n.setValidators(E0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=j0(n);e.asyncValidator!==null?n.setAsyncValidators(E0(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Tc(e._rawValidators,i),Tc(e._rawAsyncValidators,i)}function xc(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=V0(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=j0(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Tc(e._rawValidators,r),Tc(e._rawAsyncValidators,r),t}function qx(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&H0(n,e)})}function Kx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&H0(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function H0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Yx(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function $0(n,e){n==null,op(n,e)}function Zx(n,e){return xc(n,e)}function z0(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Jx(n){return Object.getPrototypeOf(n.constructor)===Mx}function W0(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function q0(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Hi?t=o:Jx(o)?r=o:i=o}),i||r||t||null}function Qx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Xx={provide:fn,useExisting:At(()=>sp)},Is=Promise.resolve(),sp=(()=>{class n extends fn{callSetDisabledState;get submitted(){return ht(this.submittedReactive)}_submitted=O(()=>this.submittedReactive());submittedReactive=A(!1);_directives=new Set;form;ngSubmit=new Ne;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Bi({},tp(t),np(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Is.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ic(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Is.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Is.then(()=>{let r=this._findContainer(t.path),i=new Bi({});$0(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Is.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Is.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),W0(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Sc(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ne(Ns,10),ne(Ac,10),ne(ks,8))};static \u0275dir=Ve({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&x("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Mn([Xx]),Et]})}return n})();function S0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function I0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var As=class extends Gi{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(rp(t),ip(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(I0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Ms(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){S0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){S0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){I0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var e1=n=>n instanceof As;var t1={provide:Ur,useExisting:At(()=>ap)},T0=Promise.resolve(),ap=(()=>{class n extends Ur{_changeDetectorRef;callSetDisabledState;control=new As;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ne;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=q0(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),z0(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ic(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){T0.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&$f(r);T0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?B0(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ne(fn,9),ne(Ns,10),ne(Ac,10),ne(Qh,10),ne(Hf,8),ne(ks,8))};static \u0275dir=Ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Mn([t1]),Et,In]})}return n})();var Oc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var K0=new q("");var n1={provide:fn,useExisting:At(()=>lp)},lp=(()=>{class n extends fn{callSetDisabledState;get submitted(){return ht(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=O(()=>this._submittedReactive());_submittedReactive=A(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ne;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Ic(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){D0(t.control||null,t,!1),Qx(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),W0(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Sc(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(D0(r||null,t),e1(i)&&(Ic(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);$0(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Zx(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){op(this.form,this),this._oldForm&&xc(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(ne(Ns,10),ne(Ac,10),ne(ks,8))};static \u0275dir=Ve({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&x("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Mn([n1]),Et,In]})}return n})();var r1={provide:Ur,useExisting:At(()=>cp)},cp=(()=>{class n extends Ur{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ne;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=q0(this,o)}ngOnChanges(t){this._added||this._setUpControl(),z0(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return B0(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(ne(fn,13),ne(Ns,10),ne(Ac,10),ne(Qh,10),ne(K0,8))};static \u0275dir=Ve({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Mn([r1]),Et,In]})}return n})();var i1=(()=>{class n{_validator=bc;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bc,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ve({type:n,features:[In]})}return n})();var o1={provide:Ns,useExisting:At(()=>Rs),multi:!0};var Rs=(()=>{class n extends i1{required;inputName="required";normalizeInput=$f;createValidator=t=>M0;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=nl(n)))(i||n)}})();static \u0275dir=Ve({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Be("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Mn([o1]),Et]})}return n})();var Y0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=an({type:n});static \u0275inj=Ut({})}return n})(),Jh=class extends Gi{constructor(e,t,r){super(rp(t),ip(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){G0(this,!1,e),e.forEach((r,i)=>{U0(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ms(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function x0(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Z0=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return x0(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Bi(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Zh(i,r)}control(t,r,i){let o={};return this.useNonNullable?(x0(r)?o=r:(o.validators=r,o.asyncValidators=i),new As(t,Z(U({},o),{nonNullable:!0}))):new As(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Jh(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof As)return t;if(t instanceof Gi)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var J0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ks,useValue:t.callSetDisabledState??Rc}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=an({type:n});static \u0275inj=Ut({imports:[Y0]})}return n})(),Q0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:K0,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ks,useValue:t.callSetDisabledState??Rc}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=an({type:n});static \u0275inj=Ut({imports:[Y0]})}return n})();var s1=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");function eb(n){return Array.from(n.querySelectorAll(s1)).filter(t=>!t.hasAttribute("inert")&&!t.closest("[inert]"))}function $i(n,e){let r=eb(n)[0]??e??null;r&&setTimeout(()=>r.focus())}function zi(n,e){if(n.key!=="Tab"||typeof document>"u")return!1;let t=eb(e);if(t.length===0)return!1;let r=document.activeElement,i=r?t.indexOf(r):-1,o=n.shiftKey,s;return i===-1?s=o?t.length-1:0:o?s=i===0?t.length-1:i-1:s=i===t.length-1?0:i+1,t[s].focus(),!0}var a1=["panel"],l1=["nameField"],c1=["closeButton"];function u1(n,e){if(n&1){let t=H();g(0,"button",20),x("click",function(){C(t);let i=v();return D(i.onDelete())}),m(1," Excluir "),y()}}var Wi=class Wi{constructor(){this.gallery=ge(null);this.save=se();this.delete=se();this.close=se();this.name="";this.description="";this.themeService=R(dt)}ngOnInit(){this.gallery()&&(this.name=this.gallery().name,this.description=this.gallery().description)}ngAfterViewInit(){let e=this.panel?.nativeElement;e&&$i(e,this.nameField?.nativeElement??this.closeButton?.nativeElement??null)}handleKeydown(e){let t=this.panel?.nativeElement;t&&zi(e,t)&&e.preventDefault()}onSubmit(){this.save.emit({id:this.gallery()?.id||null,name:this.name,description:this.description})}onDelete(){this.gallery()&&this.delete.emit(this.gallery().id)}};Wi.\u0275fac=function(t){return new(t||Wi)},Wi.\u0275cmp=Ge({type:Wi,selectors:[["app-gallery-editor"]],viewQuery:function(t,r){if(t&1&&(wt(a1,5),wt(l1,5),wt(c1,5)),t&2){let i;Ct(i=Dt())&&(r.panel=i.first),Ct(i=Dt())&&(r.nameField=i.first),Ct(i=Dt())&&(r.closeButton=i.first)}},inputs:{gallery:[1,"gallery"]},outputs:{save:"save",delete:"delete",close:"close"},decls:27,vars:35,consts:[["panel",""],["closeButton",""],["nameField",""],["tabindex","-1","data-cursor-pointer","",1,"modal",3,"click"],["role","dialog","aria-modal","true","aria-labelledby","gallery-editor-title",1,"modal__panel","modal__panel--medium","animate-slide-up",3,"click","keydown"],[1,"modal__header"],["id","gallery-editor-title",1,"modal__title"],["type","button","aria-label","Fechar","data-cursor-pointer","",1,"btn","btn--ghost","btn--icon","modal__close",3,"click"],[3,"ngSubmit"],[1,"modal__body"],[1,"form-field"],["for","name",1,"form-label"],["id","name","type","text","name","name","placeholder","Digite o nome da galeria","required","",1,"input",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","name","description","rows","3","placeholder","Digite a descri\xE7\xE3o da galeria","required","",1,"textarea",3,"ngModelChange","ngModel"],[1,"modal__footer","modal__footer--split"],["type","button","data-cursor-pointer","",1,"btn","btn--danger"],[1,"modal__footer-group"],["type","button","data-cursor-pointer","",1,"btn","btn--secondary",3,"click"],["type","submit","data-cursor-pointer","",1,"btn","btn--primary"],["type","button","data-cursor-pointer","",1,"btn","btn--danger",3,"click"]],template:function(t,r){if(t&1){let i=H();g(0,"div",3),x("click",function(){return C(i),D(r.close.emit())}),g(1,"article",4,0),x("click",function(s){return C(i),D(s.stopPropagation())})("keydown",function(s){return C(i),D(r.handleKeydown(s))}),g(3,"header",5)(4,"h2",6),m(5),y(),g(6,"button",7,1),x("click",function(){return C(i),D(r.close.emit())}),m(8," \xD7 "),y()(),g(9,"form",8),x("ngSubmit",function(){return C(i),D(r.onSubmit())}),g(10,"section",9)(11,"div",10)(12,"label",11),m(13,"Nome"),y(),g(14,"input",12,2),Wo("ngModelChange",function(s){return C(i),gl(r.name,s)||(r.name=s),D(s)}),y()(),g(16,"div",10)(17,"label",13),m(18,"Descri\xE7\xE3o"),y(),g(19,"textarea",14),Wo("ngModelChange",function(s){return C(i),gl(r.description,s)||(r.description=s),D(s)}),y()()(),g(20,"footer",15),M(21,u1,2,0,"button",16),g(22,"div",17)(23,"button",18),x("click",function(){return C(i),D(r.close.emit())}),m(24," Cancelar "),y(),g(25,"button",19),m(26),y()()()()()()}t&2&&(ie("background-color",r.themeService.scrimColor()),_(),ie("--modal-surface",r.themeService.dialogPalette().surface)("--modal-border",r.themeService.dialogPalette().border)("--modal-text",r.themeService.dialogPalette().text)("--modal-title",r.themeService.dialogPalette().title)("--modal-muted",r.themeService.dialogPalette().muted)("--modal-icon",r.themeService.dialogPalette().icon)("--input-background",r.themeService.dialogPalette().inputBackground)("--input-text",r.themeService.dialogPalette().inputText)("--input-border",r.themeService.dialogPalette().inputBorder)("--input-focus-ring",r.themeService.dialogPalette().focusRing)("--btn-primary-bg",r.themeService.dialogPalette().buttonPrimaryBg)("--btn-primary-text",r.themeService.dialogPalette().buttonPrimaryText)("--btn-secondary-bg",r.themeService.dialogPalette().buttonSecondaryBg)("--btn-secondary-text",r.themeService.dialogPalette().buttonSecondaryText),_(4),oe(" ",r.gallery()?"Editar Galeria":"Criar Galeria"," "),_(9),zo("ngModel",r.name),_(5),zo("ngModel",r.description),_(2),N(r.gallery()?21:-1),_(5),oe(" ",r.gallery()?"Atualizar":"Criar"," "))},dependencies:[je,J0,Oc,Hi,Mc,Nc,Rs,ap,sp],encapsulation:2,changeDetection:0});var Pc=Wi;var d1=["panel"],f1=["nameField"],h1=["closeButton"],qi=class qi{constructor(e){this.fb=e;this.close=new Ne;this.save=new Ne;this.themeService=R(dt);this.galleryForm=this.fb.group({name:["",_c.required],description:[""]})}ngAfterViewInit(){let e=this.panel?.nativeElement;e&&$i(e,this.nameField?.nativeElement??this.closeButton?.nativeElement??null)}handleKeydown(e){let t=this.panel?.nativeElement;t&&zi(e,t)&&e.preventDefault()}onSubmit(){this.galleryForm.valid&&(this.save.emit(this.galleryForm.value),this.onClose())}onClose(){this.close.emit()}};qi.\u0275fac=function(t){return new(t||qi)(ne(Z0))},qi.\u0275cmp=Ge({type:qi,selectors:[["app-gallery-creation-dialog"]],viewQuery:function(t,r){if(t&1&&(wt(d1,5),wt(f1,5),wt(h1,5)),t&2){let i;Ct(i=Dt())&&(r.panel=i.first),Ct(i=Dt())&&(r.nameField=i.first),Ct(i=Dt())&&(r.closeButton=i.first)}},outputs:{close:"close",save:"save"},decls:25,vars:36,consts:[["panel",""],["closeButton",""],["nameField",""],["tabindex","-1","data-cursor-pointer","",1,"modal",3,"click"],["role","dialog","aria-modal","true","aria-labelledby","gallery-creation-title",1,"modal__panel","modal__panel--medium","animate-slide-up",3,"click","keydown"],[1,"modal__header"],["id","gallery-creation-title",1,"modal__title"],["type","button","aria-label","Fechar","data-cursor-pointer","",1,"btn","btn--ghost","btn--icon","modal__close",3,"click"],[3,"ngSubmit","formGroup"],[1,"modal__body"],[1,"form-field"],["for","name",1,"form-label"],["id","name","type","text","formControlName","name","placeholder","Digite o nome da galeria","required","",1,"input"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3","placeholder","Digite a descri\xE7\xE3o da galeria","required","",1,"textarea"],[1,"modal__footer"],["type","button","data-cursor-pointer","",1,"btn","btn--secondary",3,"click"],["type","submit","data-cursor-pointer","",1,"btn","btn--primary",3,"disabled"]],template:function(t,r){if(t&1){let i=H();g(0,"div",3),x("click",function(){return C(i),D(r.onClose())}),g(1,"article",4,0),x("click",function(s){return C(i),D(s.stopPropagation())})("keydown",function(s){return C(i),D(r.handleKeydown(s))}),g(3,"header",5)(4,"h2",6),m(5,"Criar Galeria"),y(),g(6,"button",7,1),x("click",function(){return C(i),D(r.onClose())}),m(8," \xD7 "),y()(),g(9,"form",8),x("ngSubmit",function(){return C(i),D(r.onSubmit())}),g(10,"section",9)(11,"div",10)(12,"label",11),m(13,"Nome"),y(),Y(14,"input",12,2),y(),g(16,"div",10)(17,"label",13),m(18,"Descri\xE7\xE3o"),y(),Y(19,"textarea",14),y()(),g(20,"footer",15)(21,"button",16),x("click",function(){return C(i),D(r.onClose())}),m(22," Cancelar "),y(),g(23,"button",17),m(24," Criar "),y()()()()()}t&2&&(ie("background-color",r.themeService.scrimColor()),_(),ie("--modal-surface",r.themeService.dialogPalette().surface)("--modal-border",r.themeService.dialogPalette().border)("--modal-text",r.themeService.dialogPalette().text)("--modal-title",r.themeService.dialogPalette().title)("--modal-muted",r.themeService.dialogPalette().muted)("--modal-icon",r.themeService.dialogPalette().icon)("--input-background",r.themeService.dialogPalette().inputBackground)("--input-text",r.themeService.dialogPalette().inputText)("--input-border",r.themeService.dialogPalette().inputBorder)("--input-focus-ring",r.themeService.dialogPalette().focusRing)("--btn-primary-bg",r.themeService.dialogPalette().buttonPrimaryBg)("--btn-primary-text",r.themeService.dialogPalette().buttonPrimaryText)("--btn-secondary-bg",r.themeService.dialogPalette().buttonSecondaryBg)("--btn-secondary-text",r.themeService.dialogPalette().buttonSecondaryText)("--btn-disabled-bg",r.themeService.dialogPalette().disabledBg)("--btn-disabled-text",r.themeService.dialogPalette().disabledText),_(8),j("formGroup",r.galleryForm),_(14),j("disabled",r.galleryForm.invalid))},dependencies:[je,Q0,Oc,Hi,Mc,Nc,Rs,lp,cp],encapsulation:2});var Fc=qi;var p1=["panel"],g1=["closeButton"],Ki=class Ki{constructor(){this.close=se();this.themeService=R(dt)}ngAfterViewInit(){let e=this.panel?.nativeElement;e&&$i(e,this.closeButton?.nativeElement??null)}handleKeydown(e){let t=this.panel?.nativeElement;t&&zi(e,t)&&e.preventDefault()}};Ki.\u0275fac=function(t){return new(t||Ki)},Ki.\u0275cmp=Ge({type:Ki,selectors:[["app-info-dialog"]],viewQuery:function(t,r){if(t&1&&(wt(p1,5),wt(g1,5)),t&2){let i;Ct(i=Dt())&&(r.panel=i.first),Ct(i=Dt())&&(r.closeButton=i.first)}},outputs:{close:"close"},decls:107,vars:24,consts:[["panel",""],["closeButton",""],["tabindex","-1","data-cursor-pointer","",1,"modal","modal--stacked"],["role","dialog","aria-modal","true","aria-labelledby","info-dialog-title",1,"modal__panel","modal__panel--full","animate-slide-up","info-dialog",3,"click","keydown"],[1,"modal__header","modal__header--flush","info-dialog__header"],["id","info-dialog-title",1,"info-dialog__title"],["type","button","aria-label","Fechar","data-cursor-pointer","",1,"btn","btn--ghost","btn--icon","modal__close",3,"click"],[1,"modal__body","modal__body--padded","info-dialog__body"],[1,"info-dialog__layout"],[1,"info-dialog__column"],[1,"info-dialog__section-title"],[1,"info-dialog__copy"],[1,"info-dialog__stack"],[1,"info-dialog__list-title"],[1,"info-dialog__list"],[1,"badge","badge--mono"],[1,"info-dialog__copy","info-dialog__copy--stacked"],[1,"info-dialog__highlight"],[1,"info-dialog__muted"],["href","https://www.linkedin.com/in/bolivaralencastro/","target","_blank","rel","noopener noreferrer","data-cursor-pointer","",1,"info-dialog__link"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"info-dialog__icon"],["d","M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"],[1,"info-dialog__footer"],[1,"info-dialog__footnote"]],template:function(t,r){if(t&1){let i=H();I(0,"div",2)(1,"article",3,0),pe("click",function(s){return C(i),D(s.stopPropagation())})("keydown",function(s){return C(i),D(r.handleKeydown(s))}),I(3,"header",4)(4,"h1",5),m(5,"SOBRE O PROJETO"),T(),I(6,"button",6,1),pe("click",function(){return C(i),D(r.close.emit())}),m(8," \xD7 "),T()(),I(9,"main",7)(10,"div",8)(11,"section",9)(12,"h2",10),m(13,"Apresenta\xE7\xE3o"),T(),I(14,"div",11)(15,"p"),m(16," O Angular Kinetic Gallery \xE9 uma galeria de fotos interativa desenvolvida com Angular, oferecendo uma experi\xEAncia \xFAnica de navega\xE7\xE3o e visualiza\xE7\xE3o de imagens. "),T(),I(17,"p"),m(18," Este projeto permite criar m\xFAltiplas galerias personalizadas, capturar fotos diretamente da c\xE2mera do dispositivo, e organizar suas imagens em uma interface cin\xE9tica e din\xE2mica. "),T(),I(19,"p"),m(20," Os dados s\xE3o armazenados localmente no navegador, garantindo privacidade e acesso r\xE1pido \xE0s suas galerias. "),T()()(),I(21,"section",9)(22,"h2",10),m(23,"Comandos e Atalhos"),T(),I(24,"div",12)(25,"div")(26,"h3",13),m(27,"Navega\xE7\xE3o"),T(),I(28,"ul",14)(29,"li")(30,"span",15),m(31,"\u2191"),T(),m(32," Mover para cima"),T(),I(33,"li")(34,"span",15),m(35,"\u2193"),T(),m(36," Mover para baixo"),T(),I(37,"li")(38,"span",15),m(39,"\u2190"),T(),m(40," Mover para esquerda"),T(),I(41,"li")(42,"span",15),m(43,"\u2192"),T(),m(44," Mover para direita"),T()()(),I(45,"div")(46,"h3",13),m(47,"A\xE7\xF5es"),T(),I(48,"ul",14)(49,"li")(50,"span",15),m(51,"G"),T(),m(52," Criar galeria (na view de galerias)"),T(),I(53,"li")(54,"span",15),m(55,"Espa\xE7o"),T(),m(56," Capturar foto (na view de fotos)"),T(),I(57,"li")(58,"span",15),m(59,"T"),T(),m(60," Alternar tema claro/escuro"),T(),I(61,"li")(62,"span",15),m(63,"R"),T(),m(64," Ativar/desativar timer na c\xE2mera"),T(),I(65,"li")(66,"span",15),m(67,"F"),T(),m(68," Alternar tela cheia"),T(),I(69,"li")(70,"span",15),m(71,"ESC"),T(),m(72," Fechar di\xE1logos ou sair de tela cheia"),T(),I(73,"li")(74,"span",15),m(75,"I"),T(),m(76," Abrir esta janela de informa\xE7\xF5es"),T()()(),I(77,"div")(78,"h3",13),m(79,"Mouse"),T(),I(80,"ul",14)(81,"li"),m(82,"Clique direito - Abrir menu de contexto"),T(),I(83,"li"),m(84,"Arrastar - Mover pela galeria (quando habilitado)"),T(),I(85,"li"),m(86,"Clique em galeria - Visualizar fotos da galeria"),T(),I(87,"li"),m(88,"Clique em foto - Expandir foto"),T()()()()(),I(89,"section",9)(90,"h2",10),m(91,"Autor"),T(),I(92,"div",16)(93,"div")(94,"p",17),m(95,"Bol\xEDvar Alencastro"),T(),I(96,"p",18),m(97,"Product Designer"),T()(),I(98,"div")(99,"a",19),J(),I(100,"svg",20),xe(101,"path",21),T(),De(),I(102,"span"),m(103,"LinkedIn"),T()()(),I(104,"footer",22)(105,"p",23),m(106," \xA9 2024 Bol\xEDvar Alencastro. Todos os direitos reservados. "),T()()()()()()()()}t&2&&(ie("background-color",r.themeService.scrimColor()),_(),ie("--modal-surface",r.themeService.dialogPalette().surface)("--modal-border",r.themeService.dialogPalette().border)("--modal-text",r.themeService.dialogPalette().text)("--modal-title",r.themeService.dialogPalette().title)("--modal-muted",r.themeService.dialogPalette().muted)("--modal-icon",r.themeService.dialogPalette().icon)("--badge-background",r.themeService.dialogPalette().inputBackground)("--badge-text",r.themeService.dialogPalette().inputText)("--modal-header-surface",r.themeService.theme()==="dark"?"rgba(0,0,0,0.3)":"rgba(241,245,249,0.85)"),_(103),ie("border-color",r.themeService.dialogPalette().border),_(),ie("color",r.themeService.dialogPalette().muted))},dependencies:[je],styles:["[_nghost-%COMP%]{display:contents}.info-dialog__header[_ngcontent-%COMP%]{align-items:center}.info-dialog__title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;letter-spacing:.2em;text-transform:uppercase;color:var(--modal-title, var(--dialog-title))}.info-dialog__body[_ngcontent-%COMP%]{background-color:var(--modal-surface, var(--dialog-surface));color:var(--modal-text, var(--dialog-text))}.info-dialog__layout[_ngcontent-%COMP%]{display:grid;gap:3rem;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));max-width:80rem;margin:0 auto}.info-dialog__column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;max-width:22rem}.info-dialog__section-title[_ngcontent-%COMP%]{margin:0;font-size:.85rem;font-weight:600;letter-spacing:.15em;text-transform:uppercase;color:var(--modal-title, var(--dialog-title))}.info-dialog__copy[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;line-height:1.7;font-size:.95rem}.info-dialog__copy--stacked[_ngcontent-%COMP%]{gap:1.5rem}.info-dialog__highlight[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.1rem;font-weight:600;color:var(--modal-title, var(--dialog-title))}.info-dialog__muted[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:var(--modal-muted, var(--dialog-muted))}.info-dialog__stack[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.info-dialog__list-title[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.85rem;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:var(--modal-title, var(--dialog-title))}.info-dialog__list[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;display:flex;flex-direction:column;gap:.75rem;font-size:.9rem}.info-dialog__list[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-right:.75rem}.info-dialog__link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;color:var(--modal-title, var(--dialog-title));text-decoration:none;transition:color .2s ease}.info-dialog__link[_ngcontent-%COMP%]:hover{color:var(--modal-text, var(--dialog-text))}.info-dialog__icon[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.info-dialog__footer[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--modal-border, var(--dialog-border))}.info-dialog__footnote[_ngcontent-%COMP%]{margin:0;font-size:.75rem}@media (max-width: 768px){.info-dialog__layout[_ngcontent-%COMP%]{gap:2.25rem}.info-dialog__column[_ngcontent-%COMP%]{max-width:none}}"],changeDetection:0});var Lc=Ki;function m1(n,e){if(n&1&&(I(0,"span",7),m(1),T()),n&2){let t=v();_(),Ce(t.formatCreatedAt(t.gallery().createdAt))}}var Yi=class Yi{constructor(){this.gallery=ge.required();this.coverUrl=ge.required();this.active=ge(!1);this.selectable=ge(!0);this.showActiveIndicator=ge(!0);this.viewLabel=ge("Abrir galeria");this.select=se();this.open=se()}handleSelect(e){this.selectable()&&(e.stopPropagation(),this.select.emit())}handleOpen(e){e.stopPropagation(),this.open.emit()}formatCreatedAt(e){if(!e)return;let[t,r,i]=e.split("/");if(!t||!r||!i)return e;let o=i.slice(-2);return`${t}/${r}/${o}`}};Yi.\u0275fac=function(t){return new(t||Yi)},Yi.\u0275cmp=Ge({type:Yi,selectors:[["app-mobile-gallery-card"]],inputs:{gallery:[1,"gallery"],coverUrl:[1,"coverUrl"],active:[1,"active"],selectable:[1,"selectable"],showActiveIndicator:[1,"showActiveIndicator"],viewLabel:[1,"viewLabel"]},outputs:{select:"select",open:"open"},decls:16,vars:12,consts:[[1,"card","card--gallery",3,"click"],[1,"card__avatar"],["loading","lazy",1,"card__image",3,"src"],[1,"card__content"],[1,"card__title"],[1,"card__description"],[1,"card__meta"],[1,"badge","badge--mono","card__badge"],["type","button","data-cursor-pointer","",1,"card__action",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","role","img",1,"card__action-icon"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M2.25 12s2.608-6.75 9.75-6.75 9.75 6.75 9.75 6.75-2.608 6.75-9.75 6.75S2.25 12 2.25 12Z"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"]],template:function(t,r){t&1&&(I(0,"article",0),pe("click",function(o){return r.handleSelect(o)}),I(1,"div",1),xe(2,"img",2),T(),I(3,"div",3)(4,"h3",4),m(5),T(),I(6,"p",5),m(7),T(),I(8,"div",6),M(9,m1,2,1,"span",7),I(10,"span",7),m(11),T()()(),I(12,"button",8),pe("click",function(o){return r.handleOpen(o)}),J(),I(13,"svg",9),xe(14,"path",10)(15,"path",11),T()()()),t&2&&(Ie("is-selectable",r.selectable())("is-active",r.showActiveIndicator()&&r.active()),Be("data-cursor-pointer",r.selectable()?"":null),_(2),at("src",r.coverUrl(),Tn),Be("alt","Pr\xE9via da galeria "+r.gallery().name),_(3),Ce(r.gallery().name),_(2),oe(" ",r.gallery().description||"Sem descri\xE7\xE3o"," "),_(2),N(r.gallery().createdAt?9:-1),_(2),Ce(r.gallery().imageUrls.length),_(),Be("aria-label",r.viewLabel()))},dependencies:[je],encapsulation:2,changeDetection:0});var Vc=Yi;function v1(n,e){if(n&1&&(I(0,"div",20),m(1),T()),n&2){let t=v();_(),oe(" ",t.error()," ")}}function y1(n,e){n&1&&m(0," Excluindo... ")}function _1(n,e){n&1&&m(0," Excluir conta ")}var Zi=class Zi{constructor(){this.close=se();this.confirmDelete=se();this.isDeleting=ge(!1);this.error=ge(null);this.acknowledgeIrreversibility=A(!1);this.confirmationPhrase=A("");this.themeService=R(dt);this.isDeletionDisabled=O(()=>{if(this.isDeleting())return!0;let e=this.confirmationPhrase().trim().toUpperCase();return!this.acknowledgeIrreversibility()||e!=="DELETAR"})}submitDeletion(){this.isDeletionDisabled()||this.confirmDelete.emit()}onAcknowledgeChange(e){let t=e.target;this.acknowledgeIrreversibility.set(t?.checked??!1)}onConfirmationInput(e){let t=e.target;this.confirmationPhrase.set(t?.value??"")}};Zi.\u0275fac=function(t){return new(t||Zi)},Zi.\u0275cmp=Ge({type:Zi,selectors:[["app-settings-dialog"]],inputs:{isDeleting:[1,"isDeleting"],error:[1,"error"]},outputs:{close:"close",confirmDelete:"confirmDelete"},decls:49,vars:39,consts:[["tabindex","-1","data-cursor-pointer","",1,"modal",3,"click"],["role","dialog","aria-modal","true","aria-labelledby","settings-dialog-title",1,"modal__panel","modal__panel--medium","animate-slide-up","settings-dialog__panel",3,"click"],[1,"modal__header"],[1,"settings-dialog__title-wrapper"],[1,"settings-dialog__eyebrow"],["id","settings-dialog-title",1,"modal__title"],["type","button","aria-label","Fechar","data-cursor-pointer","",1,"btn","btn--ghost","btn--icon","modal__close",3,"click"],[1,"modal__body","settings-dialog__body"],["role","group","aria-labelledby","account-deletion-title",1,"settings-dialog__card"],[1,"settings-dialog__card-header"],["id","account-deletion-title",1,"settings-dialog__card-title"],[1,"settings-dialog__badge"],[1,"settings-dialog__description"],[1,"settings-dialog__list"],["aria-live","polite",1,"settings-dialog__confirmations"],[1,"settings-dialog__checkbox"],["type","checkbox",3,"change","checked"],[1,"settings-dialog__input"],[1,"settings-dialog__input-label"],["type","text","placeholder","DELETAR","autocomplete","off",1,"form-field__input","settings-dialog__text-input",3,"input","value"],[1,"alert","alert--danger","settings-dialog__alert"],[1,"modal__footer","modal__footer--split"],[1,"settings-dialog__footer-copy"],[1,"settings-dialog__helper"],[1,"modal__footer-group"],["type","button","data-cursor-pointer","",1,"btn","btn--secondary",3,"click"],["type","button","data-cursor-pointer","",1,"btn","btn--danger",3,"click","disabled"]],template:function(t,r){t&1&&(I(0,"div",0),pe("click",function(){return r.close.emit()}),I(1,"article",1),pe("click",function(o){return o.stopPropagation()}),I(2,"header",2)(3,"div",3)(4,"p",4),m(5,"Configura\xE7\xF5es"),T(),I(6,"h2",5),m(7,"Gerenciar conta"),T()(),I(8,"button",6),pe("click",function(){return r.close.emit()}),m(9," \xD7 "),T()(),I(10,"section",7)(11,"article",8)(12,"div",9)(13,"div")(14,"p",4),m(15,"Conta"),T(),I(16,"h3",10),m(17,"Excluir conta"),T()(),I(18,"span",11),m(19,"A\xE7\xE3o irrevers\xEDvel"),T()(),I(20,"p",12),m(21," Esta a\xE7\xE3o remove definitivamente seus dados e galerias sincronizadas. As imagens armazenadas ser\xE3o apagadas do servidor e do seu navegador. Certifique-se de exportar qualquer conte\xFAdo que deseje manter. "),T(),I(22,"ul",13)(23,"li"),m(24,"Suas galerias e fotos ser\xE3o removidas do Supabase."),T(),I(25,"li"),m(26,"Uploads pendentes e cache local ser\xE3o descartados."),T(),I(27,"li"),m(28,"Voc\xEA ser\xE1 desconectado imediatamente ap\xF3s a confirma\xE7\xE3o."),T()(),I(29,"div",14)(30,"label",15)(31,"input",16),pe("change",function(o){return r.onAcknowledgeChange(o)}),T(),I(32,"span"),m(33,"Entendo que esta a\xE7\xE3o n\xE3o pode ser desfeita."),T()(),I(34,"label",17)(35,"span",18),m(36,'Digite "DELETAR" para confirmar'),T(),I(37,"input",19),pe("input",function(o){return r.onConfirmationInput(o)}),T()()(),M(38,v1,2,1,"div",20),T()(),I(39,"footer",21)(40,"div",22)(41,"p",23),m(42,"Ap\xF3s a exclus\xE3o voc\xEA ser\xE1 redirecionado para a \xE1rea p\xFAblica."),T()(),I(43,"div",24)(44,"button",25),pe("click",function(){return r.close.emit()}),m(45," Cancelar "),T(),I(46,"button",26),pe("click",function(){return r.submitDeletion()}),M(47,y1,1,0)(48,_1,1,0),T()()()()()),t&2&&(ie("background-color",r.themeService.scrimColor()),_(),ie("--modal-surface",r.themeService.dialogPalette().surface)("--modal-border",r.themeService.dialogPalette().border)("--modal-text",r.themeService.dialogPalette().text)("--modal-title",r.themeService.dialogPalette().title)("--modal-muted",r.themeService.dialogPalette().muted)("--modal-icon",r.themeService.dialogPalette().icon)("--input-background",r.themeService.dialogPalette().inputBackground)("--input-text",r.themeService.dialogPalette().inputText)("--input-border",r.themeService.dialogPalette().inputBorder)("--input-focus-ring",r.themeService.dialogPalette().focusRing)("--btn-primary-bg",r.themeService.dialogPalette().buttonPrimaryBg)("--btn-primary-text",r.themeService.dialogPalette().buttonPrimaryText)("--btn-secondary-bg",r.themeService.dialogPalette().buttonSecondaryBg)("--btn-secondary-text",r.themeService.dialogPalette().buttonSecondaryText)("--btn-danger-bg",r.themeService.dialogPalette().buttonDangerBg)("--btn-danger-text",r.themeService.dialogPalette().buttonDangerText),_(30),at("checked",r.acknowledgeIrreversibility()),_(6),at("value",r.confirmationPhrase()),_(),N(r.error()?38:-1),_(8),at("disabled",r.isDeletionDisabled()),_(),N(r.isDeleting()?47:48))},dependencies:[je],styles:[".settings-dialog__panel[_ngcontent-%COMP%]{gap:1rem}.settings-dialog__title-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.15rem}.settings-dialog__eyebrow[_ngcontent-%COMP%]{margin:0;font-size:.8rem;letter-spacing:.12em;text-transform:uppercase;color:var(--modal-muted, var(--dialog-muted))}.settings-dialog__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.settings-dialog__card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1.25rem;border:1px solid var(--modal-border, var(--dialog-border));border-radius:.75rem;background:var(--modal-surface, var(--dialog-surface));box-shadow:inset 0 1px #ffffff0a}.settings-dialog__card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem}.settings-dialog__card-title[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;letter-spacing:.04em}.settings-dialog__badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;padding:.35rem .75rem;border-radius:999px;background:#f871711f;color:#ef4444;font-weight:700;letter-spacing:.08em;text-transform:uppercase;font-size:.75rem}.settings-dialog__description[_ngcontent-%COMP%]{margin:0;color:var(--modal-text, var(--dialog-text));line-height:1.6}.settings-dialog__list[_ngcontent-%COMP%]{margin:0;padding-left:1.25rem;display:grid;gap:.4rem;color:var(--modal-muted, var(--dialog-muted))}.settings-dialog__confirmations[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding:1rem;border-radius:.75rem;border:1px dashed var(--modal-border, var(--dialog-border));background:var(--modal-header-surface, rgba(0,0,0,.02))}.settings-dialog__checkbox[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:.5rem;align-items:center;color:var(--modal-text, var(--dialog-text));font-weight:600}.settings-dialog__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:1rem;height:1rem}.settings-dialog__input[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.settings-dialog__input-label[_ngcontent-%COMP%]{font-size:.85rem;letter-spacing:.04em;color:var(--modal-muted, var(--dialog-muted))}.settings-dialog__text-input[_ngcontent-%COMP%]{width:100%}.settings-dialog__alert[_ngcontent-%COMP%]{margin:.25rem 0 0}.settings-dialog__footer-copy[_ngcontent-%COMP%]{max-width:20rem}.settings-dialog__helper[_ngcontent-%COMP%]{margin:0;color:var(--modal-muted, var(--dialog-muted));font-size:.9rem}@media (max-width: 600px){.settings-dialog__card[_ngcontent-%COMP%]{padding:1rem}.settings-dialog__card-header[_ngcontent-%COMP%]{align-items:flex-start;flex-direction:column}.settings-dialog__footer-copy[_ngcontent-%COMP%]{display:none}}"],changeDetection:0});var jc=Zi;var tb="[data-cursor-pointer]",nb=(n,e)=>({x:n,y:e,lerp(t,r){this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r}}),Uc=class{constructor(e){this.position={target:nb(window.innerWidth/2,window.innerHeight/2),current:nb(window.innerWidth/2,window.innerHeight/2),lerpAmount:.15};this.animationFrameId=null;this.updateCallback=()=>this.update();this.pointerMoveHandler=e=>{this.position.target.x=e.clientX,this.position.target.y=e.clientY};this.pointerEnterHandler=e=>{let t=e.target;if(!(t instanceof Element))return;t.closest(tb)instanceof HTMLElement&&this.cursorElement.classList.add("pointer-hover")};this.pointerLeaveHandler=e=>{let t=e.target;if(!(t instanceof Element)){this.cursorElement.classList.remove("pointer-hover");return}t.closest(tb)instanceof HTMLElement&&this.cursorElement.classList.remove("pointer-hover")};let t=document.querySelector(e);if(!t)throw new Error(`InteractiveCursor: elemento n\xE3o encontrado para o seletor "${e}".`);this.cursorElement=t,this.init()}init(){this.cursorElement.style.transform="translate(-50%, -50%)",this.animationFrameId=window.requestAnimationFrame(this.updateCallback),document.addEventListener("pointermove",this.pointerMoveHandler),document.addEventListener("pointerenter",this.pointerEnterHandler,!0),document.addEventListener("pointerleave",this.pointerLeaveHandler,!0)}destroy(){document.removeEventListener("pointermove",this.pointerMoveHandler),document.removeEventListener("pointerenter",this.pointerEnterHandler,!0),document.removeEventListener("pointerleave",this.pointerLeaveHandler,!0),this.animationFrameId!==null&&(window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}update(){this.position.current.lerp(this.position.target,this.position.lerpAmount);let{x:e,y:t}=this.position.current;this.cursorElement.style.transform=`translate(${e}px, ${t}px) translate(-50%, -50%)`,this.animationFrameId=window.requestAnimationFrame(this.updateCallback)}};var Gr=class Gr{constructor(){this.authService=R(ut)}getSession(){return p(this,null,function*(){yield this.authService.initialize();let e=this.authService.session();return e?.accessToken?{accessToken:e.accessToken,tokenType:e.tokenType}:null})}signOut(){return p(this,null,function*(){yield this.authService.signOut()})}clearLocalSession(){this.authService.resetState()}};Gr.\u0275fac=function(t){return new(t||Gr)},Gr.\u0275prov=Q({token:Gr,factory:Gr.\u0275fac,providedIn:"root"});var Gc=Gr;var Br=class Br{constructor(){this.authService=R(ut);this.galleryService=R(Fi);this.hasGalleryForCurrentUser=O(()=>{if(this.galleryService.currentUserGalleryId())return!0;let t=this.authService.ownerId()?.trim();return t?this.galleryService.galleries().some(r=>r.ownerId?.trim()===t):!1});this.selectedGallery=O(()=>{let e=this.galleryService.selectedGalleryId();return e?this.galleryService.getGallery(e)??null:null});this.canManageContent=O(()=>this.authService.canManageContent());this.canCreateOwnGallery=O(()=>this.authService.isAuthenticated()&&!this.canManageContent()&&!this.hasGalleryForCurrentUser());this.canCreateGalleries=O(()=>this.canManageContent()||this.canCreateOwnGallery());this.canViewMobileGalleryList=O(()=>this.canCreateGalleries());this.canManageSelectedGallery=O(()=>this.canEditGalleryById(this.galleryService.selectedGalleryId()));this.canEditSelectedGallery=O(()=>this.canEditGalleryFromEntity(this.selectedGallery()));this.canUploadToSelectedGallery=O(()=>this.canUploadToGalleryFromEntity(this.selectedGallery()));this.canDeleteSelectedGallery=O(()=>this.canEditGalleryFromEntity(this.selectedGallery()));this.canCaptureInSelectedGallery=O(()=>this.canUploadToGalleryById(this.galleryService.selectedGalleryId()));this.canDeletePhotoFromSelectedGallery=O(()=>this.canDeletePhotoById(this.galleryService.selectedGalleryId()));this.canUseCaptureDialog=O(()=>this.canUploadToSelectedGallery()||this.canCreateGalleries())}canManageGalleryById(e){return this.canEditGalleryById(e)}canEditGalleryById(e){let t=this.resolveGallery(e);return this.canEditGalleryFromEntity(t)}canUploadToGalleryById(e){let t=this.resolveGallery(e);return this.canUploadToGalleryFromEntity(t)}canDeletePhotoById(e){let t=this.resolveGallery(e);return this.canDeletePhotoFromEntity(t)}canCaptureInGallery(e){return this.canUploadToGalleryById(e)}resolveGallery(e){return e?this.galleryService.getGallery(e)??null:null}canEditGalleryFromEntity(e){return this.computeGalleryPermission(e,"canEditGallery")}canUploadToGalleryFromEntity(e){return this.computeGalleryPermission(e,"canUploadToGallery")}canDeletePhotoFromEntity(e){return this.computeGalleryPermission(e,"canDeletePhoto")}computeGalleryPermission(e,t){if(!e)return!1;let r=e[t];return typeof r=="boolean"?r:this.authService.canManageGallery(e.ownerId??"")}};Br.\u0275fac=function(t){return new(t||Br)},Br.\u0275prov=Q({token:Br,factory:Br.\u0275fac,providedIn:"root"});var Bc=Br;var b1=["canvasWrapper"],E1=["expandedItemElement"],w1=["mobileScrollContainer"],ob=n=>({captureComponent:n}),sb=(n,e)=>e.id;function C1(n,e){if(n&1&&(g(0,"div",9),Y(1,"div",21),g(2,"div",22),Y(3,"div",23),g(4,"div",24)(5,"p",25),m(6,"Carregando experi\xEAncia"),y(),g(7,"h1",26),m(8),y(),g(9,"p",27),m(10),y()()()()),n&2){let t=v();_(8),Ce(t.appLoadingMessage()),_(2),Ce(t.appLoadingHint())}}function D1(n,e){if(n&1){let t=H();g(0,"div",34),x("mouseenter",function(){C(t);let i=v(3);return D(i.pauseCanvasNavigation())})("mouseleave",function(){C(t);let i=v(3);return D(i.resumeCanvasNavigation())})("focusin",function(){C(t);let i=v(3);return D(i.pauseCanvasNavigation())})("focusout",function(i){C(t);let o=v(3);return D(o.resumeCanvasNavigation(i))}),g(1,"div",35)(2,"div",36),J(),g(3,"svg",37),Y(4,"path",31)(5,"path",32),y()(),De(),g(6,"div",38)(7,"span",39),m(8),y(),g(9,"span",40),m(10),y()()(),g(11,"div",41)(12,"button",42),x("click",function(){C(t);let i=v(3);return D(i.refreshApp())}),m(13," Atualizar app "),y(),g(14,"button",43),x("click",function(){C(t);let i=v(3);return D(i.openSettingsDialog())}),m(15," Prefer\xEAncias "),y(),g(16,"button",43),x("click",function(){C(t);let i=v(3);return D(i.signOut())}),m(17," Sair da conta "),y()()()}if(n&2){let t=v(3);_(7),j("title",t.authUserEmail()??void 0),_(),Ce(t.authUserEmail()),_(2),oe("Sess\xE3o ativa \u2022 ",t.userRoleLabel())}}function S1(n,e){if(n&1){let t=H();g(0,"div",28)(1,"button",29),x("click",function(i){C(t);let o=v(2);return D(o.toggleUserMenu(i))}),J(),g(2,"svg",30),Y(3,"path",31)(4,"path",32),y()(),M(5,D1,18,3,"div",33),y()}if(n&2){let t=v(2);_(),Be("aria-expanded",t.isUserMenuOpen()),_(4),N(t.isUserMenuOpen()?5:-1)}}function I1(n,e){if(n&1&&M(0,S1,6,2,"div",28),n&2){let t=v();N(t.isAuthenticated()?0:-1)}}function T1(n,e){if(n&1&&m(0),n&2){let t=v(2);yr(" ",t.galleryCounterLabel()," ",t.galleryCount()," ")}}function x1(n,e){if(n&1&&m(0),n&2){let t=v(2);yr(" ",t.photoCounterLabel()," ",t.photoCount()," ")}}function A1(n,e){if(n&1){let t=H();g(0,"div",45)(1,"button",48),x("click",function(){C(t);let i=v(2);return D(i.openLoginDialog())}),m(2," Entrar "),y(),g(3,"button",48),x("click",function(){C(t);let i=v(2);return D(i.openSignUpDialog())}),m(4," Criar conta "),y()()}}function M1(n,e){n&1&&(J(),g(0,"svg",50),Y(1,"path",51)(2,"path",52),y())}function N1(n,e){n&1&&(J(),g(0,"svg",50),Y(1,"path",53),y())}function k1(n,e){if(n&1){let t=H();g(0,"button",49),x("click",function(){C(t);let i=v(2);return D(i.onUserGalleryAction())}),M(1,M1,3,0,":svg:svg",50)(2,N1,2,0,":svg:svg",50),m(3),y()}if(n&2){let t=v(2);_(),N(t.hasUserGallery()?1:2),_(2),oe(" ",t.userGalleryActionLabel()," ")}}function R1(n,e){if(n&1){let t=H();g(0,"div",44),x("mouseenter",function(){C(t);let i=v();return D(i.pauseCanvasNavigation())})("mouseleave",function(){C(t);let i=v();return D(i.resumeCanvasNavigation())})("focusin",function(){C(t);let i=v();return D(i.pauseCanvasNavigation())})("focusout",function(i){C(t);let o=v();return D(o.resumeCanvasNavigation(i))}),g(1,"div",14),M(2,T1,1,2)(3,x1,1,2),y(),M(4,A1,5,0,"div",45),M(5,k1,4,2,"button",46),vr(6,47),y()}if(n&2){let t=v(),r=An(4);_(2),N(t.currentView()==="galleries"?2:3),_(2),N(t.isAuthenticated()?-1:4),_(),N(t.canAccessUserGalleryActions()?5:-1),_(),j("ngTemplateOutlet",r)}}function O1(n,e){if(n&1){let t=H();g(0,"div",55),x("mouseenter",function(){C(t);let i=v(2);return D(i.pauseCanvasNavigation())})("mouseleave",function(){C(t);let i=v(2);return D(i.resumeCanvasNavigation())})("focusin",function(){C(t);let i=v(2);return D(i.pauseCanvasNavigation())})("focusout",function(i){C(t);let o=v(2);return D(o.resumeCanvasNavigation(i))}),g(1,"div",45),vr(2,47),y()()}if(n&2){v(2);let t=An(4);_(2),j("ngTemplateOutlet",t)}}function P1(n,e){if(n&1&&M(0,O1,3,1,"div",54),n&2){let t=v();N(t.isAuthenticated()?0:-1)}}function F1(n,e){if(n&1){let t=H();g(0,"button",64),x("click",function(){C(t);let i=v(5);return D(i.openGalleryCreationDialogForMobileCapture())}),g(1,"div",65)(2,"div",66),J(),g(3,"svg",67),Y(4,"path",68),y()()(),De(),g(5,"div",60)(6,"div",61)(7,"h3",62),m(8,"Criar minha galeria"),y()(),g(9,"p",63),m(10," Abra sua primeira galeria para salvar as capturas do app. "),y()()()}}function L1(n,e){if(n&1&&(g(0,"div",57)(1,"div",59)(2,"div",60)(3,"div",61)(4,"h3",62),m(5,"Nenhuma galeria dispon\xEDvel"),y()(),g(6,"p",63),m(7," Acesse a lista de galerias para visualizar ou criar novas. "),y()()(),M(8,F1,11,0,"button",58),y()),n&2){let t=v(4);_(8),N(t.canCreateGalleries()?8:-1)}}function V1(n,e){if(n&1){let t=H();g(0,"div",57)(1,"app-mobile-gallery-card",69),x("select",function(){C(t);let i=v(3).captureComponent;return v().openMobileGalleryPicker(),D(i==null?null:i.requestGallerySelection())})("open",function(){C(t);let i=v(4);return D(i.openMobileGalleryDetail(i.mobileCaptureGallery().id))}),y()()}if(n&2){let t=v(4);_(),j("gallery",t.mobileCaptureGallery())("coverUrl",t.getGalleryCover(t.mobileCaptureGallery()))("active",!0)("showActiveIndicator",!0)("selectable",t.canSelectMobileCaptureGallery())}}function j1(n,e){if(n&1){let t=H();g(0,"button",64),x("click",function(){C(t);let i=v(3).captureComponent;return v().openMobileGalleryPicker(),D(i==null?null:i.requestGallerySelection())}),g(1,"div",65)(2,"div",66),J(),g(3,"svg",67),Y(4,"path",68),y()()(),De(),g(5,"div",60)(6,"div",61)(7,"h3",62),m(8,"Selecionar galeria"),y()(),g(9,"p",63),m(10," Escolha uma galeria para salvar suas capturas. "),y(),g(11,"div",70)(12,"span"),m(13,"Sem data"),y(),g(14,"span"),m(15,"0 fotos"),y()()(),J(),g(16,"svg",71),Y(17,"path",72),y()()}}function U1(n,e){if(n&1&&M(0,L1,9,1,"div",57)(1,V1,2,5,"div",57)(2,j1,18,0,"button",58),n&2){let t=v(3);N(t.galleries().length===0?0:t.mobileCaptureGallery()?1:2)}}function G1(n,e){if(n&1){let t=H();g(0,"div",57)(1,"app-mobile-gallery-card",73),x("open",function(){C(t);let i=v(3);return D(i.openMobileGalleryDetail(i.mobileCaptureGallery().id))}),y()()}if(n&2){let t=v(3);_(),j("gallery",t.mobileCaptureGallery())("coverUrl",t.getGalleryCover(t.mobileCaptureGallery()))("active",!0)("selectable",!1)("showActiveIndicator",!0)}}function B1(n,e){if(n&1){let t=H();g(0,"button",64),x("click",function(){C(t);let i=v(3);return D(i.openGalleryCreationDialogForMobileCapture())}),g(1,"div",65)(2,"div",66),J(),g(3,"svg",67),Y(4,"path",68),y()()(),De(),g(5,"div",60)(6,"div",61)(7,"h3",62),m(8,"Criar minha galeria"),y()(),g(9,"p",63),m(10," Abra sua primeira galeria para salvar as capturas do app. "),y()()()}}function H1(n,e){if(n&1){let t=H();g(0,"div",57)(1,"button",74),x("click",function(){C(t);let i=v(3);return D(i.openSignUpDialog())})("pointerdown",function(i){C(t);let o=v(3);return D(o.onMobileGallerySelectorPressStart(i))})("pointerup",function(){C(t);let i=v(3);return D(i.onMobileGallerySelectorPressEnd())})("pointerleave",function(){C(t);let i=v(3);return D(i.onMobileGallerySelectorPressCancel())})("pointercancel",function(){C(t);let i=v(3);return D(i.onMobileGallerySelectorPressCancel())}),g(2,"div",65)(3,"div",66),J(),g(4,"svg",67),Y(5,"path",75),y()()(),De(),g(6,"div",60)(7,"div",61)(8,"h3",62),m(9,"Crie sua conta"),y()(),g(10,"p",63),m(11," Cadastre-se para fotografar. "),y()(),J(),g(12,"svg",71),Y(13,"path",72),y()(),De(),g(14,"button",76),x("click",function(){C(t);let i=v(3);return D(i.openLoginDialog())}),m(15," J\xE1 tenho conta. Entrar "),y()()}}function $1(n,e){if(n&1&&M(0,U1,3,1)(1,G1,2,5,"div",57)(2,B1,11,0,"button",58)(3,H1,16,0,"div",57),n&2){let t=v(2);N(t.canViewMobileGalleryList()?0:t.mobileCaptureGallery()?1:t.canAccessUserGalleryActions()?2:3)}}function z1(n,e){n&1&&(g(0,"div",80),m(1,"Nenhuma galeria dispon\xEDvel para captura."),y())}function W1(n,e){if(n&1&&(g(0,"option",84),m(1),y()),n&2){let t=e.$implicit;j("value",t.id),_(),Ce(t.name)}}function q1(n,e){if(n&1&&(g(0,"p",85),m(1),y()),n&2){let t=v(4);_(),oe("Pr\xE9-selecionada: ",t.desktopCaptureGallery().name)}}function K1(n,e){if(n&1){let t=H();g(0,"label",82),m(1,"Galeria"),y(),g(2,"select",83),x("change",function(i){C(t);let o=v(2).captureComponent,s=v();return D(s.onDesktopGallerySelect(i,o))}),Yt(3,W1,2,2,"option",84,sb),y(),M(5,q1,2,1,"p",85)}if(n&2){let t=v(3);_(2),j("value",t.desktopCaptureGalleryId()??""),_(),Zt(t.capturableGalleries()),_(2),N(t.desktopCaptureGallery()?5:-1)}}function Y1(n,e){if(n&1){let t=H();g(0,"button",86),x("click",function(){C(t);let i=v(2).captureComponent;return v().openGalleryCreationDialog(),D(i==null?null:i.requestGallerySelection())}),m(1," Nova galeria "),y()}}function Z1(n,e){if(n&1&&(g(0,"div",56)(1,"div",77)(2,"p",78),m(3,"Galeria selecionada"),y(),g(4,"p",79),m(5,"Escolha onde salvar a pr\xF3xima captura."),y()(),M(6,z1,2,0,"div",80)(7,K1,6,2),M(8,Y1,2,0,"button",81),y()),n&2){let t=v(2);_(6),N(t.capturableGalleries().length===0?6:7),_(2),N(t.canCreateGalleries()?8:-1)}}function J1(n,e){if(n&1&&M(0,$1,4,1)(1,Z1,9,2,"div",56),n&2){let t=v();N(t.isMobileLayout()?0:1)}}function Q1(n,e){n&1&&vr(0)}function X1(n,e){if(n&1){let t=H();g(0,"div",87)(1,"div",90)(2,"app-webcam-capture",91,2),x("prepareCapture",function(){C(t);let i=v(2);return D(i.prepareMobileCapture())})("capture",function(i){C(t);let o=v(2);return D(o.onCaptureComplete(i))}),fe(4,92),Kt(5,Q1,1,0,"ng-container",93),he(),y()()()}if(n&2){let t=An(3),r=v(2),i=An(8);_(2),j("variant","mobile")("captureAllowed",r.mobileCaptureAllowed()),_(3),j("ngTemplateOutlet",i)("ngTemplateOutletContext",ml(4,ob,t))}}function eA(n,e){if(n&1){let t=H();g(0,"button",100),x("click",function(){C(t);let i=v(3);return D(i.showMobileCapture())}),m(1," \u2190 Captura "),y()}}function tA(n,e){if(n&1){let t=H();g(0,"button",101),x("click",function(){C(t);let i=v(3);return D(i.openGalleryCreationDialogForMobileCapture())}),m(1," Nova "),y()}}function nA(n,e){n&1&&(g(0,"p",105),m(1,"Crie uma galeria para come\xE7ar a capturar suas mem\xF3rias."),y())}function rA(n,e){n&1&&(g(0,"p",105),m(1,"Aguarde a publica\xE7\xE3o de galerias p\xFAblicas."),y())}function iA(n,e){if(n&1&&(g(0,"div",98),J(),g(1,"svg",102),Y(2,"path",103),y(),De(),g(3,"h3",104),m(4,"Nenhuma galeria ainda"),y(),M(5,nA,2,0,"p",105)(6,rA,2,0,"p",105),y()),n&2){let t=v(3);_(5),N(t.canCreateGalleries()?5:6)}}function oA(n,e){if(n&1){let t=H();g(0,"app-mobile-gallery-card",107),x("select",function(){let i=C(t).$implicit,o=v(4);return D(o.selectMobileCaptureGallery(i.id))})("open",function(){let i=C(t).$implicit,o=v(4);return D(o.openMobileGalleryDetail(i.id))}),y()}if(n&2){let t=e.$implicit,r=v(4);j("gallery",t)("coverUrl",r.getGalleryCover(t))("active",r.mobileCaptureGalleryId()===t.id)("selectable",r.canViewMobileGalleryList())}}function sA(n,e){if(n&1&&(g(0,"div",99),Yt(1,oA,1,4,"app-mobile-gallery-card",106,sb),y()),n&2){let t=v(3);_(),Zt(t.galleries())}}function aA(n,e){if(n&1&&(g(0,"div",88)(1,"header",94)(2,"div"),M(3,eA,2,0,"button",95),y(),g(4,"div"),M(5,tA,2,0,"button",96),y()(),g(6,"div",97,3),M(8,iA,7,1,"div",98)(9,sA,3,0,"div",99),y()()),n&2){let t=v(2);_(3),N(t.canViewMobileGalleryList()?3:-1),_(2),N(t.canViewMobileGalleryList()?5:-1),_(3),N(t.galleries().length===0?8:9)}}function lA(n,e){if(n&1){let t=H();g(0,"button",121),x("click",function(){C(t);let i=v(3);return D(i.activeGallery()&&i.useGalleryForCapture(i.activeGallery().id))}),m(1," Usar esta galeria "),y(),g(2,"button",122),x("click",function(){C(t);let i=v(3);return D(i.deleteActiveGalleryFromMobile())}),g(3,"span",110),m(4,"Excluir galeria"),y(),g(5,"span",111),J(),g(6,"svg",112),Y(7,"path",123),y()()()}if(n&2){let t=v(3);j("disabled",!t.activeGallery()),_(2),j("disabled",!t.activeGallery())}}function cA(n,e){n&1&&(g(0,"span",115),m(1,"Somente visualiza\xE7\xE3o"),y())}function uA(n,e){if(n&1&&(g(0,"p",118),m(1),y()),n&2){let t,r=v(3);_(),Ce((t=r.activeGallery())==null?null:t.description)}}function dA(n,e){if(n&1&&(g(0,"span"),m(1),y()),n&2){let t,r=v(3);_(),Ce((t=r.activeGallery())==null?null:t.createdAt)}}function fA(n,e){n&1&&(g(0,"p",105),m(1,"Capture novas imagens para come\xE7ar seu di\xE1rio."),y())}function hA(n,e){n&1&&(g(0,"p",105),m(1,"Nenhuma foto foi enviada para esta galeria."),y())}function pA(n,e){if(n&1&&(g(0,"div",98),J(),g(1,"svg",124),Y(2,"path",103),y(),De(),g(3,"h3",104),m(4,"Esta galeria est\xE1 vazia"),y(),M(5,fA,2,0,"p",105)(6,hA,2,0,"p",105),y()),n&2){let t=v(3);_(5),N(t.canCaptureInSelectedGallery()?5:6)}}function gA(n,e){if(n&1){let t=H();g(0,"button",126),x("click",function(i){let o=C(t),s=o.$implicit,a=o.$index,l=v(4);return D(l.onMobilePhotoClick(i,s,a))}),Y(1,"img",127)(2,"span",128),y()}if(n&2){let t=e.$implicit;_(),j("src",t,Tn)}}function mA(n,e){if(n&1&&(g(0,"div",120),Yt(1,gA,3,1,"button",125,Go().trackMobileImage,!0),y()),n&2){let t=v(3);_(),Zt(t.images())}}function vA(n,e){if(n&1){let t=H();g(0,"div",89)(1,"header",108)(2,"button",109),x("click",function(){C(t);let i=v(2);return D(i.returnToMobileGalleries())}),g(3,"span",110),m(4,"Voltar para galerias"),y(),g(5,"span",111),J(),g(6,"svg",112),Y(7,"path",113),y()()(),De(),g(8,"div",114),M(9,lA,8,2)(10,cA,2,0,"span",115),y()(),g(11,"div",116)(12,"div",57)(13,"h2",117),m(14),y(),M(15,uA,2,1,"p",118),g(16,"div",119),M(17,dA,2,1,"span"),g(18,"span"),m(19),y()()(),M(20,pA,7,1,"div",98)(21,mA,3,0,"div",120),y()()}if(n&2){let t,r,i,o=v(2);_(9),N(o.canManageSelectedGallery()?9:10),_(5),Ce(((t=o.activeGallery())==null?null:t.name)??"Galeria"),_(),N((r=o.activeGallery())!=null&&r.description?15:-1),_(2),N((i=o.activeGallery())!=null&&i.createdAt?17:-1),_(2),oe("",o.images().length," fotos"),_(),N(o.images().length===0?20:21)}}function yA(n,e){if(n&1&&M(0,X1,6,6,"div",87)(1,aA,10,3,"div",88)(2,vA,22,6,"div",89),n&2){let t,r=v();N((t=r.mobileView())==="capture"?0:t==="galleries"?1:t==="galleryDetail"?2:-1)}}function _A(n,e){if(n&1){let t=H();g(0,"p",135),m(1,"Clique com o bot\xE3o direito para criar uma nova galeria."),y(),g(2,"div",136)(3,"p",137),m(4,"Como tirar uma foto:"),y(),g(5,"div",138)(6,"button",139),x("click",function(i){return C(t),v(4).openGalleryCreationDialog(),D(i.stopPropagation())}),m(7," Nova Galeria "),y()()()}}function bA(n,e){n&1&&(g(0,"p",135),m(1,"Aguarde o administrador publicar novas galerias."),y())}function EA(n,e){if(n&1&&(g(0,"div",132),J(),g(1,"svg",124),Y(2,"path",103),y(),De(),g(3,"h2",134),m(4,"Nenhuma galeria criada"),y(),M(5,_A,8,0)(6,bA,2,0,"p",135),y()),n&2){let t=v(3);_(5),N(t.canCreateGalleries()?5:6)}}function wA(n,e){if(n&1){let t=H();g(0,"div",142),x("click",function(){C(t);let i=v().$implicit,o=v(4);return D(o.selectGallery(i.id))})("mouseenter",function(){C(t);let i=v().$implicit,o=v(4);return D(o.onGalleryHoverStart(i.id,i.previewKey))})("mouseleave",function(){C(t);let i=v().$implicit,o=v(4);return D(o.onGalleryHoverEnd(i.previewKey))})("contextmenu",function(i){C(t);let o=v().$implicit,s=v(4);return D(s.onGalleryRightClick(i,o.id))}),g(1,"div",143)(2,"img",144),x("load",function(i){return C(t),D(i.target.classList.add("is-visible"))}),y(),Y(3,"div",145),y(),g(4,"span",146),m(5),y(),g(6,"div",147)(7,"div",148),m(8),y(),g(9,"div",149),m(10),y()()()}if(n&2){let t=v().$implicit,r=v(4);ie("width",t.width,"px")("height",t.height,"px")("left",t.x,"px")("top",t.y,"px"),Ie("gallery-card--light",r.themeService.isLight())("is-disabled",!r.isInteractionEnabled())("is-interactive",r.isInteractionEnabled()),Be("data-cursor-pointer",r.isInteractionEnabled()?"":null),_(2),j("alt",Ff("Capa da Galeria: ",t.name))("src",r.galleryPreviewImages()[t.previewKey]??t.thumbnailUrl,Tn),_(),Ie("gallery-card__overlay--dark",r.themeService.isDark())("gallery-card__overlay--light",r.themeService.isLight()),_(2),oe(" ",t.creationOrder," "),_(3),Ce(t.createdAt),_(2),Ce(t.name)}}function CA(n,e){if(n&1&&M(0,wA,11,25,"div",141),n&2){let t=e.$implicit;N(t.type==="gallery"?0:-1)}}function DA(n,e){if(n&1&&(g(0,"div",133)(1,"div",140,4),Yt(3,CA,1,1,null,null,Go().trackById,!0),y()()),n&2){let t=v(3);_(3),Zt(t.visibleItems())}}function SA(n,e){if(n&1&&M(0,EA,7,1,"div",132)(1,DA,5,0,"div",133),n&2){let t=v(2);N(t.galleryService.galleries().length===0?0:1)}}function IA(n,e){if(n&1){let t=H();g(0,"p",135),m(1,"Clique com o bot\xE3o direito para adicionar fotos."),y(),g(2,"div",136)(3,"p",137),m(4,"Como tirar uma foto:"),y(),g(5,"div",138)(6,"button",151),x("click",function(i){return C(t),v(4).openWebcamCapture(),D(i.stopPropagation())}),m(7," Usar C\xE2mera "),y(),g(8,"button",151),x("click",function(i){C(t);let o=v(4);return D(o.handleSpacebar(i))}),m(9," Atalho: Espa\xE7o "),y()()()}if(n&2){let t=v(4);_(6),j("disabled",!t.canUploadToGallery()),_(2),j("disabled",!t.canUploadToGallery())}}function TA(n,e){n&1&&(g(0,"p",135),m(1,"Nenhuma foto dispon\xEDvel nesta galeria."),y())}function xA(n,e){if(n&1&&(g(0,"div",150),J(),g(1,"svg",124),Y(2,"path",103),y(),De(),g(3,"h2",134),m(4,"Esta galeria est\xE1 vazia"),y(),M(5,IA,10,2)(6,TA,2,0,"p",135),y()),n&2){let t=v(3);_(5),N(t.canCaptureInSelectedGallery()?5:6)}}function AA(n,e){if(n&1){let t=H();g(0,"div",153),x("click",function(i){C(t);let o=v().$implicit,s=v(3);return D(s.onImageClick(i,o))})("contextmenu",function(i){C(t);let o=v().$implicit,s=v(3);return D(s.onPhotoRightClick(i,o.url))}),g(1,"div",154)(2,"img",155),x("load",function(i){return C(t),D(i.target.classList.add("is-visible"))}),y(),Y(3,"div",156),y(),g(4,"span",157),m(5),y()()}if(n&2){let t=v().$implicit,r=v(3);ie("width",t.width,"px")("height",t.height,"px")("left",t.x,"px")("top",t.y,"px"),Ie("photo-card--light",r.themeService.isLight())("is-disabled",!r.isInteractionEnabled())("is-interactive",r.isInteractionEnabled()),Be("data-cursor-pointer",r.isInteractionEnabled()?"":null),_(2),j("src",t.url,Tn),_(),Ie("photo-card__overlay--dark",r.themeService.isDark())("photo-card__overlay--light",r.themeService.isLight()),_(2),oe(" ",t.creationOrder," ")}}function MA(n,e){if(n&1&&M(0,AA,6,21,"div",152),n&2){let t=e.$implicit;N(t.type==="photo"?0:-1)}}function NA(n,e){if(n&1&&(M(0,xA,7,1,"div",150),g(1,"div",133)(2,"div",140,4),Yt(4,MA,1,1,null,null,Go().trackById,!0),y()()),n&2){let t=v(2);N(t.images().length===0?0:-1),_(4),Zt(t.visibleItems())}}function kA(n,e){if(n&1){let t=H();g(0,"button",158),x("click",function(){C(t);let i=v(2);return D(i.backToGalleries())}),J(),g(1,"svg",30),Y(2,"path",159),y()()}}function RA(n,e){if(n&1&&(M(0,SA,2,1)(1,NA,6,1),g(2,"div",129),m(3),y(),g(4,"div",130),m(5),y(),M(6,kA,3,0,"button",131)),n&2){let t=v();N(t.currentView()==="galleries"?0:1),_(3),oe(" ",t.currentTime()," "),_(2),oe(" ",t.currentDate()," "),_(),N(t.currentView()==="photos"&&!t.isIdle()?6:-1)}}function OA(n,e){n&1&&Y(0,"div",11)}function PA(n,e){if(n&1){let t=H();g(0,"button",162),x("click",function(i){C(t);let o=v(2);return D(o.deleteExpandedPhoto(i))}),J(),g(1,"svg",50),Y(2,"path",163),y()()}}function FA(n,e){n&1&&Y(0,"div",164)(1,"div",165)}function LA(n,e){if(n&1&&(g(0,"div",13,5),Y(2,"img",160),M(3,PA,3,0,"button",161),M(4,FA,2,0),y()),n&2){let t=v();_(2),j("src",e.url,Tn),_(),N(t.isMobileLayout()&&t.canManageSelectedGallery()?3:-1),_(),N(t.isMobileLayout()?4:-1)}}function VA(n,e){if(n&1&&m(0),n&2){let t=v();yr(" ",t.galleryCounterLabel()," ",t.galleryCount()," ")}}function jA(n,e){if(n&1&&m(0),n&2){let t=v();yr(" ",t.photoCounterLabel()," ",t.photoCount()," ")}}function UA(n,e){if(n&1&&(g(0,"p",169),m(1," Navega\xE7\xE3o autom\xE1tica come\xE7a em "),y(),g(2,"p",170),m(3),y()),n&2){let t=v(2);_(3),oe(" ",t.autoNavigationCountdown(),"s ")}}function GA(n,e){if(n&1&&(g(0,"div",15)(1,"div",166),M(2,UA,4,1),g(3,"p",167),m(4," Pressione "),g(5,"span",168),m(6,"P"),y(),m(7," ou use o menu de contexto (bot\xE3o direito) para parar a navega\xE7\xE3o autom\xE1tica. "),y()()()),n&2){let t=v();_(2),N(t.autoNavigationCountdown()!==null?2:-1)}}function BA(n,e){if(n&1&&(g(0,"div",177),m(1),y()),n&2){let t=v(2);_(),oe(" ",t.loginError()," ")}}function HA(n,e){n&1&&m(0," Entrando... ")}function $A(n,e){n&1&&m(0," Entrar ")}function zA(n,e){if(n&1){let t=H();g(0,"div",171),x("click",function(){C(t);let i=v();return D(i.closeLoginDialog())}),g(1,"div",172),x("click",function(i){return C(t),D(i.stopPropagation())}),g(2,"div",173)(3,"div",57)(4,"h2",174),m(5,"Entrar na sua conta"),y(),g(6,"p",175),m(7,"Use seu email e senha para acessar suas galerias."),y()(),g(8,"button",176),x("click",function(){C(t);let i=v();return D(i.closeLoginDialog())}),m(9," \xD7 "),y()(),M(10,BA,2,1,"div",177),g(11,"form",178),x("submit",function(i){return C(t),v().submitLogin(),D(i.preventDefault())}),g(12,"div",179)(13,"label",180),m(14,"Email"),y(),g(15,"input",181),x("input",function(i){C(t);let o=v();return D(o.loginEmail.set(i.target.value))}),y()(),g(16,"div",179)(17,"label",180),m(18,"Senha"),y(),g(19,"input",182),x("input",function(i){C(t);let o=v();return D(o.loginPassword.set(i.target.value))}),y()(),g(20,"div",57)(21,"button",183),M(22,HA,1,0)(23,$A,1,0),y(),g(24,"p",184),m(25,"Acesse para capturar fotos e gerenciar suas galerias."),y()()()()()}if(n&2){let t=v();_(8),Ie("opacity-50",t.isLoginInProgress()),j("disabled",t.isLoginInProgress()),_(2),N(t.loginError()?10:-1),_(5),j("value",t.loginEmail())("disabled",t.isLoginInProgress()),_(4),j("value",t.loginPassword())("disabled",t.isLoginInProgress()),_(2),j("disabled",t.isLoginInProgress()),_(),N(t.isLoginInProgress()?22:23)}}function WA(n,e){if(n&1&&(g(0,"div",177),m(1),y()),n&2){let t=v(2);_(),oe(" ",t.signUpError()," ")}}function qA(n,e){n&1&&m(0," Criando conta... ")}function KA(n,e){n&1&&m(0," Criar conta ")}function YA(n,e){if(n&1){let t=H();g(0,"div",171),x("click",function(){C(t);let i=v();return D(i.closeSignUpDialog())}),g(1,"div",172),x("click",function(i){return C(t),D(i.stopPropagation())}),g(2,"div",173)(3,"div",57)(4,"h2",174),m(5,"Criar conta"),y(),g(6,"p",175),m(7,"Cadastre-se para capturar fotos e gerenciar suas galerias."),y()(),g(8,"button",176),x("click",function(){C(t);let i=v();return D(i.closeSignUpDialog())}),m(9," \xD7 "),y()(),M(10,WA,2,1,"div",177),g(11,"form",178),x("submit",function(i){return C(t),v().submitSignUp(),D(i.preventDefault())}),g(12,"div",179)(13,"label",180),m(14,"Email"),y(),g(15,"input",181),x("input",function(i){C(t);let o=v();return D(o.signUpEmail.set(i.target.value))}),y()(),g(16,"div",179)(17,"label",180),m(18,"Senha"),y(),g(19,"input",185),x("input",function(i){C(t);let o=v();return D(o.signUpPassword.set(i.target.value))}),y()(),g(20,"div",179)(21,"label",180),m(22,"Confirmar senha"),y(),g(23,"input",185),x("input",function(i){C(t);let o=v();return D(o.signUpConfirmPassword.set(i.target.value))}),y()(),g(24,"div",57)(25,"button",183),M(26,qA,1,0)(27,KA,1,0),y(),g(28,"p",184),m(29,"Voc\xEA ter\xE1 acesso imediato e poder\xE1 criar sua galeria."),y()(),g(30,"p",184),m(31," J\xE1 tem uma conta? "),g(32,"button",176),x("click",function(){C(t);let i=v();return D(i.openLoginFromSignUpDialog())}),m(33," Entrar "),y()()()()()}if(n&2){let t=v();_(8),Ie("opacity-50",t.isSignUpInProgress()),j("disabled",t.isSignUpInProgress()),_(2),N(t.signUpError()?10:-1),_(5),j("value",t.signUpEmail())("disabled",t.isSignUpInProgress()),_(4),j("value",t.signUpPassword())("disabled",t.isSignUpInProgress()),_(4),j("value",t.signUpConfirmPassword())("disabled",t.isSignUpInProgress()),_(2),j("disabled",t.isSignUpInProgress()),_(),N(t.isSignUpInProgress()?26:27),_(6),j("disabled",t.isSignUpInProgress())}}function ZA(n,e){if(n&1){let t=H();g(0,"div",171),x("click",function(){C(t);let i=v();return D(i.closeSignUpSuccessDialog())}),g(1,"div",172),x("click",function(i){return C(t),D(i.stopPropagation())}),g(2,"div",173)(3,"div",57)(4,"div",186),J(),g(5,"svg",50),Y(6,"path",187),y()(),De(),g(7,"h2",174),m(8,"Conta criada com sucesso"),y(),g(9,"p",175),m(10),y()(),g(11,"button",188),x("click",function(){C(t);let i=v();return D(i.closeSignUpSuccessDialog())}),m(12," \xD7 "),y()(),g(13,"div",189)(14,"div",190),m(15," Abra o link de confirma\xE7\xE3o enviado para concluir o cadastro. Depois, volte aqui e fa\xE7a login para liberar as ferramentas. "),y(),g(16,"p",184),m(17,"Se n\xE3o encontrar, verifique tamb\xE9m a pasta de spam ou promo\xE7\xF5es."),y(),g(18,"div",57)(19,"button",191),x("click",function(){C(t);let i=v();return D(i.openLoginFromSignUpSuccess())}),m(20," Abrir tela de login "),y(),g(21,"button",192),x("click",function(){C(t);let i=v();return D(i.closeSignUpSuccessDialog())}),m(22," Continuar explorando "),y()()()()()}if(n&2){let t=v();_(10),oe(" Enviamos um email para ",t.signUpSuccessEmail()??"sua caixa de entrada",". Confirme o endere\xE7o para habilitar o acesso. ")}}function JA(n,e){if(n&1){let t=H();g(0,"app-context-menu",193),x("close",function(){C(t);let i=v();return D(i.closeContextMenu())})("capture",function(){C(t);let i=v();return D(i.openWebcamCapture())})("toggleFullscreen",function(){C(t);let i=v();return D(i.toggleFullscreen())})("toggleTheme",function(){C(t);let i=v();return D(i.toggleThemeMode())})("togglePlayback",function(){C(t);let i=v();return D(i.toggleAutoNavigation())})("createGallery",function(){C(t);let i=v();return D(i.openGalleryCreationDialog())})("editGallery",function(){C(t);let i=v();return D(i.editGalleryContextMenu())})("deleteGallery",function(){C(t);let i=v();return D(i.deleteGalleryContextMenu())})("deletePhoto",function(){C(t);let i=v();return D(i.deletePhotoContextMenu())})("info",function(){C(t);let i=v();return D(i.toggleInfoDialog())}),y()}if(n&2){let t=v();j("x",t.contextMenu().x)("y",t.contextMenu().y)("isFullscreen",t.isFullscreen())("groups",t.contextMenu().groups)("themeMode",t.themeService.theme())("isAutoNavigationActive",t.isAutoNavigationActive())("autoNavigationCountdown",t.autoNavigationCountdown())("canEditGallery",t.canEditSelectedGallery())("canUploadToGallery",t.canUploadToGallery())("canDeletePhoto",t.canDeletePhoto())}}function QA(n,e){n&1&&vr(0)}function XA(n,e){if(n&1){let t=H();g(0,"div",194),x("click",function(){C(t);let i=v();return D(i.isWebcamVisible.set(!1))}),g(1,"app-webcam-capture",195,6),x("prepareCapture",function(){C(t);let i=v();return D(i.prepareDesktopCapture())})("galleryChange",function(i){C(t);let o=v();return D(o.onDesktopGalleryChange(i))})("capture",function(i){C(t);let o=v();return D(o.onCaptureComplete(i))})("close",function(){C(t);let i=v();return D(i.isWebcamVisible.set(!1))}),fe(3,196),Kt(4,QA,1,0,"ng-container",93),he(),y()()}if(n&2){let t=An(2),r=v(),i=An(8);_(),j("captureAllowed",r.desktopCaptureAllowed()),_(3),j("ngTemplateOutlet",i)("ngTemplateOutletContext",ml(3,ob,t))}}function eM(n,e){if(n&1){let t=H();g(0,"app-gallery-editor",197),x("close",function(){C(t);let i=v();return i.isGalleryEditorVisible.set(!1),D(i.editingGallery.set(null))})("save",function(i){C(t);let o=v();return D(o.handleGallerySave(i))})("delete",function(i){C(t);let o=v();return D(o.handleGalleryDelete(i))}),y()}if(n&2){let t=v();j("gallery",t.editingGallery())}}function tM(n,e){if(n&1){let t=H();g(0,"app-gallery-creation-dialog",198),x("close",function(){C(t);let i=v();return D(i.isGalleryCreationDialogVisible.set(!1))})("save",function(i){C(t);let o=v();return D(o.handleGalleryCreate(i))}),y()}}function nM(n,e){if(n&1){let t=H();g(0,"app-settings-dialog",199),x("close",function(){C(t);let i=v();return D(i.closeSettingsDialog())})("confirmDelete",function(){C(t);let i=v();return D(i.confirmAccountDeletion())}),y()}if(n&2){let t=v();j("isDeleting",t.isDeleteAccountInProgress())("error",t.deleteAccountError())}}function rM(n,e){if(n&1){let t=H();g(0,"app-info-dialog",200),x("close",function(){C(t);let i=v();return D(i.isInfoDialogVisible.set(!1))}),y()}}var iM=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],oM="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 200'><rect width='300' height='200' fill='%23111111'/></svg>",rb="cubic-bezier(0.9, 0, 0.1, 1)";function ib(n){return iM.includes(n)}var Ji=class Ji{constructor(){this.galleryService=R(Fi);this.themeService=R(dt);this.authService=R(ut);this.permissionsService=R(Bc);this.supabaseAuthClient=R(Gc);this.supabaseAuthSubscription=null;this.canManageContent=this.permissionsService.canManageContent;this.authUserEmail=O(()=>this.authService.session()?.user?.email??null);this.isAuthenticated=O(()=>this.authService.isAuthenticated());this.isAppLoading=O(()=>this.authService.isLoading()||this.galleryService.isLoading());this.currentUserGalleryId=O(()=>this.galleryService.currentUserGalleryId());this.resolvedUserGalleryId=O(()=>{let e=this.currentUserGalleryId();if(e)return e;let t=this.authService.ownerId()?.trim();return t?this.galleries().find(i=>i.ownerId?.trim()===t)?.id??null:null});this.canUploadToGallery=this.permissionsService.canUploadToSelectedGallery;this.canDeletePhoto=this.permissionsService.canDeletePhotoFromSelectedGallery;this.userRoleLabel=O(()=>{let e=this.authService.userRole();return e||(this.canManageContent()?"Admin":"Usu\xE1rio")});this.appLoadingMessage=O(()=>this.authService.isLoading()?"Validando sua sess\xE3o e prefer\xEAncias...":this.galleryService.isLoading()?this.isAuthenticated()?"Sincronizando suas galerias e permiss\xF5es...":"Carregando cole\xE7\xF5es dispon\xEDveis...":"Preparando sua experi\xEAncia na galeria");this.appLoadingHint=O(()=>this.isAuthenticated()?"Estamos deixando tudo pronto para voc\xEA continuar a curadoria sem interrup\xE7\xF5es.":"Em instantes voc\xEA poder\xE1 explorar e capturar novas imagens.");this.isUserMenuOpen=A(!1);this.hasInitializedView=A(!1);this.canCreateGalleries=this.permissionsService.canCreateGalleries;this.canManageSelectedGallery=this.permissionsService.canManageSelectedGallery;this.canCaptureInSelectedGallery=this.permissionsService.canCaptureInSelectedGallery;this.canEditSelectedGallery=this.permissionsService.canEditSelectedGallery;this.canDeleteSelectedGallery=this.permissionsService.canDeleteSelectedGallery;this.canViewMobileGalleryList=this.permissionsService.canViewMobileGalleryList;this.canUseCaptureDialog=this.permissionsService.canUseCaptureDialog;this.canAccessUserGalleryActions=O(()=>this.isAuthenticated()&&!this.canManageContent());this.hasUserGallery=O(()=>!!this.resolvedUserGalleryId());this.userGalleryActionLabel=O(()=>this.hasUserGallery()?"Ir para minha galeria":"Criar minha galeria");this.isLoginDialogVisible=A(!1);this.loginEmail=A("");this.loginPassword=A("");this.loginError=A(null);this.isLoginInProgress=A(!1);this.isSignUpDialogVisible=A(!1);this.signUpEmail=A("");this.signUpPassword=A("");this.signUpConfirmPassword=A("");this.signUpError=A(null);this.isSignUpInProgress=A(!1);this.isSignUpSuccessDialogVisible=A(!1);this.signUpSuccessEmail=A(null);this.isSettingsDialogVisible=A(!1);this.deleteAccountError=A(null);this.isDeleteAccountInProgress=A(!1);this.ngZone=R(Se);this.elementRef=R(Pt);this.closeUserMenuOnLayoutChange=qe(()=>{this.isMobileLayout(),this.mobileView(),ht(this.isUserMenuOpen)&&this.isUserMenuOpen.set(!1)},{allowSignalWrites:!0});this.numColumns=A(4);this.ITEM_GAP=32;this.settings={dragEase:.075,bufferZone:1.5,zoomDuration:.6};this.GALLERY_PREVIEW_DELAY=300;this.GALLERY_PREVIEW_INTERVAL=500;this.AUTO_NAVIGATION_COUNTDOWN_DURATION=3;this.AUTO_NAVIGATION_HINT_DURATION=4e3;this.currentView=A("galleries");this.images=O(()=>this.galleryService.images());this.visibleItems=A([]);this.expandedItem=A(null);this.isWebcamVisible=A(!1);this.contextMenu=A({visible:!1,x:0,y:0,groups:[]});this.isFullscreen=A(!1);this.isViewInitialized=A(!1);this.galleryPreviewImages=A({});this.isAutoNavigationActive=A(!1);this.autoNavigationCountdown=A(null);this.autoNavigationHintVisible=A(!1);this.isNavigationPaused=A(!1);this.autoNavigationOverlayVisible=O(()=>this.autoNavigationCountdown()!==null||this.autoNavigationHintVisible());this.MOBILE_BREAKPOINT=768;this.MOBILE_LOGIN_LONG_PRESS_DURATION=1e4;this.isMobileLayout=A(!1);this.mobileCommandPanelVisible=A(!1);this.captureMode=A("selected");this.pendingCaptures=O(()=>this.galleryService.pendingCaptures());this.lastCapturedImage=A(null);this.pendingCaptureToAssign=A(null);this.selectedPendingCapture=O(()=>{let e=this.pendingCaptures();if(e.length===0)return null;let t=this.pendingCaptureToAssign();return t&&e.includes(t)?t:e[0]});this.isLastCapturePending=O(()=>{let e=this.lastCapturedImage();return e?this.pendingCaptures().includes(e):!1});this.mobileView=A("capture");this.mobileCaptureGalleryId=A(null);this.mobileCaptureGallery=O(()=>{let e=this.mobileCaptureGalleryId();return e?this.galleries().find(t=>t.id===e)??null:null});this.canSelectMobileCaptureGallery=O(()=>this.canViewMobileGalleryList()&&this.canManageContent());this.desktopCaptureGalleryId=A(null);this.desktopCaptureGallery=O(()=>{let e=this.desktopCaptureGalleryId();return e?this.galleries().find(t=>t.id===e)??null:null});this.mobileCaptureAllowed=O(()=>{let e=this.mobileCaptureGallery();return e?typeof e.canUploadToGallery=="boolean"?e.canUploadToGallery:this.authService.canManageGallery(e.ownerId??""):!1});this.capturableGalleries=O(()=>this.galleries().filter(e=>this.permissionsService.canCaptureInGallery(e.id)));this.desktopCaptureAllowed=O(()=>{let e=this.desktopCaptureGallery();return e?typeof e.canUploadToGallery=="boolean"?e.canUploadToGallery:this.permissionsService.canCaptureInGallery(e.id):!1});this.galleryLatestImages=O(()=>{let e={};for(let t of this.galleries()){let[r]=t.imageUrls;r&&(e[t.id]=r)}return e});this.galleries=O(()=>this.galleryService.galleries());this.activeGallery=O(()=>{let e=this.galleryService.selectedGalleryId();return e?this.galleryService.getGallery(e)??null:null});this.mobileScrollTimeoutId=null;this.mobileScrollResetTimeout=null;this.mobileGallerySelectorLongPressTimeoutId=null;this.assignNextGalleryToMobileCapture=!1;this.lastMobileScrollTop=0;this.currentTime=A("");this.currentDate=A("");this.photoCount=O(()=>this.images().length);this.galleryCount=O(()=>this.galleryService.galleries().length);this.photoCounterLabel=O(()=>this.photoCount()<=1?"f.":"f's.");this.galleryCounterLabel=O(()=>this.galleryCount()<=1?"g.":"g's.");this.isGalleryEditorVisible=A(!1);this.editingGallery=A(null);this.isGalleryCreationDialogVisible=A(!1);this.isInfoDialogVisible=A(!1);this.isIdle=A(!1);this.inactivityTimeoutId=null;this.idleEllipseAngle=0;this.idleEllipseCenter={x:0,y:0};this.idleEllipseRadiusX=0;this.idleEllipseRadiusY=0;this.idleSpeed=.001;this.contextMenuGalleryId=null;this.contextMenuPhotoUrl=null;this.generalGroupLabel="A\xE7\xF5es gerais";this.isInteractionEnabled=O(()=>!this.expandedItem()&&!this.isWebcamVisible()&&!this.isGalleryEditorVisible()&&!this.isGalleryCreationDialogVisible()&&!this.isInfoDialogVisible()&&!this.isSettingsDialogVisible()&&!this.isAutoNavigationActive()&&!this.isNavigationPaused());this.canvasWrapper=_r("canvasWrapper");this.expandedItemElement=_r("expandedItemElement");this.mobileScrollContainer=_r("mobileScrollContainer");this.itemDimensions={width:0,height:0,cellWidth:0,cellHeight:0};this.target={x:0,y:0};this.current={x:0,y:0};this.viewport={width:0,height:0};this.initialPosition={x:0,y:0};this.teleportDistance={x:0,y:0};this.hasInitializedPosition=!1;this.EDGE_THRESHOLD=150;this.MAX_SCROLL_SPEED=25;this.activeArrowKeys=new Set;this.keyboardScrollDirection={x:0,y:0};this.interactionState={isMouseOver:!1,mouseX:0,mouseY:0};this.animationFrameId=null;this.lastGridPosition={x:-1,y:-1};this.galleryPreviewTimers=new Map;this.autoNavigationCountdownIntervalId=null;this.autoNavigationHintTimeoutId=null;this.interactiveCursor=null;this.supportsFinePointer=typeof window<"u"&&window.matchMedia("(pointer: fine)").matches;this.boundCloseContextMenu=this.closeContextMenu.bind(this),this.boundOnFullscreenChange=this.onFullscreenChange.bind(this),this.boundOnMouseEnter=this.onMouseEnter.bind(this),this.boundOnMouseLeave=this.onMouseLeave.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.supportsFinePointer&&qe(()=>{let e=this.isIdle()||this.isAutoNavigationActive();document.body.classList.toggle("custom-cursor-hidden",e)}),qe(()=>{this.isViewInitialized()&&(this.currentView(),this.images(),this.galleryService.galleries(),this.updateVisibleItems(!0))}),qe(()=>{if(!this.isViewInitialized())return;let e=this.isMobileLayout(),t=this.currentView(),r=this.galleryService.galleries();e&&t==="galleries"&&r.length>0&&this.resetMobileScrollPosition()}),qe(()=>{let e=this.expandedItemElement(),t=this.expandedItem();e&&t&&this.runExpandAnimation(e.nativeElement,t)}),qe(()=>{let e=this.pendingCaptures();if(e.length===0){this.pendingCaptureToAssign()&&this.pendingCaptureToAssign.set(null);return}let t=this.pendingCaptureToAssign();(!t||!e.includes(t))&&this.pendingCaptureToAssign.set(e[0])}),qe(()=>{let e=this.galleries(),t=this.mobileCaptureGalleryId();t&&!e.some(r=>r.id===t)&&this.mobileCaptureGalleryId.set(null),!t&&e.length===1&&this.mobileCaptureGalleryId.set(e[0].id)}),qe(()=>{let e=this.capturableGalleries(),t=this.mobileCaptureGalleryId(),r=this.galleryService.selectedGalleryId(),i=t!==null&&e.some(o=>o.id===t);if(t&&!i){this.mobileCaptureGalleryId.set(null);return}!t&&r&&e.some(s=>s.id===r)&&this.mobileCaptureGalleryId.set(r)},{allowSignalWrites:!0}),qe(()=>{let e=this.capturableGalleries(),t=this.desktopCaptureGalleryId();t&&!e.some(r=>r.id===t)&&this.desktopCaptureGalleryId.set(e[0]?.id??null),!t&&e.length===1&&this.desktopCaptureGalleryId.set(e[0].id)},{allowSignalWrites:!0}),qe(()=>{this.isGalleryCreationDialogVisible()||(this.assignNextGalleryToMobileCapture=!1)}),qe(()=>{let e=this.authService.isLoading(),t=this.galleryService.isLoading(),r=this.authService.session(),i=this.resolvedUserGalleryId(),o=this.isMobileLayout(),s=this.canManageContent(),a=this.galleries().length>0;if(!(e||t)){if(!r){this.hasInitializedView.set(!1);return}if(!this.hasInitializedView()){if(!s&&!a){this.currentView.set("galleries"),o&&this.mobileView.set("galleries"),this.isGalleryCreationDialogVisible.set(!0),this.hasInitializedView.set(!0);return}s?(this.currentView.set("galleries"),o&&this.mobileView.set("capture")):i&&(this.galleryService.selectGallery(i),this.currentView.set("photos"),this.mobileCaptureGalleryId.set(i),o&&this.mobileView.set("capture")),this.hasInitializedView.set(!0)}}},{allowSignalWrites:!0}),qe(()=>{this.isAuthenticated()||this.isLoginDialogVisible()||this.isLoginInProgress()||(this.isWebcamVisible()&&this.isWebcamVisible.set(!1),this.isGalleryEditorVisible()&&(this.isGalleryEditorVisible.set(!1),this.editingGallery.set(null)),this.isGalleryCreationDialogVisible()&&this.isGalleryCreationDialogVisible.set(!1),this.contextMenu().visible&&(this.contextMenu.set({visible:!1,x:0,y:0,groups:[]}),this.contextMenuGalleryId=null))}),this.resetInactivityTimer()}get hostBackgroundColor(){return this.themeService.bodyBackground()}get hostTextColor(){return this.themeService.bodyText()}handleSpacebar(e){if(e instanceof KeyboardEvent){let r=e.target;if(this.isTypingElement(r)||this.currentView()!=="photos")return;e.preventDefault()}if(this.currentView()!=="photos"||this.isWebcamVisible()||this.expandedItem()||this.isGalleryEditorVisible()||this.isGalleryCreationDialogVisible())return;let t=this.resolveCaptureTargetGallery();t&&(this.galleryService.selectGallery(t),this.openWebcamCapture())}handleCreateGalleryShortcut(e){let t=e.target;this.isTypingElement(t)||this.currentView()!=="galleries"||this.canCreateGalleries()&&(this.isWebcamVisible()||this.expandedItem()||this.isGalleryEditorVisible()||this.isGalleryCreationDialogVisible()||(e.preventDefault(),this.openGalleryCreationDialog()))}toggleFullscreenKey(e){let t=e.target;t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable||t.closest("input")||t.closest("textarea"))||(this.isInteractionEnabled()||this.isInfoDialogVisible())&&(e.preventDefault(),this.toggleFullscreen())}handleIKey(e){let t=e.target;t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable||t.closest("input")||t.closest("textarea"))||(e.preventDefault(),this.toggleInfoDialog())}handleQuitGalleryKey(e){let t=e.target;t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable||t.closest("input")||t.closest("textarea"))||this.currentView()==="photos"&&!this.expandedItem()&&!this.isGalleryEditorVisible()&&!this.isGalleryCreationDialogVisible()&&!this.isWebcamVisible()&&(e.preventDefault(),this.backToGalleries())}handlePKey(e){let t=e.target;this.isTypingElement(t)||(e.preventDefault(),this.toggleAutoNavigation())}handleEscapeKey(e){let t=e.target;if(!this.isTypingElement(t)&&!(!this.expandedItem()&&!this.isWebcamVisible()&&!this.isGalleryEditorVisible()&&!this.isGalleryCreationDialogVisible()&&!this.isInfoDialogVisible()&&!this.contextMenu().visible&&!document.fullscreenElement)){if(e.preventDefault(),this.expandedItem()){this.closeExpandedItem();return}if(this.isWebcamVisible()){this.isWebcamVisible.set(!1);return}if(this.isGalleryEditorVisible()){this.isGalleryEditorVisible.set(!1),this.editingGallery.set(null);return}if(this.isGalleryCreationDialogVisible()){this.isGalleryCreationDialogVisible.set(!1);return}if(this.isInfoDialogVisible()){this.isInfoDialogVisible.set(!1);return}if(this.contextMenu().visible){this.closeContextMenu();return}document.fullscreenElement&&typeof document.exitFullscreen=="function"&&document.exitFullscreen().catch(r=>{console.error("Erro ao sair da tela cheia:",r)})}}toggleAutoNavigation(){if(this.currentView()==="galleries"){if(this.autoNavigationCountdown()!==null){this.cancelAutoNavigationCountdown(),this.resetInactivityTimer();return}if(this.isAutoNavigationActive()){this.deactivateAutoNavigation();return}this.hasVisibleGalleries()&&this.startAutoNavigationCountdown()}}isAutoNavigationSequenceActive(){return this.autoNavigationCountdown()!==null||this.isAutoNavigationActive()}startAutoNavigationCountdown(){if(this.cancelAutoNavigationCountdown(),!this.hasVisibleGalleries()){this.resetInactivityTimer();return}let e=this.AUTO_NAVIGATION_COUNTDOWN_DURATION;this.autoNavigationCountdown.set(e),this.autoNavigationCountdownIntervalId=setInterval(()=>{if(e-=1,e>0){this.ngZone.run(()=>this.autoNavigationCountdown.set(e));return}this.autoNavigationCountdownIntervalId&&(clearInterval(this.autoNavigationCountdownIntervalId),this.autoNavigationCountdownIntervalId=null),this.ngZone.run(()=>{this.autoNavigationCountdown.set(null),this.activateAutoNavigation()})},1e3)}cancelAutoNavigationCountdown(){this.autoNavigationCountdownIntervalId&&(clearInterval(this.autoNavigationCountdownIntervalId),this.autoNavigationCountdownIntervalId=null),this.autoNavigationCountdown.set(null)}activateAutoNavigation(){this.hasVisibleGalleries()&&(this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null),this.configureIdleEllipse(),this.stopAllGalleryPreviews(),this.isAutoNavigationActive.set(!0),this.isIdle.set(!0),this.showAutoNavigationHint())}deactivateAutoNavigation(e=!1){if(!this.isAutoNavigationActive()){this.cancelAutoNavigationCountdown();return}this.isAutoNavigationActive.set(!1),this.exitIdleMode(),this.cancelAutoNavigationCountdown(),this.hideAutoNavigationHint(),e||this.resetInactivityTimer()}showAutoNavigationHint(){this.autoNavigationHintTimeoutId&&clearTimeout(this.autoNavigationHintTimeoutId),this.autoNavigationHintVisible.set(!0),this.autoNavigationHintTimeoutId=setTimeout(()=>{this.autoNavigationHintTimeoutId=null,this.ngZone.run(()=>this.autoNavigationHintVisible.set(!1))},this.AUTO_NAVIGATION_HINT_DURATION)}hideAutoNavigationHint(){this.autoNavigationHintTimeoutId&&(clearTimeout(this.autoNavigationHintTimeoutId),this.autoNavigationHintTimeoutId=null),this.autoNavigationHintVisible.set(!1)}getVisibleGalleryItems(){return this.visibleItems().filter(e=>e.type==="gallery")}hasVisibleGalleries(){return this.getVisibleGalleryItems().length>0}handleThemeKey(e){let t=e.target;this.isTypingElement(t)||(e.preventDefault(),this.toggleThemeMode())}handleAdminAccessShortcut(e){let t=e.target;if(this.isLoginDialogVisible()||this.isAuthenticated()||this.isTypingElement(t))return;let r=e.key.toLowerCase();!e.ctrlKey&&!e.altKey&&!e.metaKey&&r==="n"&&(e.preventDefault(),this.openLoginDialog())}toggleThemeMode(){this.themeService.toggleTheme()}openLoginDialog(){if(!this.isLoginDialogVisible()){if(this.isSignUpDialogVisible()&&this.isSignUpDialogVisible.set(!1),this.loginError.set(null),!this.loginEmail()){let e=this.authUserEmail();e&&this.loginEmail.set(e)}this.isLoginDialogVisible.set(!0)}}closeLoginDialog(){this.isLoginInProgress()||this.isLoginDialogVisible.set(!1)}submitLogin(){return p(this,null,function*(){if(!this.isLoginInProgress()){this.isLoginInProgress.set(!0),this.loginError.set(null);try{let e=yield this.authService.signIn(this.loginEmail(),this.loginPassword());if(e.error){this.loginError.set(e.error);return}yield this.galleryService.initialize(),this.hasInitializedView.set(!1),this.isLoginDialogVisible.set(!1),this.loginPassword.set("")}finally{this.isLoginInProgress.set(!1)}}})}openSignUpDialog(){if(!this.isSignUpDialogVisible()){if(this.signUpError.set(null),this.signUpPassword.set(""),this.signUpConfirmPassword.set(""),!this.signUpEmail()){let e=this.authUserEmail()??this.loginEmail();e&&this.signUpEmail.set(e)}this.isLoginDialogVisible()&&this.isLoginDialogVisible.set(!1),this.isSignUpDialogVisible.set(!0)}}closeSignUpDialog(){this.isSignUpInProgress()||this.isSignUpDialogVisible.set(!1)}submitSignUp(){return p(this,null,function*(){if(this.isSignUpInProgress())return;let e=this.signUpEmail().trim(),t=this.signUpPassword().trim(),r=this.signUpConfirmPassword().trim();if(!e||!t){this.signUpError.set("Informe email e senha para continuar.");return}if(t!==r){this.signUpError.set("As senhas n\xE3o coincidem.");return}this.isSignUpInProgress.set(!0),this.signUpError.set(null);let i=yield this.authService.signUp(e,t);if(i.error){this.signUpError.set(i.error),this.isSignUpInProgress.set(!1);return}this.handleSignUpSuccess(e)})}handleSignUpSuccess(e){this.signUpEmail.set(e),this.loginEmail.set(e),this.signUpSuccessEmail.set(e),this.signUpError.set(null),this.isSignUpDialogVisible.set(!1),this.signUpPassword.set(""),this.signUpConfirmPassword.set(""),this.isSignUpInProgress.set(!1),this.isSignUpSuccessDialogVisible.set(!0)}closeSignUpSuccessDialog(){this.isSignUpSuccessDialogVisible.set(!1)}openLoginFromSignUpDialog(){if(this.isSignUpInProgress())return;let e=this.signUpEmail();e&&this.loginEmail.set(e),this.isSignUpDialogVisible.set(!1),this.openLoginDialog()}openLoginFromSignUpSuccess(){let e=this.signUpSuccessEmail();e&&this.loginEmail.set(e),this.isSignUpSuccessDialogVisible.set(!1),this.openLoginDialog()}signOut(){return p(this,null,function*(){this.closeUserMenu(),yield this.authService.signOut(),yield this.resetAfterAuthChange()})}openSettingsDialog(){this.closeUserMenu(),this.deleteAccountError.set(null),this.isSettingsDialogVisible.set(!0)}closeSettingsDialog(){this.isDeleteAccountInProgress()||(this.isSettingsDialogVisible.set(!1),this.deleteAccountError.set(null))}confirmAccountDeletion(){return p(this,null,function*(){if(!this.isDeleteAccountInProgress()){this.deleteAccountError.set(null),this.isDeleteAccountInProgress.set(!0);try{let e=yield this.supabaseAuthClient.getSession();if(!e){yield this.handleUnauthorizedDeletion("N\xE3o foi poss\xEDvel validar sua sess\xE3o. Fa\xE7a login novamente.");return}let t=yield fetch("https://ouqykxafhtctlaymzoxw.functions.supabase.co/delete-account",{method:"POST",headers:{Authorization:`${e.tokenType} ${e.accessToken}`}});if(t.status===200){yield this.handleAccountDeletionSuccess();return}if(t.status===401){yield this.handleUnauthorizedDeletion();return}if(t.status>=500){this.deleteAccountError.set("Encontramos um problema ao excluir a conta. Tente novamente em instantes.");return}this.deleteAccountError.set(yield this.extractDeleteAccountError(t))}catch(e){console.error("Erro ao excluir conta:",e),this.deleteAccountError.set("N\xE3o foi poss\xEDvel excluir a conta. Tente novamente.")}finally{this.isDeleteAccountInProgress.set(!1)}}})}handleAccountDeletionSuccess(){return p(this,null,function*(){yield this.supabaseAuthClient.signOut(),yield this.resetAfterAuthChange(),this.redirectToPublicView()})}handleUnauthorizedDeletion(e){return p(this,null,function*(){this.supabaseAuthClient.clearLocalSession(),e&&this.deleteAccountError.set(e),yield this.resetAfterAuthChange(),this.openLoginDialog()})}extractDeleteAccountError(e){return p(this,null,function*(){try{if(e.headers.get("content-type")?.includes("application/json")){let i=yield e.json(),o=i.message??i.error;if(o&&typeof o=="string")return o}let r=yield e.text();if(r)return r}catch(t){console.error("Erro ao interpretar resposta de exclus\xE3o de conta:",t)}return"N\xE3o foi poss\xEDvel excluir a conta. Tente novamente em instantes."})}resetAfterAuthChange(){return p(this,null,function*(){this.authService.resetState(),this.galleryService.resetState(),this.resetApplicationState(),yield this.galleryService.initialize()})}resetApplicationState(){this.contextMenu.set({visible:!1,x:0,y:0,groups:[]}),this.expandedItem.set(null),this.isWebcamVisible.set(!1),this.isGalleryEditorVisible.set(!1),this.isGalleryCreationDialogVisible.set(!1),this.isInfoDialogVisible.set(!1),this.isSettingsDialogVisible.set(!1),this.isUserMenuOpen.set(!1),this.isAutoNavigationActive.set(!1),this.autoNavigationCountdown.set(null),this.autoNavigationHintVisible.set(!1),this.isLoginDialogVisible.set(!1),this.loginPassword.set(""),this.loginError.set(null),this.signUpEmail.set(""),this.isSignUpDialogVisible.set(!1),this.signUpPassword.set(""),this.signUpConfirmPassword.set(""),this.signUpError.set(null),this.signUpSuccessEmail.set(null),this.isSignUpSuccessDialogVisible.set(!1),this.hasInitializedView.set(!1),this.mobileCaptureGalleryId.set(null),this.mobileView.set("capture"),this.mobileCommandPanelVisible.set(!1),this.currentView.set("galleries"),this.pendingCaptureToAssign.set(null),this.lastCapturedImage.set(null),this.isDeleteAccountInProgress.set(!1),this.deleteAccountError.set(null)}redirectToPublicView(){typeof window<"u"&&window.location&&window.location.replace(window.location.origin||"/")}toggleUserMenu(e){e.stopPropagation(),this.isUserMenuOpen.update(t=>!t)}closeUserMenu(){this.isUserMenuOpen.set(!1)}onUserGalleryAction(){if(!this.canAccessUserGalleryActions())return;let e=this.resolvedUserGalleryId();if(e){this.selectGallery(e);return}this.openGalleryCreationDialog()}refreshApp(){this.closeUserMenu(),window.location.reload()}pauseCanvasNavigation(){this.isNavigationPaused.set(!0)}resumeCanvasNavigation(e){if(e instanceof FocusEvent){let t=e.currentTarget;if(t&&e.relatedTarget instanceof HTMLElement&&t.contains(e.relatedTarget))return}this.isNavigationPaused.set(!1)}closeUserMenuOnOutside(e){if(!this.isUserMenuOpen())return;let t=e.target;(!t||!t.closest(".user-menu"))&&this.isUserMenuOpen.set(!1)}closeUserMenuOnEscape(){this.isUserMenuOpen()&&this.isUserMenuOpen.set(!1)}handleZoomKeys(e){this.isInteractionEnabled()&&(e.key==="+"||e.key==="="?(e.preventDefault(),this.zoomIn()):e.key==="-"&&(e.preventDefault(),this.zoomOut()))}handleArrowNavigation(e){if(!ib(e.key))return;let t=e.target;t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable||t.closest("input")||t.closest("textarea"))||!this.isInteractionEnabled()||(e.preventDefault(),this.resetInactivityTimer(),this.activeArrowKeys.add(e.key),this.updateKeyboardScrollDirection())}handleArrowNavigationRelease(e){ib(e.key)&&this.activeArrowKeys.size&&(e.preventDefault(),this.activeArrowKeys.delete(e.key),this.updateKeyboardScrollDirection())}createGeneralGroup(e=!0){let t=["toggleTheme"];return e&&this.currentView()==="galleries"&&t.push("togglePlayback"),t.push("toggleFullscreen","info"),{label:this.generalGroupLabel,actions:t}}isTypingElement(e){return!!e&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable||!!e.closest("input")||!!e.closest("textarea"))}ngOnInit(){let e=this.authService.getSupabaseClient(),{data:t}=e.auth.onAuthStateChange((r,i)=>{console.log(`Supabase auth event: ${r}`),r==="SIGNED_IN"&&i&&this.authService.initialize().catch(o=>{console.error("Falha ao inicializar sess\xE3o ap\xF3s retorno do Supabase:",o)})});this.supabaseAuthSubscription=t.subscription,this.startAnimationLoop(),document.addEventListener("click",this.boundCloseContextMenu,!0),document.addEventListener("fullscreenchange",this.boundOnFullscreenChange),this.updateTime(),this.updateDate(),this.clockIntervalId=setInterval(()=>this.updateTime(),1e3)}ngAfterViewInit(){this.onResize(),this.isViewInitialized.set(!0),new ResizeObserver(()=>this.onResize()).observe(this.elementRef.nativeElement);let t=this.elementRef.nativeElement;t.addEventListener("mouseenter",this.boundOnMouseEnter),t.addEventListener("mouseleave",this.boundOnMouseLeave),window.addEventListener("mousemove",this.boundOnMouseMove),this.supportsFinePointer&&(this.interactiveCursor=new Uc(".custom-cursor")),this.isMobileLayout()&&this.scheduleMobilePanelReveal()}ngOnDestroy(){this.stopAllGalleryPreviews(),this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.supabaseAuthSubscription&&(this.supabaseAuthSubscription.unsubscribe(),this.supabaseAuthSubscription=null),document.removeEventListener("click",this.boundCloseContextMenu,!0),document.removeEventListener("fullscreenchange",this.boundOnFullscreenChange);let e=this.elementRef.nativeElement;e.removeEventListener("mouseenter",this.boundOnMouseEnter),e.removeEventListener("mouseleave",this.boundOnMouseLeave),window.removeEventListener("mousemove",this.boundOnMouseMove),this.clockIntervalId&&clearInterval(this.clockIntervalId),clearTimeout(this.inactivityTimeoutId),this.autoNavigationHintTimeoutId&&(clearTimeout(this.autoNavigationHintTimeoutId),this.autoNavigationHintTimeoutId=null),this.autoNavigationHintVisible.set(!1),this.interactiveCursor?.destroy(),this.interactiveCursor=null,document.body.classList.remove("custom-cursor-hidden"),this.clearMobileScrollTimeout(),this.mobileScrollResetTimeout&&(clearTimeout(this.mobileScrollResetTimeout),this.mobileScrollResetTimeout=null),this.clearMobileGallerySelectorLongPress()}resetInactivityTimer(){this.isAutoNavigationActive()?this.deactivateAutoNavigation(!0):this.exitIdleMode(),this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null),this.isAutoNavigationSequenceActive()}configureIdleEllipse(){let e=window.innerWidth,t=window.innerHeight;this.idleEllipseRadiusX=e*2.5,this.idleEllipseRadiusY=t*1.5;let r=this.target.x,i=this.target.y;this.idleEllipseCenter.x=r-this.idleEllipseRadiusX,this.idleEllipseCenter.y=i,this.idleEllipseAngle=0}exitIdleMode(){this.isIdle()&&(this.isIdle.set(!1),this.idleEllipseAngle=0)}calculateGridDimensions(){let e=(this.numColumns()-1)*this.ITEM_GAP,t=this.elementRef.nativeElement.clientWidth;this.itemDimensions.width=(t-e)/this.numColumns(),this.itemDimensions.height=this.itemDimensions.width,this.itemDimensions.cellWidth=this.itemDimensions.width+this.ITEM_GAP,this.itemDimensions.cellHeight=this.itemDimensions.height+this.ITEM_GAP;let r=this.elementRef.nativeElement.getBoundingClientRect();this.viewport.width=r.width,this.viewport.height=r.height}updateTeleportationAnchors(){if(this.viewport.width===0||this.viewport.height===0)return;let e=-this.itemDimensions.cellWidth+(this.viewport.width-this.itemDimensions.width)/2,t=-this.itemDimensions.cellHeight+(this.viewport.height-this.itemDimensions.height)/2,r=e-this.initialPosition.x,i=t-this.initialPosition.y;this.initialPosition.x=e,this.initialPosition.y=t;let o=Math.max(this.numColumns(),Math.ceil(this.viewport.width/this.itemDimensions.cellWidth)),s=Math.max(1,Math.ceil(this.viewport.height/this.itemDimensions.cellHeight));this.teleportDistance.x=this.itemDimensions.cellWidth*(o+this.settings.bufferZone*2),this.teleportDistance.y=this.itemDimensions.cellHeight*(s+this.settings.bufferZone*2),this.hasInitializedPosition?(this.current.x+=r,this.current.y+=i,this.target.x+=r,this.target.y+=i):(this.current.x=e,this.current.y=t,this.target.x=e,this.target.y=t,this.hasInitializedPosition=!0)}applyTeleportation(){if(!this.hasInitializedPosition)return;let{x:e,y:t}=this.initialPosition,{x:r,y:i}=this.teleportDistance;r>0&&(this.current.x>e+r?(this.current.x-=r,this.target.x-=r):this.current.x<e-r&&(this.current.x+=r,this.target.x+=r)),i>0&&(this.current.y>t+i?(this.current.y-=i,this.target.y-=i):this.current.y<t-i&&(this.current.y+=i,this.target.y+=i))}onMouseEnter(){this.interactionState.isMouseOver=!0,!this.isAutoNavigationActive()&&this.resetInactivityTimer()}onMouseLeave(){this.interactionState.isMouseOver=!1}onMouseMove(e){if(!this.interactionState.isMouseOver)return;let t=this.elementRef.nativeElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,o=Math.min(Math.max(r,0),t.width),s=Math.min(Math.max(i,0),t.height);this.interactionState.mouseX=o,this.interactionState.mouseY=s,!this.isAutoNavigationActive()&&this.resetInactivityTimer()}calculateEdgeScroll(){if(!this.interactionState.isMouseOver)return{deltaX:0,deltaY:0};if(this.contextMenu().visible)return{deltaX:0,deltaY:0};let e=this.viewport.width,t=this.viewport.height;if(e<=0||t<=0)return{deltaX:0,deltaY:0};let{mouseX:r,mouseY:i}=this.interactionState,o=0,s=0;if(r<this.EDGE_THRESHOLD)o=Math.min(1,Math.max(0,1-r/this.EDGE_THRESHOLD))*this.MAX_SCROLL_SPEED;else if(r>e-this.EDGE_THRESHOLD){let a=r-(e-this.EDGE_THRESHOLD);o=-Math.min(1,Math.max(0,a/this.EDGE_THRESHOLD))*this.MAX_SCROLL_SPEED}if(i<this.EDGE_THRESHOLD)s=Math.min(1,Math.max(0,1-i/this.EDGE_THRESHOLD))*this.MAX_SCROLL_SPEED;else if(i>t-this.EDGE_THRESHOLD){let a=i-(t-this.EDGE_THRESHOLD);s=-Math.min(1,Math.max(0,a/this.EDGE_THRESHOLD))*this.MAX_SCROLL_SPEED}return{deltaX:o,deltaY:s}}calculateKeyboardScroll(){return this.keyboardScrollDirection.x===0&&this.keyboardScrollDirection.y===0?{deltaX:0,deltaY:0}:{deltaX:this.keyboardScrollDirection.x*this.MAX_SCROLL_SPEED,deltaY:this.keyboardScrollDirection.y*this.MAX_SCROLL_SPEED}}updateResponsiveLayout(){let e=window.innerWidth<=this.MOBILE_BREAKPOINT,t=this.isMobileLayout();this.isMobileLayout.set(e),e?(t||(this.mobileView.set("capture"),this.mobileCommandPanelVisible.set(!1)),this.scheduleMobilePanelReveal(t?600:400)):t&&(this.mobileCommandPanelVisible.set(!1),this.clearMobileScrollTimeout(),this.lastMobileScrollTop=0)}clearMobileScrollTimeout(){this.mobileScrollTimeoutId&&(clearTimeout(this.mobileScrollTimeoutId),this.mobileScrollTimeoutId=null)}clearMobileGallerySelectorLongPress(){this.mobileGallerySelectorLongPressTimeoutId&&(clearTimeout(this.mobileGallerySelectorLongPressTimeoutId),this.mobileGallerySelectorLongPressTimeoutId=null)}scheduleMobilePanelReveal(e=600){this.isMobileLayout()&&(this.clearMobileScrollTimeout(),this.mobileScrollTimeoutId=setTimeout(()=>{this.mobileCommandPanelVisible.set(!0),this.mobileScrollTimeoutId=null},e))}resetMobileScrollPosition(){this.isMobileLayout()&&(this.mobileScrollResetTimeout&&clearTimeout(this.mobileScrollResetTimeout),this.mobileScrollResetTimeout=setTimeout(()=>{let e=this.mobileScrollContainer();if(!e)return;let t=e.nativeElement;t.scrollTo({top:0,behavior:"auto"}),this.lastMobileScrollTop=t.scrollTop},0))}onMobileScroll(){if(!this.isMobileLayout())return;let e=this.mobileScrollContainer();e&&(this.lastMobileScrollTop=e.nativeElement.scrollTop),this.mobileCommandPanelVisible.set(!1),this.scheduleMobilePanelReveal(700)}onMobileGallerySelectorPressStart(e){e.pointerType==="touch"&&(this.isAuthenticated()||this.isLoginDialogVisible()||this.isLoginInProgress()||this.isMobileLayout()&&(this.clearMobileGallerySelectorLongPress(),this.mobileGallerySelectorLongPressTimeoutId=setTimeout(()=>{this.mobileGallerySelectorLongPressTimeoutId=null,this.ngZone.run(()=>this.openLoginDialog())},this.MOBILE_LOGIN_LONG_PRESS_DURATION)))}onMobileGallerySelectorPressEnd(){this.clearMobileGallerySelectorLongPress()}onMobileGallerySelectorPressCancel(){this.clearMobileGallerySelectorLongPress()}onMobilePhotoClick(e,t,r){if(!this.isInteractionEnabled())return;let i={type:"photo",id:`mobile-${r}`,url:t,x:0,y:0,width:0,height:0,col:0,row:0,creationOrder:r+1};this.expandItem(i,e.currentTarget)}deleteExpandedPhoto(e){return p(this,null,function*(){if(e.stopPropagation(),!this.canManageSelectedGallery())return;let t=this.expandedItem();t&&(yield this.deletePhotoByUrl(t.url))})}mobileAddAction(){this.currentView()==="galleries"?this.canCreateGalleries()&&this.openGalleryCreationDialog():this.canUseCaptureDialog()&&this.openWebcamCapture()}resolveCaptureTargetGallery(){let e=this.galleryService.selectedGalleryId();if(this.permissionsService.canCaptureInGallery(e))return e;let t=this.resolvedUserGalleryId();if(t&&this.permissionsService.canCaptureInGallery(t))return t;let r=this.galleries().filter(i=>this.permissionsService.canCaptureInGallery(i.id));return r.length===0?null:r.length===1?r[0].id:this.canManageContent()&&this.currentView()==="galleries"?this.promptGallerySelectionForCapture(r):r[0].id}promptGallerySelectionForCapture(e){let t=e.map((o,s)=>`${s+1}. ${o.name}`).join(`
`),r=window.prompt(`Selecione a galeria para capturar (digite o n\xFAmero correspondente):
`+t);if(!r)return null;let i=Number.parseInt(r,10)-1;return Number.isNaN(i)||i<0||i>=e.length?null:e[i].id}startCaptureForGallery(e){if(this.permissionsService.canCaptureInGallery(e)){if(this.isMobileLayout()){this.showCaptureWithGallery(e);return}this.onDesktopGalleryChange(e),this.openWebcamCapture()}}viewGallery(e){if(this.isMobileLayout()){this.openMobileGalleryDetail(e);return}this.selectGallery(e)}showMobileCapture(){this.currentView.set("galleries"),this.mobileView.set("capture"),this.handleMobileNavigationTransition()}openMobileGalleryDetail(e){!this.canViewMobileGalleryList()&&e!==this.resolvedUserGalleryId()||(this.selectGallery(e),this.mobileView.set("galleryDetail"))}deleteActiveGalleryFromMobile(){return p(this,null,function*(){if(!this.canDeleteSelectedGallery())return;let e=this.activeGallery();if(!e||!window.confirm("Tem certeza que deseja excluir esta galeria? Esta a\xE7\xE3o n\xE3o pode ser desfeita."))return;if(!(yield this.galleryService.deleteGallery(e.id))){this.notifyGalleryError();return}this.updateVisibleItems(!0),this.returnToMobileGalleries()})}returnToMobileGalleries(){if(!this.canViewMobileGalleryList()){this.mobileView.set("capture"),this.handleMobileNavigationTransition();return}this.currentView.set("galleries"),this.mobileView.set("galleries"),this.handleMobileNavigationTransition()}showCaptureWithGallery(e){this.permissionsService.canCaptureInGallery(e)&&(this.mobileCaptureGalleryId.set(e),this.galleryService.selectGallery(e),this.showMobileCapture())}useGalleryForCapture(e){this.permissionsService.canCaptureInGallery(e)&&(this.mobileCaptureGalleryId.set(e),this.showMobileCapture())}openMobileGalleryPicker(){this.canViewMobileGalleryList()&&(this.currentView.set("galleries"),this.mobileView.set("galleries"),this.handleMobileNavigationTransition())}selectMobileCaptureGallery(e){this.permissionsService.canCaptureInGallery(e)&&(this.mobileCaptureGalleryId.set(e),this.showMobileCapture())}prepareMobileCapture(){let e=this.mobileCaptureGalleryId();e&&this.permissionsService.canCaptureInGallery(e)&&(this.galleryService.selectGallery(e),this.captureMode.set("selected"))}prepareDesktopCapture(){let e=this.desktopCaptureGalleryId();e&&this.permissionsService.canCaptureInGallery(e)&&(this.galleryService.selectGallery(e),this.captureMode.set("selected"))}onDesktopGallerySelect(e,t){let i=e.target?.value;i&&(this.onDesktopGalleryChange(i),t?.notifyGalleryChange(i))}onDesktopGalleryChange(e){this.permissionsService.canCaptureInGallery(e)&&(this.desktopCaptureGalleryId.set(e),this.galleryService.selectGallery(e),this.captureMode.set("selected"))}openGalleryCreationDialogForMobileCapture(){this.canCreateGalleries()&&(this.assignNextGalleryToMobileCapture=!0,this.openGalleryCreationDialog())}onCaptureComplete(e){return p(this,null,function*(){let t=this.galleryService.selectedGalleryId();if(!t){this.galleryService.addPendingCapture(e),this.lastCapturedImage.set(e);return}if(!(yield this.galleryService.addImageToGallery(t,e))){this.notifyGalleryError();return}this.lastCapturedImage.set(e)})}assignPendingToGallery(e,t){return p(this,null,function*(){let r=t??this.selectedPendingCapture();if(!r)return;if(!(yield this.galleryService.assignPendingCaptureToGallery(e,r))){this.notifyGalleryError();return}this.lastCapturedImage.set(r),this.pendingCaptureToAssign()===r&&this.pendingCaptureToAssign.set(null)})}discardPendingCapture(e){this.galleryService.removePendingCapture(e),this.pendingCaptureToAssign()===e&&this.pendingCaptureToAssign.set(null)}onPendingGallerySelect(e,t){let r=e.target,i=r.value;i&&(this.assignPendingToGallery(i,t),r.value="")}getGalleryCover(e){return e.thumbnailUrl?e.thumbnailUrl:e.imageUrls&&e.imageUrls.length>0?e.imageUrls[0]:"https://via.placeholder.com/800x800?text=Galeria"}handleMobileNavigationTransition(){this.isMobileLayout()&&(this.mobileCommandPanelVisible.set(!1),this.scheduleMobilePanelReveal(500),this.resetMobileScrollPosition())}trackMobileGallery(e,t){return t.id}trackMobileImage(e,t){return`${e}-${t}`}trackPendingCapture(e,t){return`${e}-${t}`}updateVisibleItems(e=!1){let t=[],r=!1;if(this.currentView()==="galleries"?(t=this.galleryService.galleries(),r=!0):t=this.images(),t.length===0){this.visibleItems.set([]);return}let i={x:Math.round(this.current.x/100),y:Math.round(this.current.y/100)};if(!e&&this.lastGridPosition.x===i.x&&this.lastGridPosition.y===i.y)return;this.lastGridPosition=i,(this.viewport.width===0||this.viewport.height===0)&&(this.calculateGridDimensions(),this.updateTeleportationAnchors());let o=this.viewport.width,s=this.viewport.height;if(o===0||s===0)return;let a=Math.floor(-this.current.x/this.itemDimensions.cellWidth-this.settings.bufferZone),l=Math.ceil((-this.current.x+o)/this.itemDimensions.cellWidth+this.settings.bufferZone),c=Math.floor(-this.current.y/this.itemDimensions.cellHeight-this.settings.bufferZone),u=Math.ceil((-this.current.y+s)/this.itemDimensions.cellHeight+this.settings.bufferZone),d=[];for(let h=c;h<=u;h++)for(let f=a;f<=l;f++){let b=this.getWrappedIndex(h*this.numColumns()+f,t.length),S=t[b],E=this.calculateCreationOrder(t.length,b);if(r){let w=S,L=`${w.id}-${f}-${h}`;d.push({type:"gallery",id:w.id,name:w.name,description:w.description,thumbnailUrl:w.thumbnailUrl||oM,imageUrls:w.imageUrls,imageCount:w.imageUrls.length,createdAt:w.createdAt,x:f*this.itemDimensions.cellWidth,y:h*this.itemDimensions.cellHeight,width:this.itemDimensions.width,height:this.itemDimensions.height,col:f,row:h,creationOrder:E,previewKey:L})}else{let w=S;d.push({type:"photo",id:`${f},${h}`,url:w,x:f*this.itemDimensions.cellWidth,y:h*this.itemDimensions.cellHeight,width:this.itemDimensions.width,height:this.itemDimensions.height,col:f,row:h,creationOrder:E})}}if(this.visibleItems.set(d),r&&!this.isAutoNavigationActive()){let h=new Set(d.filter(f=>f.type==="gallery").map(f=>f.previewKey));for(let f of Array.from(this.galleryPreviewTimers.keys()))h.has(f)||(this.clearGalleryPreviewTimers(f),this.setGalleryPreviewImage(f,null))}}getWrappedIndex(e,t){if(t<=0)return 0;let r=e%t;return r<0?r+t:r}calculateCreationOrder(e,t){return e<=0?0:e-t}onGalleryHoverStart(e,t){if(this.isAutoNavigationActive())return;let r=this.galleryService.getGallery(e);if(!r||r.imageUrls.length===0)return;this.clearGalleryPreviewTimers(t);let i=r.imageUrls;if(i.length>0){if(this.setGalleryPreviewImage(t,i[0]),i.length===1){this.galleryPreviewTimers.set(t,{startTimeoutId:null,intervalId:null});return}let o=setTimeout(()=>{this.ngZone.run(()=>this.startPreviewForGallery(e,t))},this.GALLERY_PREVIEW_DELAY);this.galleryPreviewTimers.set(t,{startTimeoutId:o,intervalId:null})}}onGalleryHoverEnd(e){this.clearGalleryPreviewTimers(e),this.setGalleryPreviewImage(e,null)}startPreviewForGallery(e,t){let r=this.galleryService.getGallery(e);if(!r||r.imageUrls.length===0)return;this.clearGalleryPreviewTimers(t);let o=this.galleryService.getGallery(e)?.imageUrls??[];if(o.length===0){this.onGalleryHoverEnd(t);return}if(o.length===1){this.setGalleryPreviewImage(t,o[0]),this.galleryPreviewTimers.delete(t);return}let s=0,a=()=>{let u=this.galleryService.getGallery(e)?.imageUrls??o;if(u.length===0){this.onGalleryHoverEnd(t);return}s>=u.length&&(s=0),this.setGalleryPreviewImage(t,u[s]),s=(s+1)%u.length};a();let l=setInterval(()=>{a()},this.GALLERY_PREVIEW_INTERVAL);this.galleryPreviewTimers.set(t,{startTimeoutId:null,intervalId:l})}setGalleryPreviewImage(e,t){this.galleryPreviewImages.update(r=>{let i=U({},r);return t?i[e]=t:delete i[e],i})}clearGalleryPreviewTimers(e){let t=this.galleryPreviewTimers.get(e);t&&(t.startTimeoutId&&clearTimeout(t.startTimeoutId),t.intervalId&&clearInterval(t.intervalId),this.galleryPreviewTimers.delete(e))}stopAllGalleryPreviews(){let e=Array.from(this.galleryPreviewTimers.keys());for(let t of e)this.clearGalleryPreviewTimers(t);this.galleryPreviewImages.set({})}startAnimationLoop(){this.ngZone.runOutsideAngular(()=>{let e=()=>{if(!this.isMobileLayout()){if(this.isAutoNavigationActive())this.idleEllipseAngle+=this.idleSpeed,this.target.x=this.idleEllipseCenter.x+this.idleEllipseRadiusX*Math.cos(this.idleEllipseAngle),this.target.y=this.idleEllipseCenter.y+this.idleEllipseRadiusY*Math.sin(this.idleEllipseAngle);else if(this.isInteractionEnabled()){let{deltaX:r,deltaY:i}=this.calculateEdgeScroll(),{deltaX:o,deltaY:s}=this.calculateKeyboardScroll(),a=r+o,l=i+s;(a!==0||l!==0)&&(this.target.x+=a,this.target.y+=l)}if(this.isAutoNavigationActive()||this.isInteractionEnabled()){this.current.x+=(this.target.x-this.current.x)*this.settings.dragEase,this.current.y+=(this.target.y-this.current.y)*this.settings.dragEase,this.applyTeleportation();let r=this.canvasWrapper();r&&(r.nativeElement.style.transform=`translate(${this.current.x}px, ${this.current.y}px)`),this.updateVisibleItems()}}this.animationFrameId=requestAnimationFrame(e)};e()})}runExpandAnimation(e,t){let r=window.innerWidth*.9,i=window.innerHeight*.9,o=t.originalWidth>0&&t.originalHeight>0?t.originalWidth/t.originalHeight:1,s=r,a=r/o;a>i&&(a=i,s=i*o);let l=t.originalRect.left+t.originalWidth/2-window.innerWidth/2,c=t.originalRect.top+t.originalHeight/2-window.innerHeight/2;e.getAnimations().forEach(d=>d.cancel()),e.style.width=`${t.originalWidth}px`,e.style.height=`${t.originalHeight}px`,e.style.transform=`translate(calc(-50% + ${l}px), calc(-50% + ${c}px))`,e.animate([{width:`${t.originalWidth}px`,height:`${t.originalHeight}px`,transform:`translate(calc(-50% + ${l}px), calc(-50% + ${c}px))`},{width:`${s}px`,height:`${a}px`,transform:"translate(-50%, -50%)"}],{duration:this.settings.zoomDuration*1e3,easing:rb,fill:"forwards"}).finished.then(()=>{e.style.width=`${s}px`,e.style.height=`${a}px`,e.style.transform="translate(-50%, -50%)"}).catch(()=>{})}editGallery(e){if(!this.permissionsService.canManageGalleryById(e))return;this.deactivateAutoNavigation(!0);let t=this.galleryService.getGallery(e);t&&(this.editingGallery.set(t),this.isGalleryEditorVisible.set(!0))}onResize(){this.calculateGridDimensions(),this.updateTeleportationAnchors(),this.updateVisibleItems(!0),this.updateResponsiveLayout(),this.expandedItem()&&this.closeExpandedItem()}zoomIn(){this.numColumns.update(e=>Math.max(1,e-1)),this.onResize()}zoomOut(){this.numColumns.update(e=>Math.min(8,e+1)),this.onResize()}updateKeyboardScrollDirection(){let e=(this.activeArrowKeys.has("ArrowLeft")?1:0)+(this.activeArrowKeys.has("ArrowRight")?-1:0),t=(this.activeArrowKeys.has("ArrowUp")?1:0)+(this.activeArrowKeys.has("ArrowDown")?-1:0);this.keyboardScrollDirection.x=e,this.keyboardScrollDirection.y=t}onImageClick(e,t){this.isInteractionEnabled()&&(t.type==="gallery"?this.selectGallery(t.id):this.expandItem(t,e.currentTarget))}expandItem(e,t){let r=t.getBoundingClientRect();this.expandedItem.set({id:e.id,url:e.url,originalRect:r,originalWidth:this.itemDimensions.width,originalHeight:this.itemDimensions.height})}handleGalleryCreate(e){return p(this,null,function*(){if(!this.canCreateGalleries())return;let t=yield this.galleryService.createGallery(e.name,e.description);if(!t){this.notifyGalleryError();return}this.isGalleryCreationDialogVisible.set(!1),this.selectGallery(t),this.assignNextGalleryToMobileCapture&&(this.mobileCaptureGalleryId.set(t),this.assignNextGalleryToMobileCapture=!1),this.updateVisibleItems(!0)})}handleGallerySave(e){return p(this,null,function*(){if(e.id){if(!this.permissionsService.canManageGalleryById(e.id))return;if(!(yield this.galleryService.updateGallery(e.id,e.name,e.description))){this.notifyGalleryError();return}}else{if(!this.canCreateGalleries())return;let t=yield this.galleryService.createGallery(e.name,e.description);if(!t){this.notifyGalleryError();return}this.assignNextGalleryToMobileCapture&&(this.mobileCaptureGalleryId.set(t),this.assignNextGalleryToMobileCapture=!1),this.selectGallery(t)}this.isGalleryEditorVisible.set(!1),this.editingGallery.set(null),this.updateVisibleItems(!0)})}handleGalleryDelete(e){return p(this,null,function*(){if(!this.permissionsService.canManageGalleryById(e))return;if(!(yield this.galleryService.deleteGallery(e))){this.notifyGalleryError();return}this.isGalleryEditorVisible.set(!1),this.editingGallery.set(null),this.updateVisibleItems(!0)})}onRightClick(e){e.preventDefault();let t=[this.createGeneralGroup()];this.currentView()==="galleries"&&this.canCreateGalleries()?t.push({label:"Galerias",actions:["createGallery"]}):this.currentView()==="photos"&&this.canUseCaptureDialog()&&t.push({label:"Fotos",actions:["capturePhoto"]}),this.contextMenu.set({visible:!0,x:e.clientX,y:e.clientY,groups:t}),this.contextMenuPhotoUrl=null,this.contextMenuGalleryId=null}onGalleryRightClick(e,t){if(e.preventDefault(),e.stopPropagation(),this.currentView()==="galleries"){let r=[this.createGeneralGroup()];this.canCreateGalleries()&&r.push({label:"Galerias",actions:["createGallery"]}),this.permissionsService.canManageGalleryById(t)&&r.push({label:"Galeria selecionada",actions:["togglePlayback","editGallery","deleteGallery"]}),this.contextMenu.set({visible:!0,x:e.clientX,y:e.clientY,groups:r}),this.contextMenuGalleryId=t,this.contextMenuPhotoUrl=null}}onPhotoRightClick(e,t){if(this.isMobileLayout())return;e.preventDefault(),e.stopPropagation();let r=[this.createGeneralGroup(!1)];if(this.canUseCaptureDialog()){let i=this.canCaptureInSelectedGallery()?["capturePhoto","deletePhoto"]:["capturePhoto"];r.push({label:"Fotos",actions:i})}this.contextMenu.set({visible:!0,x:e.clientX,y:e.clientY,groups:r}),this.contextMenuPhotoUrl=t,this.contextMenuGalleryId=null}closeContextMenu(e){e&&e.target?.closest("app-context-menu")||(this.contextMenu.set({visible:!1,x:0,y:0,groups:[]}),this.contextMenuGalleryId=null,this.contextMenuPhotoUrl=null)}openWebcamCapture(){if(!this.canUseCaptureDialog())return;let e=this.resolveCaptureTargetGallery();if(e){if(this.galleryService.selectGallery(e),this.isMobileLayout()){this.captureMode.set("selected"),this.mobileCaptureGalleryId.set(e),this.showMobileCapture();return}this.desktopCaptureGalleryId.set(e),this.captureMode.set("selected"),this.deactivateAutoNavigation(!0),this.isWebcamVisible.set(!0)}}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(e=>{console.error(`Error attempting to enable fullscreen: ${e.message}`)})}onFullscreenChange(){this.isFullscreen.set(!!document.fullscreenElement)}updateTime(){let e=new Date;this.currentTime.set(e.toLocaleTimeString("pt-BR"))}updateDate(){let e=new Date;this.currentDate.set(e.toLocaleDateString("pt-BR"))}selectGallery(e){this.deactivateAutoNavigation(!0),this.stopAllGalleryPreviews(),this.galleryService.selectGallery(e),this.currentView.set("photos"),this.handleMobileNavigationTransition()}deleteGallery(e){return p(this,null,function*(){if(!this.permissionsService.canManageGalleryById(e))return;let t=this.galleryService.selectedGalleryId();if(!(yield this.galleryService.deleteGallery(e))){this.notifyGalleryError();return}t===e&&this.backToGalleries(),this.updateVisibleItems(!0)})}deletePhotoByUrl(e){return p(this,null,function*(){if(!this.canDeletePhoto())return;let t=this.galleryService.selectedGalleryId();if(!t||!this.confirmPhotoDeletion())return;if(!(yield this.galleryService.removeImageFromGallery(t,e))){this.notifyGalleryError();return}this.updateVisibleItems(!0),this.expandedItem()?.url===e&&this.closeExpandedItem()})}confirmPhotoDeletion(){return window.confirm("Tem certeza que deseja excluir esta foto? Esta a\xE7\xE3o n\xE3o pode ser desfeita.")}editGalleryContextMenu(){this.permissionsService.canManageGalleryById(this.contextMenuGalleryId)&&this.contextMenuGalleryId&&this.editGallery(this.contextMenuGalleryId)}deleteGalleryContextMenu(){this.permissionsService.canManageGalleryById(this.contextMenuGalleryId)&&this.contextMenuGalleryId&&this.deleteGallery(this.contextMenuGalleryId)}deletePhotoContextMenu(){return p(this,null,function*(){this.canDeletePhoto()&&this.contextMenuPhotoUrl&&(yield this.deletePhotoByUrl(this.contextMenuPhotoUrl),this.contextMenuPhotoUrl=null)})}openGalleryCreationDialog(){this.canCreateGalleries()&&(this.deactivateAutoNavigation(!0),this.isGalleryCreationDialogVisible.set(!0))}toggleInfoDialog(){this.deactivateAutoNavigation(!0),this.isInfoDialogVisible.update(e=>!e)}createGalleryWithTimestamp(){return p(this,null,function*(){if(!this.canCreateGalleries())return;let e=new Date,t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear(),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0"),c=`Galeria ${`${t}/${r}/${i} \xE0s ${o}:${s}:${a}`}`,u=yield this.galleryService.createGallery(c,"Galeria criada automaticamente");if(!u){this.notifyGalleryError();return}this.selectGallery(u),this.updateVisibleItems(!0)})}backToGalleries(){this.deactivateAutoNavigation(!0),this.stopAllGalleryPreviews(),this.galleryService.selectGallery(null),this.currentView.set("galleries"),this.handleMobileNavigationTransition()}closeExpandedItem(){let e=this.expandedItemElement();if(e&&this.expandedItem()){let t=this.expandedItem(),r=e.nativeElement,i=r.getBoundingClientRect(),o=i.width,s=i.height,a=i.left+i.width/2-window.innerWidth/2,l=i.top+i.height/2-window.innerHeight/2,c=t.originalRect.left+t.originalWidth/2-window.innerWidth/2,u=t.originalRect.top+t.originalHeight/2-window.innerHeight/2;r.getAnimations().forEach(h=>h.cancel()),r.style.width=`${o}px`,r.style.height=`${s}px`,r.style.transform=`translate(calc(-50% + ${a}px), calc(-50% + ${l}px))`,r.animate([{width:`${o}px`,height:`${s}px`,transform:`translate(calc(-50% + ${a}px), calc(-50% + ${l}px))`},{width:`${t.originalWidth}px`,height:`${t.originalHeight}px`,transform:`translate(calc(-50% + ${c}px), calc(-50% + ${u}px))`}],{duration:600,easing:rb,fill:"forwards"}).finished.then(()=>{r.style.width=`${t.originalWidth}px`,r.style.height=`${t.originalHeight}px`,r.style.transform=`translate(calc(-50% + ${c}px), calc(-50% + ${u}px))`}).catch(()=>{}).finally(()=>{this.expandedItem.set(null)})}else this.expandedItem.set(null)}notifyGalleryError(){let e=this.galleryService.lastErrorMessage();e&&(console.warn(e),typeof window<"u"&&typeof window.alert=="function"&&window.alert(e))}trackById(e,t){return t.type==="gallery"?t.previewKey:t.id}};Ji.\u0275fac=function(t){return new(t||Ji)},Ji.\u0275cmp=Ge({type:Ji,selectors:[["app-root"]],viewQuery:function(t,r){t&1&&(xn(r.canvasWrapper,b1,5),xn(r.expandedItemElement,E1,5),xn(r.mobileScrollContainer,w1,5)),t&2&&$o(3)},hostVars:4,hostBindings:function(t,r){t&1&&x("keydown.space",function(o){return r.handleSpacebar(o)},We)("keydown.g",function(o){return r.handleCreateGalleryShortcut(o)},We)("keydown.f",function(o){return r.toggleFullscreenKey(o)},We)("keydown.i",function(o){return r.handleIKey(o)},We)("keydown.q",function(o){return r.handleQuitGalleryKey(o)},We)("keydown.p",function(o){return r.handlePKey(o)},We)("keydown.escape",function(){return r.closeUserMenuOnEscape()},We)("keydown.t",function(o){return r.handleThemeKey(o)},We)("keydown",function(o){return r.handleArrowNavigation(o)},We)("keydown",function(o){return r.handleAdminAccessShortcut(o)},af)("click",function(o){return r.closeUserMenuOnOutside(o)},We)("keyup",function(o){return r.handleArrowNavigationRelease(o)},We),t&2&&ie("background-color",r.hostBackgroundColor)("color",r.hostTextColor)},decls:27,vars:27,consts:[["userMenu",""],["captureGallerySelection",""],["mobileCapture",""],["mobileScrollContainer",""],["canvasWrapper",""],["expandedItemElement",""],["desktopCapture",""],[1,"app-shell",3,"contextmenu"],[1,"app-shell__viewport"],["role","status","aria-live","polite",1,"app-loading"],[1,"app-shell__status-bar"],["aria-hidden","true","data-auto-navigation-shield","",1,"auto-navigation-shield"],["data-cursor-pointer","",1,"screen-overlay",3,"click"],[1,"screen-overlay__media",2,"transform","translate(-50%, -50%)","will-change","width, height, transform"],[1,"counter"],[1,"auto-navigation-overlay"],["data-cursor-pointer","",1,"login-dialog"],[3,"x","y","isFullscreen","groups","themeMode","isAutoNavigationActive","autoNavigationCountdown","canEditGallery","canUploadToGallery","canDeletePhoto"],["data-cursor-pointer","",1,"overlay-panel"],[3,"gallery"],[3,"isDeleting","error"],["aria-hidden","true",1,"app-loading__glow"],[1,"app-loading__panel"],["aria-hidden","true",1,"app-loading__spinner"],[1,"app-loading__text"],[1,"app-loading__eyebrow"],[1,"app-loading__title"],[1,"app-loading__hint"],[1,"user-menu"],["type","button","data-cursor-pointer","","aria-label","Menu do perfil",1,"user-menu__trigger",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"icon","icon--md"],["stroke-linecap","round","stroke-linejoin","round","d","M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 20.25a8.25 8.25 0 0 1 15 0"],[1,"user-menu__dropdown"],[1,"user-menu__dropdown",3,"mouseenter","mouseleave","focusin","focusout"],[1,"user-menu__header"],[1,"user-menu__avatar"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"icon","icon--sm"],[1,"user-menu__details"],[1,"user-menu__email",3,"title"],[1,"user-menu__role"],[1,"user-menu__actions"],["type","button","data-cursor-pointer","",1,"button","button--ghost","user-menu__action","user-menu__action--subtle",3,"click"],["type","button","data-cursor-pointer","",1,"button","button--ghost","user-menu__action",3,"click"],[1,"app-shell__status-bar",3,"mouseenter","mouseleave","focusin","focusout"],[1,"app-shell__auth-actions"],["type","button","data-cursor-pointer","",1,"button","button--primary","app-shell__auth-button","app-shell__gallery-button"],[3,"ngTemplateOutlet"],["type","button","data-cursor-pointer","",1,"button","button--ghost","app-shell__auth-button",3,"click"],["type","button","data-cursor-pointer","",1,"button","button--primary","app-shell__auth-button","app-shell__gallery-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"icon","icon--sm"],["stroke-linecap","round","stroke-linejoin","round","d","M11.25 4.5 4.5 12l6.75 7.5"],["stroke-linecap","round","stroke-linejoin","round","d","M6 12h13.5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 6v12m6-6H6"],[1,"app-shell__status-bar","app-shell__status-bar--mobile"],[1,"app-shell__status-bar","app-shell__status-bar--mobile",3,"mouseenter","mouseleave","focusin","focusout"],[1,"capture-dialog__selection-panel","stack","stack--tight"],[1,"stack","stack--tight"],["type","button","data-cursor-pointer","",1,"mobile-card","mobile-card--action"],[1,"mobile-card","mobile-card--locked"],[1,"mobile-card__content"],[1,"mobile-card__heading"],[1,"mobile-card__title"],[1,"mobile-card__description"],["type","button","data-cursor-pointer","",1,"mobile-card","mobile-card--action",3,"click"],[1,"mobile-card__media"],[1,"mobile-card__placeholder"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"icon","icon--md"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],[3,"select","open","gallery","coverUrl","active","showActiveIndicator","selectable"],[1,"mobile-card__meta"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"mobile-card__chevron"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 5l7 7-7 7"],[3,"open","gallery","coverUrl","active","selectable","showActiveIndicator"],["type","button","data-cursor-pointer","",1,"mobile-card","mobile-card--action",3,"click","pointerdown","pointerup","pointerleave","pointercancel"],["stroke-linecap","round","stroke-linejoin","round","d","M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 19.5a8.25 8.25 0 0115 0M18 9.75h3m-1.5-1.5v3"],["type","button","data-cursor-pointer","",1,"button-reset","mobile-card__secondary-action",3,"click"],[1,"capture-dialog__selection-header"],[1,"capture-dialog__selection-title"],[1,"capture-dialog__selection-hint"],[1,"capture-dialog__selection-empty"],["type","button",1,"button","button--ghost","capture-dialog__selection-action"],["for","desktopCaptureGallery",1,"capture-dialog__selection-label"],["id","desktopCaptureGallery",1,"capture-dialog__selection-control",3,"change","value"],[3,"value"],[1,"capture-dialog__selection-description"],["type","button",1,"button","button--ghost","capture-dialog__selection-action",3,"click"],[1,"mobile-shell","mobile-shell--capture"],[1,"mobile-shell","mobile-shell--galleries"],[1,"mobile-shell","mobile-shell--detail"],[1,"mobile-shell__content","mobile-shell__content--capture"],[1,"app-shell__capture","full-area",3,"prepareCapture","capture","variant","captureAllowed"],["gallerySelection","","mobileGallerySelection",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mobile-shell__header"],["type","button",1,"button","button--ghost"],["type","button","title","Apenas administradores podem criar novas galerias",1,"button","button--ghost"],[1,"mobile-shell__content"],[1,"empty-state","empty-state--spaced"],[1,"stack","stack--loose"],["type","button",1,"button","button--ghost",3,"click"],["type","button","title","Apenas administradores podem criar novas galerias",1,"button","button--ghost",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","0.5","stroke","currentColor",1,"empty-state__icon"],["stroke-linecap","round","stroke-linejoin","round","d","m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"],[1,"empty-state__title"],[1,"empty-state__text"],[3,"gallery","coverUrl","active","selectable"],[3,"select","open","gallery","coverUrl","active","selectable"],[1,"mobile-shell__header","mobile-shell__header--detail"],["type","button","aria-label","Voltar para galerias",1,"button","button--ghost","button--icon",3,"click"],[1,"sr-only"],["aria-hidden","true",1,"button__icon"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 19.5 3 12l7.5-7.5M3 12h18"],[1,"mobile-shell__actions"],[1,"badge","badge--mono","badge--muted"],[1,"mobile-shell__content","mobile-shell__content--detail"],[1,"section-title"],[1,"section-description"],[1,"meta-list"],[1,"mobile-gallery-collection","gallery-mosaic","gallery-mosaic--dense"],["type","button","title","Dispon\xEDvel apenas para administradores ou propriet\xE1rios",1,"button","button--ghost",3,"click","disabled"],["type","button","aria-label","Excluir galeria","title","Dispon\xEDvel apenas para administradores ou propriet\xE1rios",1,"button","button--danger","button--icon",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673A2.25 2.25 0 0 1 15.916 21.75H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","0.5","stroke","currentColor",1,"empty-state__icon","empty-state__icon--sm"],["type","button",1,"photo-mosaic__item"],["type","button",1,"photo-mosaic__item",3,"click"],["loading","lazy","alt","Imagem da galeria",1,"photo-mosaic__image",3,"src"],[1,"photo-mosaic__border"],[1,"clock"],[1,"date-indicator"],["data-cursor-pointer","",1,"app-shell__back-button","button","button--icon"],[1,"empty-overlay"],[1,"absolute","gallery-canvas"],[1,"empty-overlay__title"],[1,"empty-overlay__text"],[1,"empty-overlay__actions"],[1,"empty-overlay__note"],[1,"flow"],["data-cursor-pointer","",1,"button","button--primary",3,"click"],[1,"canvas-wrapper"],[1,"gallery-card",3,"gallery-card--light","is-disabled","is-interactive","width","height","left","top"],[1,"gallery-card",3,"click","mouseenter","mouseleave","contextmenu"],[1,"gallery-card__media"],[1,"gallery-card__image",3,"load","src","alt"],[1,"gallery-card__overlay"],[1,"gallery-card__badge"],[1,"gallery-card__meta","stack","stack--tight"],[1,"meta-label"],[1,"meta-title"],[1,"empty-overlay","empty-overlay--interactive"],["data-cursor-pointer","","title","Apenas administradores ou propriet\xE1rios podem capturar nesta galeria",1,"button","button--primary",3,"click","disabled"],[1,"photo-card",3,"photo-card--light","is-disabled","is-interactive","width","height","left","top"],[1,"photo-card",3,"click","contextmenu"],[1,"photo-card__media"],["alt","Imagem da galeria capturada pela webcam",1,"photo-card__image",3,"load","src"],[1,"photo-card__overlay"],[1,"photo-card__badge"],["data-cursor-pointer","",1,"app-shell__back-button","button","button--icon",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["alt","Imagem expandida",1,"screen-overlay__image",3,"src"],["type","button","aria-label","Excluir foto","data-cursor-pointer","","title","Dispon\xEDvel apenas para administradores ou propriet\xE1rios",1,"screen-overlay__action","button","button--icon"],["type","button","aria-label","Excluir foto","data-cursor-pointer","","title","Dispon\xEDvel apenas para administradores ou propriet\xE1rios",1,"screen-overlay__action","button","button--icon",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M9.75 9.75h4.5m-4.5 3h4.5M10.5 6h3A1.5 1.5 0 0 1 15 7.5v.75h3.75M6 8.25h12M9 6.75h-.75A1.5 1.5 0 0 0 6.75 8.25v9A1.5 1.5 0 0 0 8.25 18.75h7.5A1.5 1.5 0 0 0 17.25 17.25v-9a1.5 1.5 0 0 0-1.5-1.5H15"],[1,"screen-overlay__gradient","screen-overlay__gradient--left"],[1,"screen-overlay__gradient","screen-overlay__gradient--right"],[1,"auto-navigation-card"],[1,"auto-navigation-card__description"],[1,"font-semibold"],[1,"auto-navigation-card__eyebrow"],[1,"auto-navigation-card__countdown"],["data-cursor-pointer","",1,"login-dialog",3,"click"],[1,"login-dialog__card",3,"click"],[1,"login-dialog__header"],[1,"login-dialog__title"],[1,"login-dialog__description"],["type","button","data-cursor-pointer","",1,"button-reset",3,"click","disabled"],[1,"alert","alert--danger"],[1,"stack",3,"submit"],[1,"form-field"],[1,"form-field__label"],["type","email","autocomplete","email","required","",1,"form-field__input",3,"input","value","disabled"],["type","password","autocomplete","current-password","required","",1,"form-field__input",3,"input","value","disabled"],["type","submit","data-cursor-pointer","",1,"button","button--primary","button--block",3,"disabled"],[1,"form-hint"],["type","password","autocomplete","new-password","required","",1,"form-field__input",3,"input","value","disabled"],[1,"login-dialog__success-icon"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 12.75 9 17.25 19.5 6.75"],["type","button","data-cursor-pointer","",1,"button-reset",3,"click"],[1,"stack"],[1,"alert","alert--success"],["type","button","data-cursor-pointer","",1,"button","button--primary","button--block",3,"click"],["type","button","data-cursor-pointer","",1,"button","button--ghost","button--block",3,"click"],[3,"close","capture","toggleFullscreen","toggleTheme","togglePlayback","createGallery","editGallery","deleteGallery","deletePhoto","info","x","y","isFullscreen","groups","themeMode","isAutoNavigationActive","autoNavigationCountdown","canEditGallery","canUploadToGallery","canDeletePhoto"],["data-cursor-pointer","",1,"overlay-panel",3,"click"],[3,"prepareCapture","galleryChange","capture","close","captureAllowed"],["gallerySelection",""],[3,"close","save","delete","gallery"],[3,"close","save"],[3,"close","confirmDelete","isDeleting","error"],[3,"close"]],template:function(t,r){if(t&1){let i=H();g(0,"div",7),x("contextmenu",function(s){return C(i),D(r.onRightClick(s))}),g(1,"div",8),M(2,C1,11,2,"div",9),Kt(3,I1,1,1,"ng-template",null,0,vl),M(5,R1,7,4,"div",10)(6,P1,1,1),Kt(7,J1,2,1,"ng-template",null,1,vl),M(9,yA,3,1)(10,RA,7,4),M(11,OA,1,0,"div",11),g(12,"div",12),x("click",function(){return C(i),D(r.closeExpandedItem())}),y(),M(13,LA,5,3,"div",13),y(),g(14,"div",14),M(15,VA,1,2)(16,jA,1,2),y(),M(17,GA,8,1,"div",15),M(18,zA,26,10,"div",16),M(19,YA,34,13,"div",16),M(20,ZA,23,1,"div",16),M(21,JA,1,10,"app-context-menu",17),M(22,XA,5,5,"div",18),M(23,eM,1,1,"app-gallery-editor",19),M(24,tM,1,0,"app-gallery-creation-dialog"),M(25,nM,1,2,"app-settings-dialog",20),M(26,rM,1,0,"app-info-dialog"),y()}if(t&2){let i;Ie("is-mobile",r.isMobileLayout())("is-idle",r.isIdle()||r.isAutoNavigationActive())("is-fullscreen",r.isFullscreen()),Be("aria-busy",r.isAppLoading()),_(2),N(r.isAppLoading()?2:-1),_(3),N(r.isMobileLayout()?r.mobileView()==="capture"?6:-1:5),_(4),N(r.isMobileLayout()?9:10),_(2),N(r.isAutoNavigationActive()?11:-1),_(),Ie("is-visible",!!r.expandedItem())("is-hidden",!r.expandedItem()),_(),N((i=r.expandedItem())?13:-1,i),_(2),N(r.currentView()==="galleries"?15:16),_(2),N(r.autoNavigationOverlayVisible()?17:-1),_(),N(r.isLoginDialogVisible()?18:-1),_(),N(r.isSignUpDialogVisible()?19:-1),_(),N(r.isSignUpSuccessDialogVisible()?20:-1),_(),N(r.contextMenu().visible?21:-1),_(),N(r.isWebcamVisible()&&r.canUseCaptureDialog()?22:-1),_(),N(r.isGalleryEditorVisible()&&r.canManageSelectedGallery()?23:-1),_(),N(r.isGalleryCreationDialogVisible()&&r.canCreateGalleries()?24:-1),_(),N(r.isSettingsDialogVisible()?25:-1),_(),N(r.isInfoDialogVisible()?26:-1)}},dependencies:[je,Kf,mc,vc,Pc,Fc,Lc,jc,Vc],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;-webkit-user-select:none;user-select:none}@media (max-width: 768px){[_nghost-%COMP%]{padding:0}}"],changeDetection:0});var Hc=Ji;function sM(n){return()=>n.initialize()}oh(Hc,{providers:[Uf(),lh(),{provide:pl,useFactory:sM,deps:[ut],multi:!0}]}).then(()=>{if("serviceWorker"in navigator){let n=()=>{navigator.serviceWorker.register("service-worker.js").catch(e=>{console.error("Falha ao registrar o service worker:",e)})};document.readyState==="complete"?n():window.addEventListener("load",n,{once:!0})}}).catch(n=>{console.error("Falha ao inicializar a aplica\xE7\xE3o:",n)});
