@import './tokens.css';
@import './components/modal.css';
@import './components/card.css';
@import './components/menu.css';
@import './components/app-shell.css';
@import './components/capture.css';

*, *::before, *::after {
  box-sizing: border-box;
}

html, body {
  height: 100%;
}

body {
  margin: 0;
  min-height: 100%;
  padding: 0;
  background-color: var(--color-bg-canvas, var(--surface-body));
  color: var(--color-fg-canvas, var(--text-body));
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  transition: background-color 200ms ease, color 200ms ease;
}

body.app-shell {
  background-color: var(--color-bg-canvas, var(--surface-body));
  color: var(--color-fg-canvas, var(--text-body));
  overflow: hidden;
  position: relative;
}

@media (max-width: 768px) {
  body {
    padding: 0;
  }
}

body.app-shell::before {
  content: '';
  position: fixed;
  inset: -50%;
  width: 200%;
  height: 200%;
  background-image: var(--texture-noise-image);
  background-repeat: repeat;
  background-size: var(--texture-noise-size);
  opacity: var(--texture-noise-opacity);
  animation: noise-animation var(--texture-noise-speed) steps(5) infinite;
  will-change: transform;
  z-index: 100;
  pointer-events: none;
  mix-blend-mode: var(--texture-noise-blend-mode);
}

body[data-theme='dark'] {
  color-scheme: dark;
}

body[data-theme='light'] {
  color-scheme: light;
}

[data-theme] .custom-cursor {
  display: none;
}

body,
[data-theme] [data-cursor-pointer] {
  cursor: auto;
}

@keyframes noise-animation {
  0% {
    transform: translate(0, 0);
  }
  10% {
    transform: translate(-2%, -3%);
  }
  20% {
    transform: translate(-4%, 2%);
  }
  30% {
    transform: translate(2%, -4%);
  }
  40% {
    transform: translate(-2%, 5%);
  }
  50% {
    transform: translate(-4%, 2%);
  }
  60% {
    transform: translate(3%, 0);
  }
  70% {
    transform: translate(0, 3%);
  }
  80% {
    transform: translate(-3%, 0);
  }
  90% {
    transform: translate(2%, 2%);
  }
  100% {
    transform: translate(1%, 0);
  }
}

@media (pointer: fine) {
  body,
  [data-theme] [data-cursor-pointer] {
    cursor: none;
  }

  [data-theme] .custom-cursor {
    display: block;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 100000;
    pointer-events: none;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    background-color: var(--cursor-accent);
    mix-blend-mode: difference;
    transition: width 0.3s, height 0.3s, border-radius 0.3s, opacity 0.3s, transform 0.1s;
    transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);
    opacity: 1;
    will-change: transform, width, height;
    transform: translate(-50%, -50%);
  }

  [data-theme] .custom-cursor::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 0;
    height: 0;
    border-style: solid;
    opacity: 0;
    transition: opacity 0.3s, border-width 0.3s;
  }

  /* Seta para cima */
  [data-theme] .custom-cursor.edge-top::before {
    opacity: 1;
    border-width: 0 8px 12px 8px;
    border-color: transparent transparent var(--cursor-accent) transparent;
    transform: translate(-50%, -50%) rotate(0deg);
  }

  /* Seta para direita */
  [data-theme] .custom-cursor.edge-right::before {
    opacity: 1;
    border-width: 8px 0 8px 12px;
    border-color: transparent transparent transparent var(--cursor-accent);
    transform: translate(-50%, -50%) rotate(0deg);
  }

  /* Seta para baixo */
  [data-theme] .custom-cursor.edge-bottom::before {
    opacity: 1;
    border-width: 12px 8px 0 8px;
    border-color: var(--cursor-accent) transparent transparent transparent;
    transform: translate(-50%, -50%) rotate(0deg);
  }

  /* Seta para esquerda */
  [data-theme] .custom-cursor.edge-left::before {
    opacity: 1;
    border-width: 8px 12px 8px 0;
    border-color: transparent var(--cursor-accent) transparent transparent;
    transform: translate(-50%, -50%) rotate(0deg);
  }

  /* Seta diagonal superior direita */
  [data-theme] .custom-cursor.edge-top-right::before {
    opacity: 1;
    border-width: 0 8px 12px 8px;
    border-color: transparent transparent var(--cursor-accent) transparent;
    transform: translate(-50%, -50%) rotate(45deg);
  }

  /* Seta diagonal superior esquerda */
  [data-theme] .custom-cursor.edge-top-left::before {
    opacity: 1;
    border-width: 0 8px 12px 8px;
    border-color: transparent transparent var(--cursor-accent) transparent;
    transform: translate(-50%, -50%) rotate(-45deg);
  }

  /* Seta diagonal inferior direita */
  [data-theme] .custom-cursor.edge-bottom-right::before {
    opacity: 1;
    border-width: 0 8px 12px 8px;
    border-color: transparent transparent var(--cursor-accent) transparent;
    transform: translate(-50%, -50%) rotate(135deg);
  }

  /* Seta diagonal inferior esquerda */
  [data-theme] .custom-cursor.edge-bottom-left::before {
    opacity: 1;
    border-width: 0 8px 12px 8px;
    border-color: transparent transparent var(--cursor-accent) transparent;
    transform: translate(-50%, -50%) rotate(-135deg);
  }

  /* Esconder o c√≠rculo quando estiver nas bordas */
  [data-theme] .custom-cursor.edge-top,
  [data-theme] .custom-cursor.edge-right,
  [data-theme] .custom-cursor.edge-bottom,
  [data-theme] .custom-cursor.edge-left,
  [data-theme] .custom-cursor.edge-top-right,
  [data-theme] .custom-cursor.edge-top-left,
  [data-theme] .custom-cursor.edge-bottom-right,
  [data-theme] .custom-cursor.edge-bottom-left {
    background-color: transparent;
    width: 40px;
    height: 40px;
  }

  [data-theme] .custom-cursor.pointer-hover {
    width: 40px;
    height: 40px;
    border-radius: 8px;
  }

  body[data-theme].custom-cursor-hidden .custom-cursor {
    opacity: 0;
  }
}
